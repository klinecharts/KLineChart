<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Figure | KLineChart</title>
    <meta name="description" content="💹📈 Highly customizable professional lightweight financial chart.">
    <meta name="generator" content="VitePress v2.0.0-alpha.6">
    <link rel="preload stylesheet" href="/assets/style.CL2W5vX4.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.44e961ff.js"></script>
    <script type="module" src="/assets/app.CdfvzAwe.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BgLdi7T3.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BqHI1-sA.js">
    <link rel="modulepreload" href="/assets/en-US_guide_figure.md.Df0UTbqZ.lean.js">
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <script>/**
     * @license
     * KLineChart v10.0.0-alpha8
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */(function(rt,Q){typeof exports=="object"&&typeof module<"u"?Q(exports):typeof define=="function"&&define.amd?define(["exports"],Q):Q((rt=typeof globalThis<"u"?globalThis:rt||self).klinecharts={})})(this,function(rt){"use strict";function Q(n,e){if(vt(n)||vt(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=n[t],r=e[t];vt(r)&&vt(i)?Q(i,r):E(e[t])&&(n[t]=Vt(e[t]))}}}function Vt(n){if(!vt(n))return n;var e=null;for(var t in e=xt(n)?[]:{},n)if(Object.prototype.hasOwnProperty.call(n,t)){var i=n[t];vt(i)?e[t]=Vt(i):e[t]=i}return e}function xt(n){return Object.prototype.toString.call(n)==="[object Array]"}function st(n){return typeof n=="function"}function vt(n){return typeof n=="object"&&E(n)}function W(n){return typeof n=="number"&&Number.isFinite(n)}function E(n){return n!=null}function Xt(n){return typeof n=="boolean"}function G(n){return typeof n=="string"}var Si=/\\(\\)?/g,Pi=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function nt(n,e,t){if(E(n)){var i=[];e.replace(Pi,function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=s;return E(l[1])?c=l[2].replace(Si,"$1"):E(l[0])&&(c=l[0].trim()),i.push(c),""});for(var r=n,o=0,a=i.length;E(r)&&o<a;)r=r?.[i[o++]];return E(r)?r:t??"--"}return t??"--"}function Ce(n,e,t){var i=function(r,o){var a={};return r.formatToParts(new Date(o)).forEach(function(s){var l=s.type,u=s.value;switch(l){case"year":a.YYYY=u;break;case"month":a.MM=u;break;case"day":a.DD=u;break;case"hour":a.HH=u==="24"?"00":u;break;case"minute":a.mm=u;break;case"second":a.ss=u}}),a}(n,e);return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(r){return i[r]})}function ot(n,e){var t=+n;return W(t)?t.toFixed(e??2):"".concat(n)}function Ee(n){var e=+n;if(W(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(n)}function Te(n,e){var t="".concat(n);if(e.length===0)return t;if(t.includes(".")){var i=t.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(r){return"".concat(r).concat(e)}),".").concat(i[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(r){return"".concat(r).concat(e)})}function Se(n,e){var t="".concat(n);if(new RegExp("\\.0{"+e+",}[1-9][0-9]*$").test(t)){var i=t.split("."),r=i.length-1,o=i[r],a=/0*/.exec(o);if(E(a)){var s=a[0].length;return i[r]=o.replace(/0*/,"0{".concat(s,"}")),i.join(".")}}return t}function Pe(n,e){return n.replace(/\{(\w+)\}/g,function(t,i){var r=e[i];return E(r)?r:"{".concat(i,"}")})}var Jt=null;function At(n){var e,t;return(t=(e=n.ownerDocument.defaultView)===null||e===void 0?void 0:e.devicePixelRatio)!==null&&t!==void 0?t:1}function Ot(n,e,t){return"".concat(e??"normal"," ").concat(n??12,"px ").concat(t??"Helvetica Neue")}function ft(n,e,t,i){if(!E(Jt)){var r=document.createElement("canvas"),o=At(r);(Jt=r.getContext("2d")).scale(o,o)}return Jt.font=Ot(e,t,i),Math.round(Jt.measureText(n).width)}var ce=function(n,e){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},ce(n,e)};function Y(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}ce(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var F=function(){return F=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},F.apply(this,arguments)};function $t(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function Ie(n,e,t,i){return new(t||(t=Promise))(function(r,o){function a(u){try{l(i.next(u))}catch(c){o(c)}}function s(u){try{l(i.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(a,s)}l((i=i.apply(n,e||[])).next())})}function Me(n,e){var t,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&c[0]?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(c[0]===6&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(h){c=[6,h],i=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function mt(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gt(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i,r,o=t.call(n),a=[];try{for(;(e===void 0||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return a}function Kt(n,e,t){if(t||arguments.length===2)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function te(n){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return E(n)&&Q(e,n),e}typeof SuppressedError=="function"&&SuppressedError;var zt=-1;function ee(n){return st(window.requestAnimationFrame)?window.requestAnimationFrame(n):window.setTimeout(n,20)}function ke(n){st(window.cancelAnimationFrame)?window.cancelAnimationFrame(n):window.clearTimeout(n)}function De(n){if(st(window.requestIdleCallback))return window.requestIdleCallback(n);var e=performance.now();return window.setTimeout(function(){n({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-e))}})},1)}var he=function(){function n(e){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Q(this._options,e)}return n.prototype._loop=function(){var e=this;this._running=!0;var t=function(){var i;if(e._running){var r=new Date().getTime()-e._time;r<e._options.duration?((i=e._doFrameCallback)===null||i===void 0||i.call(e,r),ee(t)):(e.stop(),e._currentIterationCount++,e._currentIterationCount<e._options.iterationCount&&e.start())}};ee(t)},n.prototype.doFrame=function(e){return this._doFrameCallback=e,this},n.prototype.setDuration=function(e){return this._options.duration=e,this},n.prototype.setIterationCount=function(e){return this._options.iterationCount=e,this},n.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},n.prototype.stop=function(){var e;this._running&&((e=this._doFrameCallback)===null||e===void 0||e.call(this,this._options.duration)),this._running=!1},n}(),de=1,Ae=new Date().getTime();function ie(n){var e=new Date().getTime();return e===Ae?++de:de=1,Ae=e,"".concat(n??"").concat(e,"_").concat(de)}function Tt(n,e){var t,i=document.createElement(n),r=e??{};for(var o in r)i.style[o]=(t=r[o])!==null&&t!==void 0?t:"";return i}function pe(n,e,t){var i=0,r=0;for(r=n.length-1;i!==r;){var o=Math.floor((r+i)/2),a=r-i,s=n[o][e];if(t===n[i][e])return i;if(t===n[r][e])return r;if(t===s)return o;if(t>s?i=o:r=o,a<=2)break}return i}function Fe(n,e){e=Math.max(0,e??0);var t=Math.pow(10,e);return Math.round(n*t)/t}function Be(n,e,t){for(var i,r,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],a=n.length,s=0;s<a;){var l=n[s];o[0]=Math.max((i=l[e])!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((r=l[t])!==null&&r!==void 0?r:Number.MAX_SAFE_INTEGER,o[1]),++s}return o}function St(n){return n===0?0:Math.log10(n)}function Wt(n){return Math.pow(10,n)}function Re(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.join("_")}var Ii=function(){function n(e){this._requestIdleCallbackId=zt,this._tasks=e??[],this._operateTasks()}return n.prototype._operateTasks=function(e){var t,i=this;this._requestIdleCallbackId!==zt&&(t=this._requestIdleCallbackId,st(window.cancelIdleCallback)?window.cancelIdleCallback(t):window.clearTimeout(t),this._requestIdleCallbackId=zt),e?.(),this._requestIdleCallbackId=De(function(r){i._runTasks(r)})},n.prototype._runTasks=function(e){for(var t=this;e.timeRemaining()>0&&this._tasks.length>0;){var i=this._tasks.shift();i?.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=De(function(r){t._runTasks(r)}))},n.prototype.addTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(r){return r.id===e.id});i>-1?t._tasks[i]=e:t._tasks.push(e)}),this},n.prototype.removeTask=function(e){var t=this;return E(e)&&this._operateTasks(function(){if(E(e)){var i=t._tasks.findIndex(function(r){return r.id===e});i>-1&&t._tasks.splice(i,1)}else t._tasks=[]}),this},n}(),Mi=function(){function n(){this._callbacks=[]}return n.prototype.subscribe=function(e){this._callbacks.indexOf(e)<0&&this._callbacks.push(e)},n.prototype.unsubscribe=function(e){if(st(e)){var t=this._callbacks.indexOf(e);t>-1&&this._callbacks.splice(t,1)}else this._callbacks=[]},n.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},n.prototype.isEmpty=function(){return this._callbacks.length===0},n}();function Nt(n){return n==="transparent"||n==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(n)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(n)}function Ft(n,e){var t=n.replace(/^#/,""),i=parseInt(t,16),r=i>>8&255,o=255&i;return"rgba(".concat(i>>16&255,", ").concat(r,", ").concat(o,", ").concat(e??1,")")}var V={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function Le(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:V.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function ge(n,e,t,i){var r,o=n.result,a=n.figures,s=n.styles,l=nt(s,"circles",t.circles),u=l.length,c=nt(s,"bars",t.bars),h=c.length,p=nt(s,"lines",t.lines),d=p.length,g=0,v=0,f=0,x=0;a.forEach(function(_){var m;switch(_.type){case"circle":x=g;var b=l[g%u];r=F(F({},b),{color:b.noChangeColor}),g++;break;case"bar":x=v;var w=c[v%h];r=F(F({},w),{color:w.noChangeColor}),v++;break;case"line":x=f,r=p[f%d],f++}if(E(_.type)){var C=(m=_.styles)===null||m===void 0?void 0:m.call(_,{data:{prev:o[e-1],current:o[e],next:o[e+1]},indicator:n,defaultStyles:t});i(_,F(F({},r),C),x)}})}var Oe=function(){function n(e){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series="normal",this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(t,i){var r=JSON.stringify(t.calcParams)!==JSON.stringify(i.calcParams)||t.figures!==i.figures||t.calc!==i.calc;return{calc:r,draw:r||t.shortName!==i.shortName||t.series!==i.series||t.minValue!==i.minValue||t.maxValue!==i.maxValue||t.precision!==i.precision||t.shouldOhlc!==i.shouldOhlc||t.shouldFormatBigNumber!==i.shouldFormatBigNumber||t.visible!==i.visible||t.zLevel!==i.zLevel||t.extendData!==i.extendData||t.regenerateFigures!==i.regenerateFigures||t.createTooltipDataSource!==i.createTooltipDataSource||t.draw!==i.draw}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result=[],this._lockSeriesPrecision=!1,this.override(e),this._lockSeriesPrecision=!1}return n.prototype.override=function(e){var t,i,r=this.result,o=$t(this,["result"]);this._prevIndicator=F(F({},Vt(o)),{result:r});var a=e.id,s=e.name,l=e.shortName,u=e.precision,c=e.styles,h=e.figures,p=e.calcParams,d=$t(e,["id","name","shortName","precision","styles","figures","calcParams"]);!G(this.id)&&G(a)&&(this.id=a),G(this.name)||(this.name=s??""),this.shortName=(t=l??this.shortName)!==null&&t!==void 0?t:this.name,W(u)&&(this.precision=u,this._lockSeriesPrecision=!0),E(c)&&((i=this.styles)!==null&&i!==void 0||(this.styles={}),Q(this.styles,c)),Q(this,d),E(p)&&(this.calcParams=p,st(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=h??this.figures},n.prototype.setSeriesPrecision=function(e){this._lockSeriesPrecision||(this.precision=e)},n.prototype.shouldUpdateImp=function(){var e=this._prevIndicator.zLevel!==this.zLevel,t=this.shouldUpdate(this._prevIndicator,this);return Xt(t)?{calc:t,draw:t,sort:e}:F(F({},t),{sort:e})},n.prototype.calcImp=function(e){return Ie(this,void 0,void 0,function(){var t;return Me(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=i.sent(),this.result=t,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},n.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return Y(i,t),i}(n)},n}(),ki={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(n){var e,t,i=n.data,r=n.indicator,o=n.defaultStyles,a=i.prev,s=i.current,l=(e=a?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return{color:c=u>l?nt(r.styles,"bars[0].upColor",o.bars[0].upColor):nt(r.styles,"bars[0].downColor",o.bars[0].downColor),style:u>l?"stroke":"fill",borderColor:c}}}],calc:function(n,e){var t=e.calcParams,i=Math.max(t[0],t[1]),r=0,o=0,a=0,s=0;return n.map(function(l,u){var c={},h=(l.low+l.high)/2;if(r+=h,o+=h,u>=t[0]-1){a=r/t[0];var p=n[u-(t[0]-1)];r-=(p.low+p.high)/2}return u>=t[1]-1&&(s=o/t[1],p=n[u-(t[1]-1)],o-=(p.low+p.high)/2),u>=i-1&&(c.ao=a-s),c})}},Di={name:"BOLL",shortName:"BOLL",series:"price",calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=t[0]-1,r=0;return n.map(function(o,a){var s=o.close,l={};if(r+=s,a>=i){l.mid=r/t[0];var u=function(c,h){var p=c.length,d=0;return c.forEach(function(g){var v=g.close-h;d+=v*v}),d=Math.abs(d),Math.sqrt(d/p)}(n.slice(a-i,a+1),l.mid);l.up=l.mid+t[1]*u,l.dn=l.mid-t[1]*u,r-=n[a-i].close}return l})}},Ai={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=Math.max.apply(Math,Kt([],Gt(t),!1)),r=[],o=[];return n.map(function(a,s){var l={},u=a.close;if(t.forEach(function(h,p){var d;r[p]=((d=r[p])!==null&&d!==void 0?d:0)+u,s>=h-1&&(o[p]=r[p]/h,r[p]-=n[s-(h-1)].close)}),s>=i-1){var c=0;o.forEach(function(h){c+=h}),l.bbi=c/4}return l})}},Fi={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=t[0]-1,r=0,o=[];return n.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(r+=u,o.push(u),s>=i){var c=r/t[0],h=o.slice(s-i,s+1),p=0;h.forEach(function(v){p+=Math.abs(v-c)});var d=p/t[0];l.cci=d!==0?(u-c)/d/.015:0;var g=(n[s-i].high+n[s-i].low+n[s-i].close)/3;r-=g}return l})}},Bi={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=Math.ceil(t[1]/2.5+1),r=Math.ceil(t[2]/2.5+1),o=Math.ceil(t[3]/2.5+1),a=Math.ceil(t[4]/2.5+1),s=0,l=[],u=0,c=[],h=0,p=[],d=0,g=[],v=[];return n.forEach(function(f,x){var _,m,b,w,C,y={},T=(_=n[x-1])!==null&&_!==void 0?_:f,P=(T.high+T.close+T.low+T.open)/4,S=Math.max(0,f.high-P),A=Math.max(0,P-f.low);x>=t[0]-1&&(y.cr=A!==0?S/A*100:0,s+=y.cr,u+=y.cr,h+=y.cr,d+=y.cr,x>=t[0]+t[1]-2&&(l.push(s/t[1]),x>=t[0]+t[1]+i-3&&(y.ma1=l[l.length-1-i]),s-=(m=v[x-(t[1]-1)].cr)!==null&&m!==void 0?m:0),x>=t[0]+t[2]-2&&(c.push(u/t[2]),x>=t[0]+t[2]+r-3&&(y.ma2=c[c.length-1-r]),u-=(b=v[x-(t[2]-1)].cr)!==null&&b!==void 0?b:0),x>=t[0]+t[3]-2&&(p.push(h/t[3]),x>=t[0]+t[3]+o-3&&(y.ma3=p[p.length-1-o]),h-=(w=v[x-(t[3]-1)].cr)!==null&&w!==void 0?w:0),x>=t[0]+t[4]-2&&(g.push(d/t[4]),x>=t[0]+t[4]+a-3&&(y.ma4=g[g.length-1-a]),d-=(C=v[x-(t[4]-1)].cr)!==null&&C!==void 0?C:0)),v.push(y)}),v}},Ri={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=Math.max(t[0],t[1]),r=0,o=0,a=0,s=[];return n.forEach(function(l,u){var c,h={},p=l.close;r+=p,o+=p;var d=0,g=0;if(u>=t[0]-1&&(d=r/t[0],r-=n[u-(t[0]-1)].close),u>=t[1]-1&&(g=o/t[1],o-=n[u-(t[1]-1)].close),u>=i-1){var v=d-g;h.dma=v,a+=v,u>=i+t[2]-2&&(h.ama=a/t[2],a-=(c=s[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(h)}),s}},Li={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=0,a=0,s=0,l=0,u=0,c=0,h=[];return n.forEach(function(p,d){var g,v,f={},x=(g=n[d-1])!==null&&g!==void 0?g:p,_=x.close,m=p.high,b=p.low,w=m-b,C=Math.abs(m-_),y=Math.abs(_-b),T=m-x.high,P=x.low-b,S=Math.max(Math.max(w,C),y),A=T>0&&T>P?T:0,L=P>0&&P>T?P:0;if(i+=S,r+=A,o+=L,d>=t[0]-1){d>t[0]-1?(a=a-a/t[0]+S,s=s-s/t[0]+A,l=l-l/t[0]+L):(a=i,s=r,l=o);var M=0,B=0;a!==0&&(M=100*s/a,B=100*l/a),f.pdi=M,f.mdi=B;var R=0;B+M!==0&&(R=Math.abs(B-M)/(B+M)*100),u+=R,d>=2*t[0]-2&&(c=d>2*t[0]-2?(c*(t[0]-1)+R)/t[0]:u/t[0],f.adx=c,d>=2*t[0]+t[1]-3&&(f.adxr=(((v=h[d-(t[1]-1)].adx)!==null&&v!==void 0?v:0)+c)/2))}h.push(f)}),h}},Oi={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(n){var e,t,i=n.data,r=n.indicator,o=n.defaultStyles,a=i.prev,s=i.current,l=(e=a?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return{style:l<u?"stroke":"fill",color:c=u>0?nt(r.styles,"bars[0].upColor",o.bars[0].upColor):u<0?nt(r.styles,"bars[0].downColor",o.bars[0].downColor):nt(r.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor),borderColor:c}}}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=0,a=0,s=0,l=0,u=Math.max(t[0],t[1]);return n.map(function(c,h){var p={},d=c.close;return i+=d,h>=t[0]-1&&(r=h>t[0]-1?(2*d+(t[0]-1)*r)/(t[0]+1):i/t[0]),h>=t[1]-1&&(o=h>t[1]-1?(2*d+(t[1]-1)*o)/(t[1]+1):i/t[1]),h>=u-1&&(a=r-o,p.dif=a,s+=a,h>=u+t[2]-2&&(l=h>u+t[2]-2?(2*a+l*(t[2]-1))/(t[2]+1):s/t[2],p.macd=2*(a-l),p.dea=l)),p})}},Wi={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){var i=t+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,i=e.figures,r=[],o=[];return n.map(function(a,s){var l,u={},c=((l=n[s-1])!==null&&l!==void 0?l:a).close,h=a.close-c;return t.forEach(function(p,d){var g,v,f;if(h>0?r[d]=((g=r[d])!==null&&g!==void 0?g:0)+h:o[d]=((v=o[d])!==null&&v!==void 0?v:0)+Math.abs(h),s>=p-1){o[d]!==0?u[i[d].key]=100-100/(1+r[d]/o[d]):u[i[d].key]=0;var x=n[s-(p-1)],_=(f=n[s-p])!==null&&f!==void 0?f:x,m=x.close-_.close;m>0?r[d]-=m:o[d]-=Math.abs(m)}}),u})}},Vi={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=[];return n.forEach(function(r,o){var a,s,l,u,c={},h=r.close;if(o>=t[0]-1){var p=Be(n.slice(o-(t[0]-1),o+1),"high","low"),d=p[0],g=p[1],v=d-g,f=(h-g)/(v===0?1:v)*100;c.k=((t[1]-1)*((s=(a=i[o-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+f)/t[1],c.d=((t[2]-1)*((u=(l=i[o-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},zi={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(n){var e,t,i,r=n.data,o=n.indicator,a=n.defaultStyles,s=r.current;return{color:((e=s?.sar)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER)<(((t=s?.high)!==null&&t!==void 0?t:0)+((i=s?.low)!==null&&i!==void 0?i:0))/2?nt(o.styles,"circles[0].upColor",a.circles[0].upColor):nt(o.styles,"circles[0].downColor",a.circles[0].downColor)}}}],calc:function(n,e){var t=e.calcParams,i=t[0]/100,r=t[1]/100,o=t[2]/100,a=i,s=-100,l=!1,u=0;return n.map(function(c,h){var p=u,d=c.high,g=c.low;if(l){(s===-100||s<d)&&(s=d,a=Math.min(a+r,o)),u=p+a*(s-p);var v=Math.min(n[Math.max(1,h)-1].low,g);u>c.low?(u=s,a=i,s=-100,l=!l):u>v&&(u=v)}else{(s===-100||s>g)&&(s=g,a=Math.min(a+r,o)),u=p+a*(s-p);var f=Math.max(n[Math.max(1,h)-1].high,d);u<c.high?(u=s,a=0,s=-100,l=!l):u<f&&(u=f)}return{high:d,low:g,sar:u}})}};function We(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(n){var e=n.data,t=n.indicator,i=n.defaultStyles,r=e.current,o=nt(t.styles,"bars[0].noChangeColor",i.bars[0].noChangeColor);return E(r)&&(r.close>r.open?o=nt(t.styles,"bars[0].upColor",i.bars[0].upColor):r.close<r.open&&(o=nt(t.styles,"bars[0].downColor",i.bars[0].downColor))),{color:o}}}}var Ni={name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},We()],regenerateFigures:function(n){var e=n.map(function(t,i){return{key:"ma".concat(i+1),title:"MA".concat(t,": "),type:"line"}});return e.push(We()),e},calc:function(n,e){var t=e.calcParams,i=e.figures,r=[];return n.map(function(o,a){var s,l=(s=o.volume)!==null&&s!==void 0?s:0,u={volume:l,open:o.open,close:o.close};return t.forEach(function(c,h){var p,d;r[h]=((p=r[h])!==null&&p!==void 0?p:0)+l,a>=c-1&&(u[i[h].key]=r[h]/c,r[h]-=(d=n[a-(c-1)].volume)!==null&&d!==void 0?d:0)}),u})}},Yi={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,i=e.figures;return n.map(function(r,o){var a={},s=r.close;return t.forEach(function(l,u){var c=l-1;if(o>=c){var h=Be(n.slice(o-c,o+1),"high","low"),p=h[0],d=p-h[1];a[i[u].key]=d===0?0:(s-p)/d*100}}),a})}},re={},Hi=[{name:"AVP",shortName:"AVP",series:"price",precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(n){var e=0,t=0;return n.map(function(i){var r,o,a={},s=(r=i.turnover)!==null&&r!==void 0?r:0,l=(o=i.volume)!==null&&o!==void 0?o:0;return e+=s,(t+=l)!==0&&(a.avp=e/t),a})}},ki,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,i=e.figures,r=[];return n.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;if(r[c]=((h=r[c])!==null&&h!==void 0?h:0)+l,a>=u-1){var p=r[c]/t[c];s[i[c].key]=(l-p)/p*100,r[c]-=n[a-(u-1)].close}}),s})}},Di,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=0,a=0;return n.map(function(s,l){var u,c,h={},p=s.high,d=s.low,g=s.open,v=((u=n[l-1])!==null&&u!==void 0?u:s).close;if(o+=p-g,a+=g-d,i+=p-v,r+=v-d,l>=t[0]-1){h.ar=a!==0?o/a*100:0,h.br=r!==0?i/r*100:0;var f=n[l-(t[0]-1)],x=f.high,_=f.low,m=f.open,b=((c=n[l-t[0]])!==null&&c!==void 0?c:n[l-(t[0]-1)]).close;i-=x-b,r-=b-_,o-=x-m,a-=m-_}return h})}},Ai,Fi,Bi,Ri,Li,{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=[];return n.map(function(o,a){var s,l={};if(a>0){var u=n[a-1],c=o.high,h=o.low,p=(s=o.volume)!==null&&s!==void 0?s:0,d=(c+h)/2-(u.high+u.low)/2;if(p===0||c-h==0)l.emv=0;else{var g=p/1e8/(c-h);l.emv=d/g}i+=l.emv,r.push(l.emv),a>=t[0]&&(l.maEmv=i/t[0],i-=r[a-t[0]])}return l})}},{name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,i=e.figures,r=0,o=[];return n.map(function(a,s){var l={},u=a.close;return r+=u,t.forEach(function(c,h){s>=c-1&&(o[h]=s>c-1?(2*u+(c-1)*o[h])/(c+1):r/c,l[i[h].key]=o[h])}),l})}},{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=[];return n.forEach(function(o,a){var s,l={};if(a>=t[0]){var u=o.close,c=n[a-t[0]].close;l.mtm=u-c,i+=l.mtm,a>=t[0]+t[1]-1&&(l.maMtm=i/t[1],i-=(s=r[a-(t[1]-1)].mtm)!==null&&s!==void 0?s:0)}r.push(l)}),r}},{name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,i=e.figures,r=[];return n.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;r[c]=((h=r[c])!==null&&h!==void 0?h:0)+l,a>=u-1&&(s[i[c].key]=r[c]/u,r[c]-=n[a-(u-1)].close)}),s})}},Oi,{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=[];return n.forEach(function(a,s){var l,u,c,h,p=(l=n[s-1])!==null&&l!==void 0?l:a;a.close<p.close?r-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>p.close&&(r+=(c=a.volume)!==null&&c!==void 0?c:0);var d={obv:r};i+=r,s>=t[0]-1&&(d.maObv=i/t[0],i-=(h=o[s-(t[0]-1)].obv)!==null&&h!==void 0?h:0),o.push(d)}),o}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(n){var e=0;return n.map(function(t,i){var r,o,a={},s=t.close,l=(r=t.volume)!==null&&r!==void 0?r:1,u=((o=n[i-1])!==null&&o!==void 0?o:t).close,c=0,h=u*l;return h!==0&&(c=(s-u)/h),e+=c,a.pvt=e,a})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=[],a=[];return n.forEach(function(s,l){var u,c,h={},p=((u=n[l-1])!==null&&u!==void 0?u:s).close,d=s.close-p>0?1:0;o.push(d),i+=d,l>=t[0]-1&&(h.psy=i/t[0]*100,r+=h.psy,l>=t[0]+t[1]-2&&(h.maPsy=r/t[1],r-=(c=a[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),i-=o[l-(t[0]-1)]),a.push(h)}),a}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=[],r=0;return n.forEach(function(o,a){var s,l,u={};if(a>=t[0]-1){var c=o.close,h=((s=n[a-t[0]])!==null&&s!==void 0?s:n[a-(t[0]-1)]).close;u.roc=h!==0?(c-h)/h*100:0,r+=u.roc,a>=t[0]-1+t[1]-1&&(u.maRoc=r/t[1],r-=(l=i[a-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},Wi,{name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(n,e){var t=e.calcParams,i=0,r=0;return n.map(function(o,a){var s={},l=o.close;return i+=l,a>=t[0]-1&&(r=a>t[0]-1?(l*t[1]+r*(t[0]-t[1]+1))/(t[0]+1):i/t[0],s.sma=r),s})}},Vi,zi,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=0,a=0,s=0,l=0,u=0,c=[];return n.forEach(function(h,p){var d,g={},v=h.close;if(i+=v,p>=t[0]-1&&(r=p>t[0]-1?(2*v+(t[0]-1)*r)/(t[0]+1):i/t[0],s+=r,p>=2*t[0]-2&&(o=p>2*t[0]-2?(2*r+(t[0]-1)*o)/(t[0]+1):s/t[0],l+=o,p>=3*t[0]-3))){var f=0,x=0;p>3*t[0]-3?x=((f=(2*o+(t[0]-1)*a)/(t[0]+1))-a)/a*100:f=l/t[0],a=f,g.trix=x,u+=x,p>=3*t[0]+t[1]-4&&(g.maTrix=u/t[1],u-=(d=c[p-(t[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(g)}),c}},Ni,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(n,e){var t=e.calcParams,i=0,r=0,o=0,a=0,s=[];return n.forEach(function(l,u){var c,h,p,d,g,v={},f=l.close,x=((c=n[u-1])!==null&&c!==void 0?c:l).close,_=(h=l.volume)!==null&&h!==void 0?h:0;if(f>x?i+=_:f<x?r+=_:o+=_,u>=t[0]-1){var m=o/2;v.vr=r+m===0?0:(i+m)/(r+m)*100,a+=v.vr,u>=t[0]+t[1]-2&&(v.maVr=a/t[1],a-=(p=s[u-(t[1]-1)].vr)!==null&&p!==void 0?p:0);var b=n[u-(t[0]-1)],w=(d=n[u-t[0]])!==null&&d!==void 0?d:b,C=b.close,y=(g=b.volume)!==null&&g!==void 0?g:0;C>w.close?i-=y:C<w.close?r-=y:o-=y}s.push(v)}),s}},Yi];function Ve(n){var e;return(e=re[n])!==null&&e!==void 0?e:null}function yt(n,e){var t,i=(t=e?.ignoreEvent)!==null&&t!==void 0&&t;return Xt(i)?!i:!i.includes(n)}Hi.forEach(function(n){re[n.name]=Oe.extend(n)});var Yt="overlay_figure_",ze=function(){function n(e){this.groupId="",this.totalStep=1,this.currentStep=1,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode="normal",this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseMove=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(e)}return n.prototype.override=function(e){var t,i;this._prevOverlay=Vt(this);var r=e.id,o=e.name;e.currentStep;var a=e.points,s=e.styles;if(Q(this,$t(e,["id","name","currentStep","points","styles"])),G(this.name)||(this.name=o??""),!G(this.id)&&G(r)&&(this.id=r),E(s)&&((t=this.styles)!==null&&t!==void 0||(this.styles={}),Q(this.styles,s)),xt(a)&&a.length>0){var l=0;if(this.points=Kt([],Gt(a),!1),a.length>=this.totalStep-1?(this.currentStep=-1,l=this.totalStep-1):(this.currentStep=a.length+1,l=a.length),st(this.performEventMoveForDrawing))for(var u=0;u<l;u++)this.performEventMoveForDrawing({currentStep:u+2,mode:this.mode,points:this.points,performPointIndex:u,performPoint:this.points[u]});this.currentStep===-1&&((i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},n.prototype.getPrevZLevel=function(){return this._prevZLevel},n.prototype.setPrevZLevel=function(e){this._prevZLevel=e},n.prototype.shouldUpdate=function(){var e=this._prevOverlay.zLevel!==this.zLevel;return{sort:e,draw:e||JSON.stringify(this._prevOverlay.points)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles}},n.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},n.prototype.forceComplete=function(){this.currentStep=-1},n.prototype.isDrawing=function(){return this.currentStep!==-1},n.prototype.isStart=function(){return this.currentStep===1},n.prototype.eventMoveForDrawing=function(e){var t,i=this.currentStep-1,r={};W(e.timestamp)&&(r.timestamp=e.timestamp),W(e.dataIndex)&&(r.dataIndex=e.dataIndex),W(e.value)&&(r.value=e.value),this.points[i]=r,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:r})},n.prototype.eventPressedPointMove=function(e,t){var i;this.points[t].timestamp=e.timestamp,W(e.value)&&(this.points[t].value=e.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},n.prototype.startPressedMove=function(e){this._prevPressedPoint=F({},e),this._prevPressedPoints=Vt(this.points)},n.prototype.eventPressedOtherMove=function(e,t){if(this._prevPressedPoint!==null){var i=null;W(e.dataIndex)&&W(this._prevPressedPoint.dataIndex)&&(i=e.dataIndex-this._prevPressedPoint.dataIndex);var r=null;W(e.value)&&W(this._prevPressedPoint.value)&&(r=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var a;W(o.timestamp)&&(o.dataIndex=t.timestampToDataIndex(o.timestamp));var s=F({},o);return W(i)&&W(o.dataIndex)&&(s.dataIndex=o.dataIndex+i,s.timestamp=(a=t.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),W(r)&&W(o.value)&&(s.value=o.value+r),s})}},n.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return Y(i,t),i}(n)},n}(),Xi={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e,t,i,r=n.chart,o=n.coordinates,a=n.bounding,s=n.overlay,l=n.yAxis,u=s.points;if(o.length>0){var c=0;(e=l?.isInCandle())===null||e===void 0||e?c=(i=(t=r.getSymbol())===null||t===void 0?void 0:t.pricePrecision)!==null&&i!==void 0?i:2:r.getIndicators({paneId:s.paneId}).forEach(function(f){c=Math.max(c,f.precision)});var h=[],p=[],d=a.width;if(o.length>1&&W(u[0].value)&&W(u[1].value)){var g=o[0].y-o[1].y,v=u[0].value-u[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(f){var x,_=o[1].y+g*f,m=r.getDecimalFold().format(r.getThousandsSeparator().format((((x=u[1].value)!==null&&x!==void 0?x:0)+v*f).toFixed(c)));h.push({coordinates:[{x:0,y:_},{x:d,y:_}]}),p.push({x:0,y:_,text:"".concat(m," (").concat((100*f).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:h},{type:"text",isCheckEvent:!1,attrs:p}]}return[]}},Gi={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.bounding,i={x:0,y:e[0].y};return E(e[1])&&e[0].x<e[1].x&&(i.x=t.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(n){var e=n.currentStep,t=n.points,i=n.performPoint;e===2&&(t[0].value=i.value)}},ve=function(){function n(){this._children=[],this._callbacks=new Map}return n.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},n.prototype.onEvent=function(e,t){var i=this._callbacks.get(e);return!(!E(i)||!this.checkEventOn(t))&&i(t)},n.prototype.dispatchEventToChildren=function(e,t){var i=this._children.length-1;if(i>-1){for(var r=i;r>-1;r--)if(this._children[r].dispatchEvent(e,t))return!0}return!1},n.prototype.dispatchEvent=function(e,t){return!!this.dispatchEventToChildren(e,t)||this.onEvent(e,t)},n.prototype.addChild=function(e){return this._children.push(e),this},n.prototype.clear=function(){this._children=[]},n}(),Ne=function(n){function e(t){var i=n.call(this)||this;return i.attrs=t.attrs,i.styles=t.styles,i}return Y(e,n),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var i=function(r){function o(){return r!==null&&r.apply(this,arguments)||this}return Y(o,r),o.prototype.checkEventOnImp=function(a,s,l){return t.checkEventOn(a,s,l)},o.prototype.drawImp=function(a,s,l){t.draw(a,s,l)},o}(e);return i},e}(ve);function Ye(n,e){var t,i,r=[];r=r.concat(e);try{for(var o=mt(r),a=o.next();!a.done;a=o.next()){var s=a.value.coordinates;if(s.length>1)for(var l=1;l<s.length;l++){var u=s[l-1],c=s[l];if(u.x===c.x){if(Math.abs(u.y-n.y)+Math.abs(c.y-n.y)-Math.abs(u.y-c.y)<4&&Math.abs(n.x-u.x)<2)return!0}else{var h=ne(u,c),p=fe(h,n),d=Math.abs(p-n.y);if(Math.abs(u.x-n.x)+Math.abs(c.x-n.x)-Math.abs(u.x-c.x)<4&&d*d/(h[0]*h[0]+1)<4)return!0}}}}catch(g){t={error:g}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function fe(n,e){return n!==null?e.x*n[0]+n[1]:e.y}function Ut(n,e,t){return fe(ne(n,e),t)}function ne(n,e){var t=n.x-e.x;if(t!==0){var i=(n.y-e.y)/t;return[i,n.y-i*n.x]}return null}function He(n,e,t){var i=e.length,r=W(t)?t>0&&t<1?t:0:t?.5:0;if(r>0&&i>2){for(var o=e[0].x,a=e[0].y,s=1;s<i-1;s++){var l=e[s-1],u=e[s],c=e[s+1],h=u.x-l.x,p=u.y-l.y,d=c.x-u.x,g=c.y-u.y,v=c.x-l.x,f=c.y-l.y,x=Math.sqrt(h*h+p*p),_=Math.sqrt(d*d+g*g),m=_/(_+x),b=u.x+v*r*m,w=u.y+f*r*m;b=Math.min(b,Math.max(c.x,u.x)),w=Math.min(w,Math.max(c.y,u.y)),b=Math.max(b,Math.min(c.x,u.x)),w=Math.max(w,Math.min(c.y,u.y)),v=b-u.x,f=w-u.y;var C=u.x-v*x/_,y=u.y-f*x/_;C=Math.min(C,Math.max(l.x,u.x)),y=Math.min(y,Math.max(l.y,u.y)),C=Math.max(C,Math.min(l.x,u.x)),y=Math.max(y,Math.min(l.y,u.y)),v=u.x-C,f=u.y-y,b=u.x+v*_/x,w=u.y+f*_/x,n.bezierCurveTo(o,a,C,y,u.x,u.y),o=b,a=w}var T=e[i-1];n.bezierCurveTo(o,a,T.x,T.y,T.x,T.y)}else for(s=1;s<i;s++)n.lineTo(e[s].x,e[s].y)}var Ui={name:"line",checkEventOn:Ye,draw:function(n,e,t){(function(i,r,o){var a=[];a=a.concat(r);var s=o.style,l=s===void 0?"solid":s,u=o.smooth,c=u!==void 0&&u,h=o.size,p=h===void 0?1:h,d=o.color,g=d===void 0?"currentColor":d,v=o.dashedValue,f=v===void 0?[2,2]:v;i.lineWidth=p,i.strokeStyle=g,l==="dashed"?i.setLineDash(f):i.setLineDash([]);var x=p%2==1?.5:0;a.forEach(function(_){var m=_.coordinates;m.length>1&&(m.length!==2||m[0].x!==m[1].x&&m[0].y!==m[1].y?(i.save(),p%2==1&&i.translate(.5,.5),i.beginPath(),i.moveTo(m[0].x,m[0].y),He(i,m,c),i.stroke(),i.closePath(),i.restore()):(i.beginPath(),m[0].x===m[1].x?(i.moveTo(m[0].x+x,m[0].y),i.lineTo(m[1].x+x,m[1].y)):(i.moveTo(m[0].x,m[0].y+x),i.lineTo(m[1].x,m[1].y+x)),i.stroke(),i.closePath()))})})(n,e,t)}};function Xe(n,e,t){var i=t??0,r=[];if(n.length>1)if(n[0].x===n[1].x){var o=e.height;if(r.push({coordinates:[{x:n[0].x,y:0},{x:n[0].x,y:o}]}),n.length>2){r.push({coordinates:[{x:n[2].x,y:0},{x:n[2].x,y:o}]});for(var a=n[0].x-n[2].x,s=0;s<i;s++){var l=a*(s+1);r.push({coordinates:[{x:n[0].x+l,y:0},{x:n[0].x+l,y:o}]})}}}else{var u=e.width,c=ne(n[0],n[1]),h=c[0],p=c[1];if(r.push({coordinates:[{x:0,y:0*h+p},{x:u,y:u*h+p}]}),n.length>2){var d=n[2].y-h*n[2].x;for(r.push({coordinates:[{x:0,y:0*h+d},{x:u,y:u*h+d}]}),a=p-d,s=0;s<i;s++){var g=p+a*(s+1);r.push({coordinates:[{x:0,y:0*h+g},{x:u,y:u*h+g}]})}}}return r}function Zi(n,e){if(n.length>1){var t={x:0,y:0};return t=n[0].x===n[1].x&&n[0].y!==n[1].y?n[0].y<n[1].y?{x:n[0].x,y:e.height}:{x:n[0].x,y:0}:n[0].x>n[1].x?{x:0,y:Ut(n[0],n[1],{x:0,y:n[0].y})}:{x:e.width,y:Ut(n[0],n[1],{x:e.width,y:n[0].y})},{coordinates:[n[0],t]}}return[]}var qi={name:"simpleAnnotation",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(n){var e,t=n.overlay,i=n.coordinates,r="";E(t.extendData)&&(r=st(t.extendData)?t.extendData(t):(e=t.extendData)!==null&&e!==void 0?e:"");var o=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:o,y:a},{x:o,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:s},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:r,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},ji={name:"simpleTag",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(n){var e=n.bounding,t=n.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(n){var e,t,i,r,o=n.chart,a=n.overlay,s=n.coordinates,l=n.bounding,u=n.yAxis,c="left",h=0;(e=u?.isFromZero())!==null&&e!==void 0&&e?(c="left",h=0):(c="right",h=l.width);var p="";return E(a.extendData)&&(p=st(a.extendData)?a.extendData(a):(t=a.extendData)!==null&&t!==void 0?t:""),!E(p)&&W(a.points[0].value)&&(p=ot(a.points[0].value,(r=(i=o.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&r!==void 0?r:2)),{type:"text",attrs:{x:h,y:s[0].y,text:p,align:c,baseline:"middle"}}}},Zt={};function Qi(n){var e;return(e=Zt[n])!==null&&e!==void 0?e:null}[Xi,Gi,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(n){var e=n.currentStep,t=n.points,i=n.performPoint;e===2&&(t[0].value=i.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]}}]}},{name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){return[{type:"line",attrs:Xe(n.coordinates,n.bounding)}]}},{name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){return[{type:"line",attrs:Xe(n.coordinates,n.bounding,1)}]}},{name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e,t,i,r=n.chart,o=n.coordinates,a=n.bounding,s=n.overlay,l=n.yAxis,u=0;(e=l?.isInCandle())===null||e===void 0||e?u=(i=(t=r.getSymbol())===null||t===void 0?void 0:t.pricePrecision)!==null&&i!==void 0?i:2:r.getIndicators({paneId:s.paneId}).forEach(function(p){u=Math.max(u,p.precision)});var c=s.points[0].value,h=c===void 0?0:c;return[{type:"line",attrs:{coordinates:[o[0],{x:a.width,y:o[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:o[0].x,y:o[0].y,text:r.getDecimalFold().format(r.getThousandsSeparator().format(h.toFixed(u))),baseline:"bottom"}}]}},{name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){return[{type:"line",attrs:Zi(n.coordinates,n.bounding)}]}},{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},{name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Ut(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:Ut(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.bounding;if(e.length===2){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=t.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(n){var e=n.currentStep,t=n.points,i=n.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(n){var e=n.currentStep,t=n.points,i=n.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]}},qi,ji].forEach(function(n){Zt[n.name]=ze.extend(n)});var Ge={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},title:{color:"#76808F"},legend:{color:"#76808F"}}},indicator:{tooltip:{title:{color:"#76808F"},legend:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},title:{color:"#929AA5"},legend:{color:"#929AA5"}}},indicator:{tooltip:{title:{color:"#929AA5"},legend:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function Ji(n){var e;return(e=Ge[n])!==null&&e!==void 0?e:null}var at="candle_pane",Ue="indicator_pane_",et="x_axis_pane",$i=1,Ki=50,tr=function(){function n(e,t){var i,r,o,a,s,l=this;this._styles={grid:{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]}},candle:(s={show:!0,color:V.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},{type:"candle_solid",bar:{compareRule:"current_open",upColor:V.GREEN,downColor:V.RED,noChangeColor:V.GREY,upBorderColor:V.GREEN,downBorderColor:V.RED,noChangeBorderColor:V.GREY,upWickColor:V.GREEN,downWickColor:V.RED,noChangeWickColor:V.GREY},area:{lineSize:2,lineColor:V.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Ft(V.BLUE,.01)},{offset:1,color:Ft(V.BLUE,.2)}],point:{show:!0,color:V.BLUE,radius:4,rippleColor:Ft(V.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:F({},s),low:F({},s),last:{show:!0,compareRule:"current_open",upColor:V.GREEN,downColor:V.RED,noChangeColor:V.GREY,line:{show:!0,style:"dashed",dashedValue:[4,4],size:1},text:{show:!0,style:"fill",size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:"solid",borderSize:0,borderDashedValue:[2,2],color:V.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2},extendTexts:[]}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},title:{show:!0,size:14,family:"Helvetica Neue",weight:"normal",color:V.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,template:"{ticker} \xB7 {period}"},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:V.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a",template:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]},features:[]}}),indicator:(o=Ft(V.GREEN,.7),a=Ft(V.RED,.7),{ohlc:{compareRule:"current_open",upColor:o,downColor:a,noChangeColor:V.GREY},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:o,downColor:a,noChangeColor:V.GREY}],lines:["#FF9600","#935EBD",V.BLUE,"#E11D74","#01C5C4"].map(function(f){return{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:f}}),circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:o,downColor:a,noChangeColor:V.GREY}],lastValueMark:{show:!1,text:{show:!1,style:"fill",color:V.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",title:{show:!0,showName:!0,showParams:!0,size:12,family:"Helvetica Neue",weight:"normal",color:V.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:V.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a"},features:[]}}),xAxis:Le(),yAxis:Le(),separator:{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:Ft(V.BLUE,.08)},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:V.GREY},text:{show:!0,style:"fill",color:V.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:V.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:V.GREY},features:[]},vertical:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:V.GREY},text:{show:!0,style:"fill",color:V.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:V.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:V.GREY}}},overlay:(i=Ft(V.BLUE,.35),r=Ft(V.BLUE,.25),{point:{color:V.BLUE,borderColor:i,borderSize:1,radius:5,activeColor:V.BLUE,activeBorderColor:i,activeBorderSize:3,activeRadius:5},line:{style:"solid",smooth:!1,color:V.BLUE,size:1,dashedValue:[2,2]},rect:{style:"fill",color:r,borderColor:V.BLUE,borderSize:1,borderRadius:0,borderStyle:"solid",borderDashedValue:[2,2]},polygon:{style:"fill",color:V.BLUE,borderColor:V.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},circle:{style:"fill",color:r,borderColor:V.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},arc:{style:"solid",color:V.BLUE,size:1,dashedValue:[2,2]},text:{style:"fill",color:V.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:V.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:V.BLUE}})},this._formatter={formatDate:function(f){return Ce(f.dateTimeFormat,f.timestamp,f.template)},formatBigNumber:Ee,formatExtendText:function(f){return""}},this._innerFormatter={formatDate:function(f,x,_){return l._formatter.formatDate({dateTimeFormat:l._dateTimeFormat,timestamp:f,template:x,type:_})},formatBigNumber:function(f){return l._formatter.formatBigNumber(f)},formatExtendText:function(f){return l._formatter.formatExtendText(f)}},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(f){return Te(f,l._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(f){return Se(f,l._decimalFold.threshold)}},this._symbol=null,this._period=null,this._dataList=[],this._dataLoader=null,this._loading=!1,this._dataLoadMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=10,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole="bar_count",this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._actions=new Map,this._indicators=new Map,this._taskScheduler=new Ii,this._overlays=new Map,this._progressOverlayInfo=null,this._lastPriceMarkExtendTextUpdateTimers=[],this._pressedOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._chart=e,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var u=t??{},c=u.styles,h=u.locale,p=u.timezone,d=u.formatter,g=u.thousandsSeparator,v=u.decimalFold;E(c)&&this.setStyles(c),G(h)&&this.setLocale(h),this.setTimezone(p??""),E(d)&&this.setFormatter(d),E(g)&&this.setThousandsSeparator(g),E(v)&&this.setDecimalFold(v)}return n.prototype.setStyles=function(e){var t,i,r,o,a,s,l=this,u=null;if(u=G(e)?Ji(e):e,Q(this._styles,u),xt((r=(i=(t=u?.candle)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.legend)===null||r===void 0?void 0:r.template)&&(this._styles.candle.tooltip.legend.template=u.candle.tooltip.legend.template),E((s=(a=(o=u?.candle)===null||o===void 0?void 0:o.priceMark)===null||a===void 0?void 0:a.last)===null||s===void 0?void 0:s.extendTexts)){this._clearLastPriceMarkExtendTextUpdateTimer();var c=[];this._styles.candle.priceMark.last.extendTexts.forEach(function(h){var p=h.updateInterval;if(h.show&&p>0&&!c.includes(p)){c.push(p);var d=setInterval(function(){l._chart.updatePane(0,at)},p);l._lastPriceMarkExtendTextUpdateTimers.push(d)}})}},n.prototype.getStyles=function(){return this._styles},n.prototype.setFormatter=function(e){Q(this._formatter,e)},n.prototype.getFormatter=function(){return this._formatter},n.prototype.getInnerFormatter=function(){return this._innerFormatter},n.prototype.setLocale=function(e){this._locale=e},n.prototype.getLocale=function(){return this._locale},n.prototype.setTimezone=function(e){if(!E(this._dateTimeFormat)||this.getTimezone()!==e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};e.length>0&&(t.timeZone=e);var i=null;try{i=new Intl.DateTimeFormat("en",t)}catch{}i!==null&&(this._dateTimeFormat=i)}},n.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},n.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},n.prototype.setThousandsSeparator=function(e){Q(this._thousandsSeparator,e)},n.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},n.prototype.setDecimalFold=function(e){Q(this._decimalFold,e)},n.prototype.getDecimalFold=function(){return this._decimalFold},n.prototype.setSymbol=function(e){this._processDataUnsubscribe(),this._symbol=e,this._synchronizeIndicatorSeriesPrecision(),this.resetData()},n.prototype.getSymbol=function(){return this._symbol},n.prototype.setPeriod=function(e){this._processDataUnsubscribe(),this._period=e,this.resetData()},n.prototype.getPeriod=function(){return this._period},n.prototype.getDataList=function(){return this._dataList},n.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},n.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},n.prototype._addData=function(e,t,i){var r,o,a=this,s=!1,l=!1,u=0;if(xt(e)){var c={backward:!1,forward:!1};switch(Xt(i)?(c.backward=i,c.forward=i):(c.backward=(r=i?.backward)!==null&&r!==void 0&&r,c.forward=(o=i?.forward)!==null&&o!==void 0&&o),u=e.length,t){case"init":this._clearData(),this._dataList=e,this._dataLoadMore.backward=c.backward,this._dataLoadMore.forward=c.forward,this.setOffsetRightDistance(this._offsetRightDistance),l=!0;break;case"backward":this._dataList=this._dataList.concat(e),this._dataLoadMore.backward=c.backward,this._lastBarRightSideDiffBarCount-=u,l=u>0;break;case"forward":this._dataList=e.concat(this._dataList),this._dataLoadMore.forward=c.forward,l=u>0}s=!0}else{var h=this._dataList.length,p=e.timestamp,d=nt(this._dataList[h-1],"timestamp",0);if(p>d){this._dataList.push(e);var g=this.getLastBarRightSideDiffBarCount();g<0&&this.setLastBarRightSideDiffBarCount(--g),u=1,s=!0,l=!0}else p===d&&(this._dataList[h-1]=e,s=!0,l=!0)}s&&l&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this.getIndicatorsByFilter({}).forEach(function(v){a._addIndicatorCalcTask(v,t)}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:t!=="init"}))},n.prototype.setDataLoader=function(e){this._dataLoader=e,this.resetData()},n.prototype._calcOptimalBarSpace=function(){var e=1-.2*Math.atan(Math.max(4,this._barSpace)-4)/(.5*Math.PI),t=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));t%2==0&&t+2>=this._barSpace&&--t,this._gapBarSpace=Math.max(1,t)},n.prototype._adjustVisibleRange=function(){var e,t,i=this._dataList.length,r=this._totalBarSpace/this._barSpace,o=0,a=0;this._scrollLimitRole==="distance"?(o=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,a=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(o=this._minVisibleBarCount.left,a=this._minVisibleBarCount.right),o=Math.max(0,o),a=Math.max(0,a);var s=r-Math.min(o,i);this._lastBarRightSideDiffBarCount>s&&(this._lastBarRightSideDiffBarCount=s);var l=-i+Math.min(a,i);this._lastBarRightSideDiffBarCount<l&&(this._lastBarRightSideDiffBarCount=l);var u=Math.round(this._lastBarRightSideDiffBarCount+i+.5),c=u;u>i&&(u=i);var h=Math.round(u-r)-1;h<0&&(h=0);var p=this._lastBarRightSideDiffBarCount>0?Math.round(i+this._lastBarRightSideDiffBarCount-r)-1:h;this._visibleRange={from:h,to:u,realFrom:p,realTo:c},this.executeAction("onVisibleRangeChange",this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var d=p;d<c;d++){var g=this._dataList[d],v=this.dataIndexToCoordinate(d);this._visibleRangeDataList.push({dataIndex:d,x:v,data:{prev:(e=this._dataList[d-1])!==null&&e!==void 0?e:g,current:g,next:(t=this._dataList[d+1])!==null&&t!==void 0?t:g}}),E(g)&&(this._visibleRangeHighLowPrice[0].price<g.high&&(this._visibleRangeHighLowPrice[0].price=g.high,this._visibleRangeHighLowPrice[0].x=v),this._visibleRangeHighLowPrice[1].price>g.low&&(this._visibleRangeHighLowPrice[1].price=g.low,this._visibleRangeHighLowPrice[1].x=v))}h===0?this._dataLoadMore.forward&&this._processDataLoad("forward"):u===i&&this._dataLoadMore.backward&&this._processDataLoad("backward")},n.prototype._processDataLoad=function(e){var t,i,r,o,a=this;if(!this._loading&&E(this._dataLoader)&&E(this._symbol)&&E(this._period)){this._loading=!0;var s={type:e,symbol:this._symbol,period:this._period,timestamp:null,callback:function(l,u){var c,h;a._loading=!1,a._addData(l,e,u),e==="init"&&((h=(c=a._dataLoader)===null||c===void 0?void 0:c.subscribeBar)===null||h===void 0||h.call(c,{symbol:a._symbol,period:a._period,callback:function(p){a._addData(p,"update")}}))}};switch(e){case"backward":s.timestamp=(i=(t=this._dataList[this._dataList.length-1])===null||t===void 0?void 0:t.timestamp)!==null&&i!==void 0?i:null;break;case"forward":s.timestamp=(o=(r=this._dataList[0])===null||r===void 0?void 0:r.timestamp)!==null&&o!==void 0?o:null}this._dataLoader.getBars(s)}},n.prototype._processDataUnsubscribe=function(){var e,t;E(this._dataLoader)&&E(this._symbol)&&E(this._period)&&((t=(e=this._dataLoader).unsubscribeBar)===null||t===void 0||t.call(e,{symbol:this._symbol,period:this._period}))},n.prototype.resetData=function(){this._loading=!1,this._processDataLoad("init")},n.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},n.prototype.setBarSpace=function(e,t){e<$i||e>Ki||this._barSpace===e||(this._barSpace=e,this._calcOptimalBarSpace(),t?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0}))},n.prototype.setTotalBarSpace=function(e){this._totalBarSpace!==e&&(this._totalBarSpace=e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},n.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=this._scrollLimitRole==="distance"?Math.min(this._maxOffsetDistance.right,e):e,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,t!=null&&t&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0})),this},n.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},n.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},n.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},n.prototype.setLastBarRightSideDiffBarCount=function(e){this._lastBarRightSideDiffBarCount=e},n.prototype.setMaxOffsetLeftDistance=function(e){this._scrollLimitRole="distance",this._maxOffsetDistance.left=e},n.prototype.setMaxOffsetRightDistance=function(e){this._scrollLimitRole="distance",this._maxOffsetDistance.right=e},n.prototype.setLeftMinVisibleBarCount=function(e){this._scrollLimitRole="bar_count",this._minVisibleBarCount.left=e},n.prototype.setRightMinVisibleBarCount=function(e){this._scrollLimitRole="bar_count",this._minVisibleBarCount.right=e},n.prototype.getVisibleRange=function(){return this._visibleRange},n.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},n.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0});var r=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);r!==0&&this.executeAction("onScroll",{distance:r})}},n.prototype.getDataByDataIndex=function(e){var t;return(t=this._dataList[e])!==null&&t!==void 0?t:null},n.prototype.coordinateToFloatIndex=function(e){var t=this._dataList.length,i=(this._totalBarSpace-e)/this._barSpace,r=t+this._lastBarRightSideDiffBarCount-i;return Math.round(1e6*r)/1e6},n.prototype.dataIndexToTimestamp=function(e){var t=this._dataList.length;if(t===0)return null;var i=this.getDataByDataIndex(e);if(E(i))return i.timestamp;if(E(this._period)){var r=t-1,o=null,a=0;if(e>r?(o=this._dataList[r].timestamp,a=e-r):e<0&&(o=this._dataList[0].timestamp,a=e),W(o)){var s=this._period,l=s.type,u=s.span;switch(l){case"second":return o+1e3*u*a;case"minute":return o+60*u*1e3*a;case"hour":return o+60*u*60*1e3*a;case"day":return o+24*u*60*60*1e3*a;case"week":return o+7*u*24*60*60*1e3*a;case"month":var c=(p=new Date(o)).getDate();p.setDate(1),p.setMonth(p.getMonth()+u*a);var h=new Date(p.getFullYear(),p.getMonth()+1,0).getDate();return p.setDate(Math.min(c,h)),p.getTime();case"year":var p;return(p=new Date(o)).setFullYear(p.getFullYear()+u*a),p.getTime()}}}return null},n.prototype.timestampToDataIndex=function(e){var t=this._dataList.length;if(t===0)return 0;if(E(this._period)){var i=null,r=0,o=t-1,a=this._dataList[o].timestamp;e>a&&(i=a,r=o);var s=this._dataList[0].timestamp;if(e<s&&(i=s,r=0),W(i)){var l=this._period,u=l.type,c=l.span;switch(u){case"second":return r+Math.floor((e-i)/(1e3*c));case"minute":return r+Math.floor((e-i)/(60*c*1e3));case"hour":return r+Math.floor((e-i)/(60*c*60*1e3));case"day":return r+Math.floor((e-i)/(24*c*60*60*1e3));case"week":return r+Math.floor((e-i)/(7*c*24*60*60*1e3));case"month":var h=new Date(i),p=new Date(e),d=h.getFullYear(),g=p.getFullYear(),v=h.getMonth(),f=p.getMonth();return r+Math.floor((12*(g-d)+(f-v))/c);case"year":return d=new Date(i).getFullYear(),g=new Date(e).getFullYear(),r+Math.floor((g-d)/c)}}}return pe(this._dataList,"timestamp",e)},n.prototype.dataIndexToCoordinate=function(e){var t=this._dataList.length+this._lastBarRightSideDiffBarCount-e;return Math.floor(this._totalBarSpace-(t-.5)*this._barSpace+.5)},n.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},n.prototype.zoom=function(e,t){var i,r=this;if(this._zoomEnabled){var o=t??null;W(o?.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var a=o.x,s=this.coordinateToFloatIndex(a),l=this._barSpace,u=this._barSpace+e*(this._barSpace/10);this.setBarSpace(u,function(){r._lastBarRightSideDiffBarCount+=s-r.coordinateToFloatIndex(a)});var c=this._barSpace/l;c!==1&&this.executeAction("onZoom",{scale:c})}},n.prototype.setZoomEnabled=function(e){this._zoomEnabled=e},n.prototype.isZoomEnabled=function(){return this._zoomEnabled},n.prototype.setScrollEnabled=function(e){this._scrollEnabled=e},n.prototype.isScrollEnabled=function(){return this._scrollEnabled},n.prototype.setCrosshair=function(e,t){var i,r=t??{},o=r.notInvalidate,a=r.notExecuteAction,s=r.forceInvalidate,l=e??{},u=0,c=0;c=W(l.x)?(u=this.coordinateToDataIndex(l.x))<0?0:u>this._dataList.length-1?this._dataList.length-1:u:u=this._dataList.length-1;var h=this._dataList[c],p=this.dataIndexToCoordinate(u),d=this._crosshair.x,g=this._crosshair.y,v=this._crosshair.paneId;this._crosshair=F(F({},l),{realX:p,kLineData:h,realDataIndex:u,dataIndex:c,timestamp:(i=this.dataIndexToTimestamp(u))!==null&&i!==void 0?i:void 0}),(d!==l.x||g!==l.y||v!==l.paneId||s!=null&&s)&&(!E(h)||a!=null&&a||this._chart.crosshairChange(this._crosshair),o!=null&&o||this._chart.updatePane(1))},n.prototype.getCrosshair=function(){return this._crosshair},n.prototype.executeAction=function(e,t){var i;(i=this._actions.get(e))===null||i===void 0||i.execute(t)},n.prototype.subscribeAction=function(e,t){var i;this._actions.has(e)||this._actions.set(e,new Mi),(i=this._actions.get(e))===null||i===void 0||i.subscribe(t)},n.prototype.unsubscribeAction=function(e,t){var i=this._actions.get(e);E(i)&&(i.unsubscribe(t),i.isEmpty()&&this._actions.delete(e))},n.prototype.hasAction=function(e){var t=this._actions.get(e);return E(t)&&!t.isEmpty()},n.prototype._sortIndicators=function(e){var t;G(e)?(t=this._indicators.get(e))===null||t===void 0||t.sort(function(i,r){return i.zLevel-r.zLevel}):this._indicators.forEach(function(i){i.sort(function(r,o){return r.zLevel-o.zLevel})})},n.prototype._addIndicatorCalcTask=function(e,t){var i=this;this._taskScheduler.addTask({id:Re(e.id),handler:function(){var r;(r=e.onDataStateChange)===null||r===void 0||r.call(e,{state:"loading",type:t,indicator:e}),e.calcImp(i._dataList).then(function(o){var a;o&&(i._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:t!=="init"}),(a=e.onDataStateChange)===null||a===void 0||a.call(e,{state:"ready",type:t,indicator:e}))}).catch(function(){var o;(o=e.onDataStateChange)===null||o===void 0||o.call(e,{state:"error",type:t,indicator:e})})}})},n.prototype.addIndicator=function(e,t,i){var r=e.name;if(this.getIndicatorsByFilter(e).length>0)return!1;var o=this.getIndicatorsByPaneId(t),a=new(Ve(r));return this._synchronizeIndicatorSeriesPrecision(a),a.paneId=t,a.override(e),i||(this.removeIndicator({paneId:t}),o=[]),o.push(a),this._indicators.set(t,o),this._sortIndicators(t),this._addIndicatorCalcTask(a,"init"),!0},n.prototype.getIndicatorsByPaneId=function(e){var t;return(t=this._indicators.get(e))!==null&&t!==void 0?t:[]},n.prototype.getIndicatorsByFilter=function(e){var t=e.paneId,i=e.name,r=e.id,o=function(s){return E(r)?s.id===r:!E(i)||s.name===i},a=[];return E(t)?a=a.concat(this.getIndicatorsByPaneId(t).filter(o)):this._indicators.forEach(function(s){a=a.concat(s.filter(o))}),a},n.prototype.removeIndicator=function(e){var t=this,i=!1;return this.getIndicatorsByFilter(e).forEach(function(r){var o=t.getIndicatorsByPaneId(r.paneId),a=o.findIndex(function(s){return s.id===r.id});a>-1&&(t._taskScheduler.removeTask(Re(r.id)),o.splice(a,1),i=!0),o.length===0&&t._indicators.delete(r.paneId)}),i},n.prototype.hasIndicators=function(e){return this._indicators.has(e)},n.prototype._synchronizeIndicatorSeriesPrecision=function(e){if(E(this._symbol)){var t=this._symbol,i=t.pricePrecision,r=i===void 0?2:i,o=t.volumePrecision,a=o===void 0?0:o,s=function(l){switch(l.series){case"price":l.setSeriesPrecision(r);break;case"volume":l.setSeriesPrecision(a)}};E(e)?s(e):this._indicators.forEach(function(l){l.forEach(function(u){s(u)})})}},n.prototype.overrideIndicator=function(e){var t=this,i=!1,r=!1;return this.getIndicatorsByFilter(e).forEach(function(o){o.override(e);var a=o.shouldUpdateImp(),s=a.calc,l=a.draw;a.sort&&(r=!0),s?t._addIndicatorCalcTask(o,"update"):l&&(i=!0)}),r&&this._sortIndicators(),!!i&&(this._chart.layout({update:!0}),!0)},n.prototype.getOverlaysByFilter=function(e){var t,i=e.id,r=e.groupId,o=e.paneId,a=e.name,s=function(c){return E(i)?c.id===i:E(r)?c.groupId===r&&(!E(a)||c.name===a):!E(a)||c.name===a},l=[];E(o)?l=l.concat(this.getOverlaysByPaneId(o).filter(s)):this._overlays.forEach(function(c){l=l.concat(c.filter(s))});var u=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay;return E(u)&&s(u)&&l.push(u),l},n.prototype.getOverlaysByPaneId=function(e){var t;if(!G(e)){var i=[];return this._overlays.forEach(function(r){i=i.concat(r)}),i}return(t=this._overlays.get(e))!==null&&t!==void 0?t:[]},n.prototype._sortOverlays=function(e){var t;G(e)?(t=this._overlays.get(e))===null||t===void 0||t.sort(function(i,r){return i.zLevel-r.zLevel}):this._overlays.forEach(function(i){i.sort(function(r,o){return r.zLevel-o.zLevel})})},n.prototype.addOverlays=function(e,t){var i=this,r=[],o=e.map(function(a,s){var l,u,c,h,p,d,g,v;if(E(a.id)){var f=null;try{for(var x=mt(i._overlays),_=x.next();!_.done;_=x.next())if(E(w=_.value[1].find(function(T){return T.id===a.id}))){f=w;break}}catch(T){l={error:T}}finally{try{_&&!_.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}if(E(f))return a.id}var m=Qi(a.name);if(E(m)){var b=(c=a.id)!==null&&c!==void 0?c:ie("overlay_"),w=new m,C=(h=a.paneId)!==null&&h!==void 0?h:at;a.id=b,(p=a.groupId)!==null&&p!==void 0||(a.groupId=b);var y=i.getOverlaysByPaneId(C).length;return(d=a.zLevel)!==null&&d!==void 0||(a.zLevel=y),w.override(a),r.includes(C)||r.push(C),w.isDrawing()?i._progressOverlayInfo={paneId:C,overlay:w,appointPaneFlag:t[s]}:(i._overlays.has(C)||i._overlays.set(C,[]),(g=i._overlays.get(C))===null||g===void 0||g.push(w)),w.isStart()&&((v=w.onDrawStart)===null||v===void 0||v.call(w,{overlay:w,chart:i._chart})),b}return null});return r.length>0&&(this._sortOverlays(),r.forEach(function(a){i._chart.updatePane(1,a)}),this._chart.updatePane(1,et)),o},n.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},n.prototype.progressOverlayComplete=function(){var e;if(this._progressOverlayInfo!==null){var t=this._progressOverlayInfo,i=t.overlay,r=t.paneId;i.isDrawing()||(this._overlays.has(r)||this._overlays.set(r,[]),(e=this._overlays.get(r))===null||e===void 0||e.push(i),this._sortOverlays(r),this._progressOverlayInfo=null)}},n.prototype.updateProgressOverlayInfo=function(e,t){this._progressOverlayInfo!==null&&(Xt(t)&&t&&(this._progressOverlayInfo.appointPaneFlag=t),this._progressOverlayInfo.paneId=e,this._progressOverlayInfo.overlay.override({paneId:e}))},n.prototype.overrideOverlay=function(e){var t=this,i=!1,r=[];return this.getOverlaysByFilter(e).forEach(function(o){o.override(e);var a=o.shouldUpdate(),s=a.sort,l=a.draw;s&&(i=!0),(s||l)&&(r.includes(o.paneId)||r.push(o.paneId))}),i&&this._sortOverlays(),r.length>0&&(r.forEach(function(o){t._chart.updatePane(1,o)}),this._chart.updatePane(1,et),!0)},n.prototype.removeOverlay=function(e){var t=this,i=[];return this.getOverlaysByFilter(e).forEach(function(r){var o,a=r.paneId,s=t.getOverlaysByPaneId(r.paneId);if((o=r.onRemoved)===null||o===void 0||o.call(r,{overlay:r,chart:t._chart}),i.includes(a)||i.push(a),r.isDrawing())t._progressOverlayInfo=null;else{var l=s.findIndex(function(u){return u.id===r.id});l>-1&&s.splice(l,1)}s.length===0&&t._overlays.delete(a)}),i.length>0&&(i.forEach(function(r){t._chart.updatePane(1,r)}),this._chart.updatePane(1,et),!0)},n.prototype.setPressedOverlayInfo=function(e){this._pressedOverlayInfo=e},n.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},n.prototype.setHoverOverlayInfo=function(e,t,i){var r=this._hoverOverlayInfo,o=r.overlay,a=r.figureType,s=r.figureIndex,l=r.figure,u=e.overlay;if((o?.id!==u?.id||a!==e.figureType||s!==e.figureIndex)&&(this._hoverOverlayInfo=e,o?.id!==u?.id)){var c=!1,h=!1;o!==null&&(o.override({zLevel:o.getPrevZLevel()}),h=!0,i(o,l)&&(c=!0)),u!==null&&(u.setPrevZLevel(u.zLevel),u.override({zLevel:Number.MAX_SAFE_INTEGER}),h=!0,t(u,e.figure)&&(c=!0)),h&&this._sortOverlays(),c||this._chart.updatePane(1)}},n.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},n.prototype.setClickOverlayInfo=function(e,t,i){var r=this._clickOverlayInfo,o=r.paneId,a=r.overlay,s=r.figureType,l=r.figure,u=r.figureIndex,c=e.overlay;a?.id===c?.id&&s===e.figureType&&u===e.figureIndex||(this._clickOverlayInfo=e,a?.id!==c?.id&&(E(a)&&i(a,l),E(c)&&t(c,e.figure),this._chart.updatePane(1,e.paneId),o!==e.paneId&&this._chart.updatePane(1,o),this._chart.updatePane(1,et)))},n.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},n.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},n.prototype.isOverlayDrawing=function(){var e,t;return(t=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay.isDrawing())!==null&&t!==void 0&&t},n.prototype._clearLastPriceMarkExtendTextUpdateTimer=function(){this._lastPriceMarkExtendTextUpdateTimers.forEach(function(e){clearInterval(e)}),this._lastPriceMarkExtendTextUpdateTimers=[]},n.prototype._clearData=function(){this._dataLoadMore.backward=!1,this._dataLoadMore.forward=!1,this._loading=!1,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._crosshair={}},n.prototype.getChart=function(){return this._chart},n.prototype.destroy=function(){this._clearData(),this._clearLastPriceMarkExtendTextUpdateTimer(),this._taskScheduler.removeTask(),this._overlays.clear(),this._indicators.clear(),this._actions.clear()},n}(),lt="main",Pt="xAxis",bt="yAxis",qt="separator",Ze=function(){function n(e,t){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=zt,this._mediaQueryListener=function(){var r=At(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*r),i._nextPixelHeight=Math.round(i._element.clientHeight*r),i._resetPixelRatio()},this._listener=t,this._element=Tt("canvas",e),this._ctx=this._element.getContext("2d"),function(){return Ie(this,void 0,void 0,function(){return Me(this,function(r){switch(r.label){case 0:return[4,new Promise(function(o){var a=new ResizeObserver(function(s){o(s.every(function(l){return"devicePixelContentBoxSize"in l})),a.disconnect()});a.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,r.sent()]}})})}().then(function(r){i._supportedDevicePixelContentBox=r,r?(i._resizeObserver=new ResizeObserver(function(o){var a=o.find(function(l){return l.target===i._element}),s=a?.devicePixelContentBoxSize[0];E(s)&&(i._nextPixelWidth=s.inlineSize,i._nextPixelHeight=s.blockSize,i._pixelWidth===i._nextPixelWidth&&i._pixelHeight===i._nextPixelHeight||i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(At(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(r){return!1})}return n.prototype._resetPixelRatio=function(){var e=this;this._executeListener(function(){var t=e._element.clientWidth,i=e._element.clientHeight;e._width=t,e._height=i,e._pixelWidth=e._nextPixelWidth,e._pixelHeight=e._nextPixelHeight,e._element.width=e._nextPixelWidth,e._element.height=e._nextPixelHeight;var r=e._nextPixelWidth/t,o=e._nextPixelHeight/i;e._ctx.scale(r,o)})},n.prototype._executeListener=function(e){var t=this;this._requestAnimationId===zt&&(this._requestAnimationId=ee(function(){t._ctx.clearRect(0,0,t._width,t._height),e?.(),t._listener(),t._requestAnimationId=zt}))},n.prototype.update=function(e,t){if(this._width!==e||this._height!==t){if(this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px"),!this._supportedDevicePixelContentBox){var i=At(this._element);this._nextPixelWidth=Math.round(e*i),this._nextPixelHeight=Math.round(t*i),this._resetPixelRatio()}}else this._executeListener()},n.prototype.getElement=function(){return this._element},n.prototype.getContext=function(){return this._ctx},n.prototype.destroy=function(){E(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),E(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},n}(),qe=function(n){function e(t,i){var r=n.call(this)||this;return r._bounding=te(),r._cursor="crosshair",r._forceCursor=null,r._pane=i,r._rootContainer=t,r._container=r.createContainer(),t.appendChild(r._container),r}return Y(e,n),e.prototype.setBounding=function(t){return Q(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.checkEventOn=function(t){return!0},e.prototype.setCursor=function(t){G(this._forceCursor)||t!==this._cursor&&(this._cursor=t,this._container.style.cursor=this._cursor)},e.prototype.setForceCursor=function(t){var i;t!==this._forceCursor&&(this._forceCursor=t,this._container.style.cursor=(i=this._forceCursor)!==null&&i!==void 0?i:this._cursor)},e.prototype.getForceCursor=function(){return this._forceCursor},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(ve),me=function(n){function e(t,i){var r=n.call(this,t,i)||this;r._mainCanvas=new Ze({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){r.updateMain(r._mainCanvas.getContext())}),r._overlayCanvas=new Ze({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){r.updateOverlay(r._overlayCanvas.getContext())});var o=r.getContainer();return o.appendChild(r._mainCanvas.getElement()),o.appendChild(r._overlayCanvas.getElement()),r}return Y(e,n),e.prototype.createContainer=function(){return Tt("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,i,r){var o=i.width,a=i.height,s=i.left;t.style.left="".concat(s,"px");var l=r,u=t.clientWidth,c=t.clientHeight;switch(o===u&&a===c||(t.style.width="".concat(o,"px"),t.style.height="".concat(a,"px"),l=3),l){case 0:this._mainCanvas.update(o,a);break;case 1:this._overlayCanvas.update(o,a);break;case 3:case 4:this._mainCanvas.update(o,a),this._overlayCanvas.update(o,a)}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),r=i.width,o=i.height,a=Tt("canvas",{width:"".concat(r,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=At(a);return a.width=r*l,a.height=o*l,s.scale(l,l),s.drawImage(this._mainCanvas.getElement(),0,0,r,o),t&&s.drawImage(this._overlayCanvas.getElement(),0,0,r,o),a},e}(qe);function je(n,e){var t,i,r=[];r=r.concat(e);try{for(var o=mt(r),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.y,c=s.r,h=n.x-l,p=n.y-u;if(!(h*h+p*p>c*c))return!0}}catch(d){t={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var er={name:"circle",checkEventOn:je,draw:function(n,e,t){(function(i,r,o){var a=[];a=a.concat(r);var s=o.style,l=s===void 0?"fill":s,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,g=d===void 0?"currentColor":d,v=o.borderStyle,f=v===void 0?"solid":v,x=o.borderDashedValue,_=x===void 0?[2,2]:x,m=!(l!=="fill"&&o.style!=="stroke_fill"||G(c)&&Nt(c));m&&(i.fillStyle=c,a.forEach(function(b){var w=b.x,C=b.y,y=b.r;i.beginPath(),i.arc(w,C,y,0,2*Math.PI),i.closePath(),i.fill()})),(l==="stroke"||o.style==="stroke_fill")&&p>0&&!Nt(g)&&(i.strokeStyle=g,i.lineWidth=p,f==="dashed"?i.setLineDash(_):i.setLineDash([]),a.forEach(function(b){var w=b.x,C=b.y,y=b.r;(!m||y>p)&&(i.beginPath(),i.arc(w,C,y,0,2*Math.PI),i.closePath(),i.stroke())}))})(n,e,t)}};function Qe(n,e){var t,i,r=[];r=r.concat(e);try{for(var o=mt(r),a=o.next();!a.done;a=o.next()){for(var s=a.value,l=!1,u=s.coordinates,c=0,h=u.length-1;c<u.length;h=c++)u[c].y>n.y!=u[h].y>n.y&&n.x<(u[h].x-u[c].x)*(n.y-u[c].y)/(u[h].y-u[c].y)+u[c].x&&(l=!l);if(l)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var ir={name:"polygon",checkEventOn:Qe,draw:function(n,e,t){(function(i,r,o){var a=[];a=a.concat(r);var s=o.style,l=s===void 0?"fill":s,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,g=d===void 0?"currentColor":d,v=o.borderStyle,f=v===void 0?"solid":v,x=o.borderDashedValue,_=x===void 0?[2,2]:x;l!=="fill"&&o.style!=="stroke_fill"||G(c)&&Nt(c)||(i.fillStyle=c,a.forEach(function(m){var b=m.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var w=1;w<b.length;w++)i.lineTo(b[w].x,b[w].y);i.closePath(),i.fill()})),(l==="stroke"||o.style==="stroke_fill")&&p>0&&!Nt(g)&&(i.strokeStyle=g,i.lineWidth=p,f==="dashed"?i.setLineDash(_):i.setLineDash([]),a.forEach(function(m){var b=m.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var w=1;w<b.length;w++)i.lineTo(b[w].x,b[w].y);i.closePath(),i.stroke()}))})(n,e,t)}};function ye(n,e){var t,i,r=[];r=r.concat(e);try{for(var o=mt(r),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.width;u<4&&(l-=2,u=4);var c=s.y,h=s.height;if(h<4&&(c-=2,h=4),n.x>=l&&n.x<=l+u&&n.y>=c&&n.y<=c+h)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function Je(n,e,t){var i,r=[];r=r.concat(e);var o=t.style,a=o===void 0?"fill":o,s=t.color,l=s===void 0?"transparent":s,u=t.borderSize,c=u===void 0?1:u,h=t.borderColor,p=h===void 0?"transparent":h,d=t.borderStyle,g=d===void 0?"solid":d,v=t.borderRadius,f=v===void 0?0:v,x=t.borderDashedValue,_=x===void 0?[2,2]:x,m=(i=n.roundRect)!==null&&i!==void 0?i:n.rect,b=!(a!=="fill"&&t.style!=="stroke_fill"||G(l)&&Nt(l));if(b&&(n.fillStyle=l,r.forEach(function(y){var T=y.x,P=y.y,S=y.width,A=y.height;n.beginPath(),m.call(n,T,P,S,A,f),n.closePath(),n.fill()})),(a==="stroke"||t.style==="stroke_fill")&&c>0&&!Nt(p)){n.strokeStyle=p,n.fillStyle=p,n.lineWidth=c,g==="dashed"?n.setLineDash(_):n.setLineDash([]);var w=c%2==1?.5:0,C=Math.round(2*w);r.forEach(function(y){var T=y.x,P=y.y,S=y.width,A=y.height;S>2*c&&A>2*c?(n.beginPath(),m.call(n,T+w,P+w,S-C,A-C,f),n.closePath(),n.stroke()):b||n.fillRect(T,P,S,A)})}}var rr={name:"rect",checkEventOn:ye,draw:function(n,e,t){Je(n,e,t)}};function $e(n,e){var t=e.size,i=t===void 0?12:t,r=e.paddingLeft,o=r===void 0?0:r,a=e.paddingTop,s=a===void 0?0:a,l=e.paddingRight,u=l===void 0?0:l,c=e.paddingBottom,h=c===void 0?0:c,p=e.weight,d=p===void 0?"normal":p,g=e.family,v=n.x,f=n.y,x=n.text,_=n.align,m=_===void 0?"left":_,b=n.baseline,w=b===void 0?"top":b,C=n.width,y=n.height,T=C??o+ft(x,i,d,g)+u,P=y??s+i+h,S=0;switch(m){case"left":case"start":S=v;break;case"right":case"end":S=v-T;break;default:S=v-T/2}var A=0;switch(w){case"top":case"hanging":A=f;break;case"bottom":case"ideographic":case"alphabetic":A=f-P;break;default:A=f-P/2}return{x:S,y:A,width:T,height:P}}function Ke(n,e,t){var i,r,o=[];o=o.concat(e);try{for(var a=mt(o),s=a.next();!s.done;s=a.next()){var l=$e(s.value,t),u=l.x,c=l.y,h=l.width,p=l.height;if(n.x>=u&&n.x<=u+h&&n.y>=c&&n.y<=c+p)return!0}}catch(d){i={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return!1}var nr={name:"text",checkEventOn:Ke,draw:function(n,e,t){(function(i,r,o){var a=[];a=a.concat(r);var s=o.color,l=s===void 0?"currentColor":s,u=o.size,c=u===void 0?12:u,h=o.family,p=o.weight,d=o.paddingLeft,g=d===void 0?0:d,v=o.paddingTop,f=v===void 0?0:v,x=o.paddingRight,_=x===void 0?0:x,m=a.map(function(b){return $e(b,o)});Je(i,m,F(F({},o),{color:o.backgroundColor})),i.textAlign="left",i.textBaseline="top",i.font=Ot(c,p,h),i.fillStyle=l,a.forEach(function(b,w){var C=m[w];i.fillText(b.text,C.x+g,C.y+f,C.width-g-_)})})(n,e,t)}};function ti(n,e){var t,i,r,o,a,s,l=[];l=l.concat(e);try{for(var u=mt(l),c=u.next();!c.done;c=u.next()){var h=c.value;if(Math.abs((o=h,a=void 0,s=void 0,a=(r=n).x-o.x,s=r.y-o.y,Math.sqrt(a*a+s*s)-h.r))<2){var p=h.r,d=h.startAngle,g=h.endAngle,v=p*Math.cos(d)+h.x,f=p*Math.sin(d)+h.y,x=p*Math.cos(g)+h.x,_=p*Math.sin(g)+h.y;if(n.x<=Math.max(v,x)+2&&n.x>=Math.min(v,x)-2&&n.y<=Math.max(f,_)+2&&n.y>=Math.min(f,_)-2)return!0}}}catch(m){t={error:m}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return!1}var or={name:"arc",checkEventOn:ti,draw:function(n,e,t){(function(i,r,o){var a=[];a=a.concat(r);var s=o.style,l=s===void 0?"solid":s,u=o.size,c=u===void 0?1:u,h=o.color,p=h===void 0?"currentColor":h,d=o.dashedValue,g=d===void 0?[2,2]:d;i.lineWidth=c,i.strokeStyle=p,l==="dashed"?i.setLineDash(g):i.setLineDash([]),a.forEach(function(v){var f=v.x,x=v.y,_=v.r,m=v.startAngle,b=v.endAngle;i.beginPath(),i.arc(f,x,_,m,b),i.stroke(),i.closePath()})})(n,e,t)}};function ei(n,e,t,i,r,o,a){var s=Gt(i,7),l=s[0],u=s[1],c=s[2],h=s[3],p=s[4],d=s[5],g=s[6],v=function(f,x,_,m,b,w,C,y,T){for(var P=function(D,O,z,N,it,$,H,X,Z){var U=it*Math.PI/180,q=(D-X)/2,j=(O-Z)/2,K=Math.cos(U)*q+Math.sin(U)*j,J=-Math.sin(U)*q+Math.cos(U)*j,tt=Math.pow(K,2)/Math.pow(z,2)+Math.pow(J,2)/Math.pow(N,2);tt>1&&(z*=Math.sqrt(tt),N*=Math.sqrt(tt));var ut=$===H?-1:1,ht=Math.pow(z,2)*Math.pow(N,2)-Math.pow(z,2)*Math.pow(J,2)-Math.pow(N,2)*Math.pow(K,2),It=Math.pow(z,2)*Math.pow(J,2)+Math.pow(N,2)*Math.pow(K,2),ct=ut*Math.sqrt(Math.abs(ht/It))*(z*J/N),pt=ut*Math.sqrt(Math.abs(ht/It))*(-N*K/z),Bt=Math.cos(U)*ct-Math.sin(U)*pt+(D+X)/2,Mt=Math.sin(U)*ct+Math.cos(U)*pt+(O+Z)/2,Rt=Math.atan2((J-pt)/N,(K-ct)/z),wt=Math.atan2((-J-pt)/N,(-K-ct)/z)-Rt;return wt<0&&H===1?wt+=2*Math.PI:wt>0&&H===0&&(wt-=2*Math.PI),{cx:Bt,cy:Mt,startAngle:Rt,deltaAngle:wt}}(f,x,_,m,b,w,C,y,T),S=P.cx,A=P.cy,L=P.startAngle,M=P.deltaAngle,B=[],R=Math.ceil(Math.abs(M)/(Math.PI/2)),k=0;k<R;k++){var I=ar(S,A,_,m,b,L+k*M/R,L+(k+1)*M/R);B.push(I)}return B}(e,t,l,u,c,h,p,a?e+d:d+r,a?t+g:g+o);v.forEach(function(f){n.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])})}function ar(n,e,t,i,r,o,a){var s=Math.sin(a-o)*(Math.sqrt(4+3*Math.pow(Math.tan((a-o)/2),2))-1)/3,l=Math.cos(r),u=Math.sin(r),c=n+t*Math.cos(o)*l-i*Math.sin(o)*u,h=e+t*Math.cos(o)*u+i*Math.sin(o)*l,p=n+t*Math.cos(a)*l-i*Math.sin(a)*u,d=e+t*Math.cos(a)*u+i*Math.sin(a)*l;return[c+s*(-t*Math.sin(o)*l-i*Math.cos(o)*u),h+s*(-t*Math.sin(o)*u+i*Math.cos(o)*l),p-s*(-t*Math.sin(a)*l-i*Math.cos(a)*u),d-s*(-t*Math.sin(a)*u+i*Math.cos(a)*l),p,d]}var sr={name:"path",checkEventOn:ye,draw:function(n,e,t){(function(i,r,o){var a=[];a=a.concat(r);var s=o.lineWidth,l=s===void 0?1:s,u=o.color,c=u===void 0?"currentColor":u;i.lineWidth=l,i.strokeStyle=c,i.setLineDash([]),a.forEach(function(h){var p=h.x,d=h.y,g=h.path.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(E(g)){var v=p,f=d;i.beginPath(),g.forEach(function(x){var _=0,m=0,b=0,w=0,C=x[0],y=x.slice(1).trim().split(/[\s,]+/).map(Number);switch(C){case"M":_=y[0]+v,m=y[1]+f,i.moveTo(_,m),b=_,w=m;break;case"m":_+=y[0],m+=y[1],i.moveTo(_,m),b=_,w=m;break;case"L":_=y[0]+v,m=y[1]+f,i.lineTo(_,m);break;case"l":_+=y[0],m+=y[1],i.lineTo(_,m);break;case"H":_=y[0]+v,i.lineTo(_,m);break;case"h":_+=y[0],i.lineTo(_,m);break;case"V":m=y[0]+f,i.lineTo(_,m);break;case"v":m+=y[0],i.lineTo(_,m);break;case"C":i.bezierCurveTo(y[0]+v,y[1]+f,y[2]+v,y[3]+f,y[4]+v,y[5]+f),_=y[4]+v,m=y[5]+f;break;case"c":i.bezierCurveTo(_+y[0],m+y[1],_+y[2],m+y[3],_+y[4],m+y[5]),_+=y[4],m+=y[5];break;case"S":i.bezierCurveTo(_,m,y[0]+v,y[1]+f,y[2]+v,y[3]+f),_=y[2]+v,m=y[3]+f;break;case"s":i.bezierCurveTo(_,m,_+y[0],m+y[1],_+y[2],m+y[3]),_+=y[2],m+=y[3];break;case"Q":i.quadraticCurveTo(y[0]+v,y[1]+f,y[2]+v,y[3]+f),_=y[2]+v,m=y[3]+f;break;case"q":i.quadraticCurveTo(_+y[0],m+y[1],_+y[2],m+y[3]),_+=y[2],m+=y[3];break;case"T":i.quadraticCurveTo(_,m,y[0]+v,y[1]+f),_=y[0]+v,m=y[1]+f;break;case"t":i.quadraticCurveTo(_,m,_+y[0],m+y[1]),_+=y[0],m+=y[1];break;case"A":ei(i,_,m,y,v,f,!1),_=y[5]+v,m=y[6]+f;break;case"a":ei(i,_,m,y,v,f,!0),_+=y[5],m+=y[6];break;case"Z":case"z":i.closePath(),_=b,m=w}}),o.style==="fill"?i.fill():i.stroke()}})})(n,e,t)}},jt={};[er,Ui,ir,rr,nr,or,sr].forEach(function(n){jt[n.name]=Ne.extend(n)});var dt=function(n){function e(t){var i=n.call(this)||this;return i._widget=t,i}return Y(e,n),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,i){var r,o,a=(r=t.name,(o=jt[r])!==null&&o!==void 0?o:null);if(a!==null){var s=new a(t);if(E(i)){for(var l in i)i.hasOwnProperty(l)&&s.registerEvent(l,i[l]);this.addChild(s)}return s}return null},e.prototype.draw=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];this.clear(),this.drawImp(t,i)},e.prototype.checkEventOn=function(t){return!0},e}(ve),lr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i,r,o=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=o.getBounding(),u=s.getStyles().grid;if(u.show){t.save(),t.globalCompositeOperation="destination-over";var c=u.horizontal;if(c.show){var h=a.getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:0,y:d.coord},{x:l.width,y:d.coord}]}});(i=this.createFigure({name:"line",attrs:h,styles:c}))===null||i===void 0||i.draw(t)}var p=u.vertical;p.show&&(h=s.getXAxisPane().getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:d.coord,y:0},{x:d.coord,y:l.height}]}}),(r=this.createFigure({name:"line",attrs:h,styles:p}))===null||r===void 0||r.draw(t)),t.restore()}},e}(dt),ii=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.eachChildren=function(t){for(var i=this.getWidget().getPane().getChart().getChartStore(),r=i.getVisibleRangeDataList(),o=i.getBarSpace(),a=r.length,s=0;s<a;)t(r[s],o,s),++s},e}(dt),ri=function(n){function e(){var t=n.apply(this,Kt([],Gt(arguments),!1))||this;return t._boundCandleBarClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction("onCandleBarClick",i),!1}},t}return Y(e,n),e.prototype.drawImp=function(t){var i=this,r=this.getWidget().getPane(),o=r.getId()===at,a=r.getChart().getChartStore(),s=this.getCandleBarOptions();if(s!==null){var l=s.type,u=s.styles,c=0,h=0;if(s.type==="ohlc"){var p=a.getBarSpace().gapBar;(c=Math.min(Math.max(Math.round(.2*p),1),8))>2&&c%2==1&&c--,h=Math.floor(c/2)}var d=r.getAxisComponent();this.eachChildren(function(g,v){var f,x=g.x,_=g.data,m=_.current,b=_.prev;if(E(m)){var w=m.open,C=m.high,y=m.low,T=m.close,P=u.compareRule==="current_open"?w:(f=b?.close)!==null&&f!==void 0?f:T,S=[];T>P?(S[0]=u.upColor,S[1]=u.upBorderColor,S[2]=u.upWickColor):T<P?(S[0]=u.downColor,S[1]=u.downBorderColor,S[2]=u.downWickColor):(S[0]=u.noChangeColor,S[1]=u.noChangeBorderColor,S[2]=u.noChangeWickColor);var A=d.convertToPixel(w),L=d.convertToPixel(T),M=[A,L,d.convertToPixel(C),d.convertToPixel(y)];M.sort(function(k,I){return k-I});var B=v.gapBar%2==0?1:0,R=[];switch(l){case"candle_solid":R=i._createSolidBar(x,M,v,S,B);break;case"candle_stroke":R=i._createStrokeBar(x,M,v,S,B);break;case"candle_up_stroke":R=T>w?i._createStrokeBar(x,M,v,S,B):i._createSolidBar(x,M,v,S,B);break;case"candle_down_stroke":R=w>T?i._createStrokeBar(x,M,v,S,B):i._createSolidBar(x,M,v,S,B);break;case"ohlc":R=[{name:"rect",attrs:[{x:x-h,y:M[0],width:c,height:M[3]-M[0]},{x:x-v.halfGapBar,y:A+c>M[3]?M[3]-c:A,width:v.halfGapBar-h,height:c},{x:x+h,y:L+c>M[3]?M[3]-c:L,width:v.halfGapBar-h,height:c}],styles:{color:S[0]}}]}R.forEach(function(k){var I,D=null;o&&(D={mouseClickEvent:i._boundCandleBarClickEvent(g)}),(I=i.createFigure(k,D??void 0))===null||I===void 0||I.draw(t)})}})}},e.prototype.getCandleBarOptions=function(){var t=this.getWidget().getPane().getChart().getStyles().candle;return{type:t.type,styles:t.bar}},e.prototype._createSolidBar=function(t,i,r,o,a){return[{name:"rect",attrs:{x:t,y:i[0],width:1,height:i[3]-i[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:t-r.halfGapBar,y:i[1],width:r.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:"stroke_fill",color:o[0],borderColor:o[1]}}]},e.prototype._createStrokeBar=function(t,i,r,o,a){return[{name:"rect",attrs:[{x:t,y:i[0],width:1,height:i[1]-i[0]},{x:t,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:t-r.halfGapBar,y:i[1],width:r.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:"stroke",borderColor:o[1]}}]},e}(ii),ur=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.getCandleBarOptions=function(){var t,i,r=this.getWidget().getPane();if(!r.getAxisComponent().isInCandle()){var o=r.getChart().getChartStore(),a=o.getIndicatorsByPaneId(r.getId());try{for(var s=mt(a),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.shouldOhlc&&u.visible){var c=u.styles,h=o.getStyles().indicator,p=nt(c,"ohlc.compareRule",h.ohlc.compareRule),d=nt(c,"ohlc.upColor",h.ohlc.upColor),g=nt(c,"ohlc.downColor",h.ohlc.downColor),v=nt(c,"ohlc.noChangeColor",h.ohlc.noChangeColor);return{type:"ohlc",styles:{compareRule:p,upColor:d,downColor:g,noChangeColor:v,upBorderColor:d,downBorderColor:g,noChangeBorderColor:v,upWickColor:d,downWickColor:g,noChangeWickColor:v}}}}}catch(f){t={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}}return null},e.prototype.drawImp=function(t){var i=this;n.prototype.drawImp.call(this,t);var r=this.getWidget(),o=r.getPane(),a=o.getChart(),s=r.getBounding(),l=a.getXAxisPane().getAxisComponent(),u=o.getAxisComponent(),c=a.getChartStore(),h=c.getIndicatorsByPaneId(o.getId()),p=c.getStyles().indicator;t.save(),h.forEach(function(d){if(d.visible){d.zLevel<0?t.globalCompositeOperation="destination-over":t.globalCompositeOperation="source-over";var g=!1;if(d.draw!==null&&(t.save(),g=d.draw({ctx:t,chart:a,indicator:d,bounding:s,xAxis:l,yAxis:u}),t.restore()),!g){var v=d.result,f=[];i.eachChildren(function(x,_){var m,b,w,C=_.halfGapBar,y=x.dataIndex,T=x.x,P=l.convertToPixel(y-1),S=l.convertToPixel(y+1),A=(m=v[y-1])!==null&&m!==void 0?m:null,L=(b=v[y])!==null&&b!==void 0?b:null,M=(w=v[y+1])!==null&&w!==void 0?w:null,B={x:P},R={x:T},k={x:S};d.figures.forEach(function(I){var D=I.key,O=A?.[D];W(O)&&(B[D]=u.convertToPixel(O));var z=L?.[D];W(z)&&(R[D]=u.convertToPixel(z));var N=M?.[D];W(N)&&(k[D]=u.convertToPixel(N))}),ge(d,y,p,function(I,D,O){var z,N,it;if(E(L?.[I.key])){var $=R[I.key],H=(z=I.attrs)===null||z===void 0?void 0:z.call(I,{data:{prev:A,current:L,next:M},coordinate:{prev:B,current:R,next:k},bounding:s,barSpace:_,xAxis:l,yAxis:u});if(!E(H))switch(I.type){case"circle":H={x:T,y:$,r:Math.max(1,C)};break;case"rect":case"bar":var X=(N=I.baseValue)!==null&&N!==void 0?N:u.getRange().from,Z=u.convertToPixel(X),U=Math.abs(Z-$);X!==L?.[I.key]&&(U=Math.max(1,U)),H={x:T-C,y:$>Z?Z:$,width:Math.max(1,2*C),height:U};break;case"line":E(f[O])||(f[O]=[]),W(R[I.key])&&W(k[I.key])&&f[O].push({coordinates:[{x:R.x,y:R[I.key]},{x:k.x,y:k[I.key]}],styles:D})}var q=I.type;E(H)&&q!=="line"&&((it=i.createFigure({name:q==="bar"?"rect":q,attrs:H,styles:D}))===null||it===void 0||it.draw(t))}})}),f.forEach(function(x){var _,m,b,w;if(x.length>1){for(var C=[{coordinates:[x[0].coordinates[0],x[0].coordinates[1]],styles:x[0].styles}],y=1;y<x.length;y++){var T=C[C.length-1],P=x[y],S=T.coordinates[T.coordinates.length-1];S.x===P.coordinates[0].x&&S.y===P.coordinates[0].y&&T.styles.style===P.styles.style&&T.styles.color===P.styles.color&&T.styles.size===P.styles.size&&T.styles.smooth===P.styles.smooth&&((_=T.styles.dashedValue)===null||_===void 0?void 0:_[0])===((m=P.styles.dashedValue)===null||m===void 0?void 0:m[0])&&((b=T.styles.dashedValue)===null||b===void 0?void 0:b[1])===((w=P.styles.dashedValue)===null||w===void 0?void 0:w[1])?T.coordinates.push(P.coordinates[1]):C.push({coordinates:[P.coordinates[0],P.coordinates[1]],styles:P.styles})}C.forEach(function(A){var L,M=A.coordinates,B=A.styles;(L=i.createFigure({name:"line",attrs:{coordinates:M},styles:B}))===null||L===void 0||L.draw(t)})}})}}}),t.restore()},e}(ri),cr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i=this.getWidget(),r=i.getPane(),o=i.getBounding(),a=i.getPane().getChart().getChartStore(),s=a.getCrosshair(),l=a.getStyles().crosshair;if(G(s.paneId)&&l.show){if(s.paneId===r.getId()){var u=s.y;this._drawLine(t,[{x:0,y:u},{x:o.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:o.height}],l.vertical)}},e.prototype._drawLine=function(t,i,r){var o;if(r.show){var a=r.line;a.show&&((o=this.createFigure({name:"line",attrs:{coordinates:i},styles:a}))===null||o===void 0||o.draw(t))}},e}(dt),ni=function(n){function e(t){var i=n.call(this,t)||this;return i._activeFeatureInfo=null,i._featureClickEvent=function(r,o){return function(){return i.getWidget().getPane().getChart().getChartStore().executeAction(r,o),!0}},i._featureMouseMoveEvent=function(r){return function(){return i._activeFeatureInfo=r,!0}},i.registerEvent("mouseMoveEvent",function(r){return i._activeFeatureInfo=null,!1}),i}return Y(e,n),e.prototype.drawImp=function(t){var i=this.getWidget(),r=i.getPane().getChart().getChartStore();if(E(r.getCrosshair().kLineData)){var o=i.getBounding(),a=r.getStyles().indicator.tooltip,s=a.offsetLeft,l=a.offsetTop,u=a.offsetRight;this.drawIndicatorTooltip(t,s,l,o.width-u)}},e.prototype.drawIndicatorTooltip=function(t,i,r,o){var a=this,s=this.getWidget().getPane(),l=s.getChart().getChartStore(),u=l.getStyles().indicator.tooltip;if(this.isDrawTooltip(l.getCrosshair(),u)){var c=l.getIndicatorsByPaneId(s.getId()),h=u.title,p=u.legend;c.forEach(function(d){var g=0,v={x:i,y:r},f=a.getIndicatorTooltipData(d),x=f.name,_=f.calcParamsText,m=f.legends,b=f.features,w=x.length>0,C=m.length>0;if(w||C){var y=a.classifyTooltipFeatures(b);if(g=a.drawStandardTooltipFeatures(t,y[0],v,d,i,g,o),w){var T=x;_.length>0&&(T="".concat(T).concat(_));var P=h.color;g=a.drawStandardTooltipLegends(t,[{title:{text:"",color:P},value:{text:T,color:P}}],v,i,g,o,h)}g=a.drawStandardTooltipFeatures(t,y[1],v,d,i,g,o),C&&(g=a.drawStandardTooltipLegends(t,m,v,i,g,o,p)),g=a.drawStandardTooltipFeatures(t,y[2],v,d,i,g,o),r=v.y+g}})}return r},e.prototype.drawStandardTooltipFeatures=function(t,i,r,o,a,s,l){var u=this;if(i.length>0){var c=0,h=0;i.forEach(function(d){var g=d.marginLeft,v=g===void 0?0:g,f=d.marginTop,x=f===void 0?0:f,_=d.marginRight,m=_===void 0?0:_,b=d.marginBottom,w=b===void 0?0:b,C=d.paddingLeft,y=C===void 0?0:C,T=d.paddingTop,P=T===void 0?0:T,S=d.paddingRight,A=S===void 0?0:S,L=d.paddingBottom,M=L===void 0?0:L,B=d.size,R=B===void 0?0:B,k=d.type,I=d.content,D=0;if(k==="icon_font"){var O=I;t.font=Ot(R,"normal",O.family),D=t.measureText(O.code).width}else D=R;c+=v+y+D+A+m,h=Math.max(h,x+P+R+M+w)}),r.x+c>l?(r.x=a,r.y+=s,s=h):s=Math.max(s,h);var p=this.getWidget().getPane().getId();i.forEach(function(d){var g,v,f,x,_,m=d.marginLeft,b=m===void 0?0:m,w=d.marginTop,C=w===void 0?0:w,y=d.marginRight,T=y===void 0?0:y,P=d.paddingLeft,S=P===void 0?0:P,A=d.paddingTop,L=A===void 0?0:A,M=d.paddingRight,B=M===void 0?0:M,R=d.paddingBottom,k=R===void 0?0:R,I=d.backgroundColor,D=d.activeBackgroundColor,O=d.borderRadius,z=d.size,N=z===void 0?0:z,it=d.color,$=d.activeColor,H=d.type,X=d.content,Z=it,U=I;((g=u._activeFeatureInfo)===null||g===void 0?void 0:g.paneId)===p&&((v=u._activeFeatureInfo.indicator)===null||v===void 0?void 0:v.id)===o?.id&&u._activeFeatureInfo.feature.id===d.id&&(Z=$??it,U=D??I);var q="onCandleTooltipFeatureClick",j={paneId:p,feature:d};E(o)&&(q="onIndicatorTooltipFeatureClick",j.indicator=o);var K={mouseClickEvent:u._featureClickEvent(q,j),mouseMoveEvent:u._featureMouseMoveEvent(j)},J=0;if(H==="icon_font"){var tt=X;(f=u.createFigure({name:"text",attrs:{text:tt.code,x:r.x+b,y:r.y+C},styles:{paddingLeft:S,paddingTop:L,paddingRight:B,paddingBottom:k,borderRadius:O,size:N,family:tt.family,color:Z,backgroundColor:U}},K))===null||f===void 0||f.draw(t),J=t.measureText(tt.code).width}else{(x=u.createFigure({name:"rect",attrs:{x:r.x+b,y:r.y+C,width:N,height:N},styles:{paddingLeft:S,paddingTop:L,paddingRight:B,paddingBottom:k,color:U}},K))===null||x===void 0||x.draw(t);var ut=X;(_=u.createFigure({name:"path",attrs:{path:ut.path,x:r.x+b+S,y:r.y+C+L,width:N,height:N},styles:{style:ut.style,lineWidth:ut.lineWidth,color:Z}}))===null||_===void 0||_.draw(t),J=N}r.x+=b+S+J+B+T})}return s},e.prototype.drawStandardTooltipLegends=function(t,i,r,o,a,s,l){var u=this;if(i.length>0){var c=l.marginLeft,h=l.marginTop,p=l.marginRight,d=l.marginBottom,g=l.size,v=l.family,f=l.weight;t.font=Ot(g,f,v),i.forEach(function(x){var _,m,b=x.title,w=x.value,C=t.measureText(b.text).width,y=C+t.measureText(w.text).width,T=h+g+d;r.x+c+y+p>s?(r.x=o,r.y+=a,a=T):a=Math.max(a,T),b.text.length>0&&((_=u.createFigure({name:"text",attrs:{x:r.x+c,y:r.y+h,text:b.text},styles:{color:b.color,size:g,family:v,weight:f}}))===null||_===void 0||_.draw(t)),(m=u.createFigure({name:"text",attrs:{x:r.x+c+C,y:r.y+h,text:w.text},styles:{color:w.color,size:g,family:v,weight:f}}))===null||m===void 0||m.draw(t),r.x+=c+y+p})}return a},e.prototype.isDrawTooltip=function(t,i){var r=i.showRule;return r==="always"||r==="follow_cross"&&G(t.paneId)},e.prototype.getIndicatorTooltipData=function(t){var i,r,o=this.getWidget().getPane().getChart().getChartStore(),a=o.getStyles().indicator,s=a.tooltip,l=s.title,u="",c="";if(l.show&&(l.showName&&(u=t.shortName),l.showParams)){var h=t.calcParams;h.length>0&&(c="(".concat(h.join(","),")"))}var p={name:u,calcParamsText:c,legends:[],features:s.features},d=o.getCrosshair().dataIndex,g=t.result,v=o.getInnerFormatter(),f=o.getDecimalFold(),x=o.getThousandsSeparator(),_=[];if(t.visible){var m=(r=(i=g[d])!==null&&i!==void 0?i:g[d-1])!==null&&r!==void 0?r:{},b=s.legend.defaultValue;ge(t,d,a,function(R,k){if(G(R.title)){var I=k.color,D=m[R.key];W(D)&&(D=ot(D,t.precision),t.shouldFormatBigNumber&&(D=v.formatBigNumber(D)),D=f.format(x.format(D))),_.push({title:{text:R.title,color:I},value:{text:D??b,color:I}})}}),p.legends=_}if(st(t.createTooltipDataSource)){var w=this.getWidget(),C=w.getPane(),y=C.getChart(),T=t.createTooltipDataSource({chart:y,indicator:t,crosshair:o.getCrosshair(),bounding:w.getBounding(),xAxis:C.getChart().getXAxisPane().getAxisComponent(),yAxis:C.getAxisComponent()}),P=T.name,S=T.calcParamsText,A=T.legends,L=T.features;if(l.show&&(G(P)&&l.showName&&(p.name=P),G(S)&&l.showParams&&(p.calcParamsText=S)),E(L)&&(p.features=L),E(A)&&t.visible){var M=[],B=a.tooltip.legend.color;A.forEach(function(R){var k={text:"",color:B};vt(R.title)?k=R.title:k.text=R.title;var I={text:"",color:B};vt(R.value)?I=R.value:I.text=R.value,W(Number(I.text))&&(I.text=f.format(x.format(I.text))),M.push({title:k,value:I})}),p.legends=M}}return p},e.prototype.classifyTooltipFeatures=function(t){var i=[],r=[],o=[];return t.forEach(function(a){switch(a.position){case"left":i.push(a);break;case"middle":r.push(a);break;case"right":o.push(a)}}),[i,r,o]},e}(dt),oi=function(n){function e(t){var i=n.call(this,t)||this;return i._initEvent(),i}return Y(e,n),e.prototype._initEvent=function(){var t=this,i=this.getWidget(),r=i.getPane(),o=r.getId(),a=r.getChart(),s=a.getChartStore();this.registerEvent("mouseMoveEvent",function(l){var u,c=s.getProgressOverlayInfo();if(c!==null){var h=c.overlay,p=c.paneId;h.isStart()&&(s.updateProgressOverlayInfo(o),p=o);var d=h.points.length-1;return h.isDrawing()&&p===o&&(h.eventMoveForDrawing(t._coordinateToPoint(h,l)),(u=h.onDrawing)===null||u===void 0||u.call(h,F({chart:a,overlay:h},l))),t._figureMouseMoveEvent(h,"point",d,{key:"".concat(Yt,"point_").concat(d),type:"circle",attrs:{}})(l)}return s.setHoverOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(g,v){return t._processOverlayMouseEnterEvent(g,v,l)},function(g,v){return t._processOverlayMouseLeaveEvent(g,v,l)}),i.setForceCursor(null),!1}).registerEvent("mouseClickEvent",function(l){var u,c,h=s.getProgressOverlayInfo();if(h!==null){var p=h.overlay,d=h.paneId;p.isStart()&&(s.updateProgressOverlayInfo(o,!0),d=o);var g=p.points.length-1;return p.isDrawing()&&d===o&&(p.eventMoveForDrawing(t._coordinateToPoint(p,l)),(u=p.onDrawing)===null||u===void 0||u.call(p,F({chart:a,overlay:p},l)),p.nextStep(),p.isDrawing()||(s.progressOverlayComplete(),(c=p.onDrawEnd)===null||c===void 0||c.call(p,F({chart:a,overlay:p},l)))),t._figureMouseClickEvent(p,"point",g,{key:"".concat(Yt,"point_").concat(g),type:"circle",attrs:{}})(l)}return s.setClickOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(v,f){return t._processOverlaySelectedEvent(v,f,l)},function(v,f){return t._processOverlayDeselectedEvent(v,f,l)}),!1}).registerEvent("mouseDoubleClickEvent",function(l){var u,c=s.getProgressOverlayInfo();if(c!==null){var h=c.overlay,p=c.paneId;h.isDrawing()&&p===o&&(h.forceComplete(),h.isDrawing()||(s.progressOverlayComplete(),(u=h.onDrawEnd)===null||u===void 0||u.call(h,F({chart:a,overlay:h},l))));var d=h.points.length-1;return t._figureMouseClickEvent(h,"point",d,{key:"".concat(Yt,"point_").concat(d),type:"circle",attrs:{}})(l)}return!1}).registerEvent("mouseRightClickEvent",function(l){var u=s.getProgressOverlayInfo();if(u!==null){var c=u.overlay;if(c.isDrawing()){var h=c.points.length-1;return t._figureMouseRightClickEvent(c,"point",h,{key:"".concat(Yt,"point_").concat(h),type:"circle",attrs:{}})(l)}}return!1}).registerEvent("mouseUpEvent",function(l){var u,c=s.getPressedOverlayInfo(),h=c.overlay,p=c.figure;return h!==null&&yt("onPressedMoveEnd",p)&&((u=h.onPressedMoveEnd)===null||u===void 0||u.call(h,F({chart:a,overlay:h,figure:p??void 0},l))),s.setPressedOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(l){var u,c=s.getPressedOverlayInfo(),h=c.overlay,p=c.figureType,d=c.figureIndex,g=c.figure;if(h!==null&&yt("onPressedMoving",g)){if(!h.lock){var v=t._coordinateToPoint(h,l);p==="point"?h.eventPressedPointMove(v,d):h.eventPressedOtherMove(v,t.getWidget().getPane().getChart().getChartStore());var f=!1;(u=h.onPressedMoving)===null||u===void 0||u.call(h,F(F({chart:a,overlay:h,figure:g??void 0},l),{preventDefault:function(){f=!0}})),f?t.getWidget().setForceCursor(null):t.getWidget().setForceCursor("pointer")}return!0}return t.getWidget().setForceCursor(null),!1})},e.prototype._createFigureEvents=function(t,i,r,o){return t.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(t,i,r,o),mouseDownEvent:this._figureMouseDownEvent(t,i,r,o),mouseClickEvent:this._figureMouseClickEvent(t,i,r,o),mouseRightClickEvent:this._figureMouseRightClickEvent(t,i,r,o),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,i,r,o)}},e.prototype._processOverlayMouseEnterEvent=function(t,i,r){return!(!st(t.onMouseEnter)||!yt("onMouseEnter",i))&&(t.onMouseEnter(F({chart:this.getWidget().getPane().getChart(),overlay:t,figure:i??void 0},r)),!0)},e.prototype._processOverlayMouseLeaveEvent=function(t,i,r){return!(!st(t.onMouseLeave)||!yt("onMouseLeave",i))&&(t.onMouseLeave(F({chart:this.getWidget().getPane().getChart(),overlay:t,figure:i??void 0},r)),!0)},e.prototype._processOverlaySelectedEvent=function(t,i,r){var o;return!!yt("onSelected",i)&&((o=t.onSelected)===null||o===void 0||o.call(t,F({chart:this.getWidget().getPane().getChart(),overlay:t,figure:i??void 0},r)),!0)},e.prototype._processOverlayDeselectedEvent=function(t,i,r){var o;return!!yt("onDeselected",i)&&((o=t.onDeselected)===null||o===void 0||o.call(t,F({chart:this.getWidget().getPane().getChart(),overlay:t,figure:i??void 0},r)),!0)},e.prototype._figureMouseMoveEvent=function(t,i,r,o){var a=this;return function(s){var l,u=a.getWidget().getPane(),c=!t.isDrawing()&&yt("onMouseMove",o);if(c){var h=!1;(l=t.onMouseMove)===null||l===void 0||l.call(t,F(F({chart:u.getChart(),overlay:t,figure:o},s),{preventDefault:function(){h=!0}})),h?a.getWidget().setForceCursor(null):a.getWidget().setForceCursor("pointer")}return u.getChart().getChartStore().setHoverOverlayInfo({paneId:u.getId(),overlay:t,figureType:i,figure:o,figureIndex:r},function(p,d){return a._processOverlayMouseEnterEvent(p,d,s)},function(p,d){return a._processOverlayMouseLeaveEvent(p,d,s)}),c}},e.prototype._figureMouseDownEvent=function(t,i,r,o){var a=this;return function(s){var l,u=a.getWidget().getPane(),c=u.getId();return t.startPressedMove(a._coordinateToPoint(t,s)),!!yt("onPressedMoveStart",o)&&((l=t.onPressedMoveStart)===null||l===void 0||l.call(t,F({chart:u.getChart(),overlay:t,figure:o},s)),u.getChart().getChartStore().setPressedOverlayInfo({paneId:c,overlay:t,figureType:i,figureIndex:r,figure:o}),!t.isDrawing())}},e.prototype._figureMouseClickEvent=function(t,i,r,o){var a=this;return function(s){var l,u=a.getWidget().getPane(),c=u.getId(),h=!t.isDrawing()&&yt("onClick",o);return h&&((l=t.onClick)===null||l===void 0||l.call(t,F({chart:a.getWidget().getPane().getChart(),overlay:t,figure:o},s))),u.getChart().getChartStore().setClickOverlayInfo({paneId:c,overlay:t,figureType:i,figureIndex:r,figure:o},function(p,d){return a._processOverlaySelectedEvent(p,d,s)},function(p,d){return a._processOverlayDeselectedEvent(p,d,s)}),h}},e.prototype._figureMouseDoubleClickEvent=function(t,i,r,o){var a=this;return function(s){var l;return!!yt("onDoubleClick",o)&&((l=t.onDoubleClick)===null||l===void 0||l.call(t,F(F({},s),{chart:a.getWidget().getPane().getChart(),figure:o,overlay:t})),!t.isDrawing())}},e.prototype._figureMouseRightClickEvent=function(t,i,r,o){var a=this;return function(s){var l;if(yt("onRightClick",o)){var u=!1;return(l=t.onRightClick)===null||l===void 0||l.call(t,F(F({chart:a.getWidget().getPane().getChart(),overlay:t,figure:o},s),{preventDefault:function(){u=!0}})),u||a.getWidget().getPane().getChart().getChartStore().removeOverlay(t),!t.isDrawing()}return!1}},e.prototype._coordinateToPoint=function(t,i){var r,o={},a=this.getWidget().getPane(),s=a.getChart(),l=a.getId(),u=s.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=s.getXAxisPane().getAxisComponent().convertFromPixel(i.x),h=(r=u.dataIndexToTimestamp(c))!==null&&r!==void 0?r:void 0;o.timestamp=h,o.dataIndex=c}if(this.coordinateToPointValueFlag()){var p=a.getAxisComponent(),d=p.convertFromPixel(i.y);if(t.mode!=="normal"&&l===at&&W(o.dataIndex)){var g=u.getDataByDataIndex(o.dataIndex);if(g!==null){var v=t.modeSensitivity;if(d>g.high)if(t.mode==="weak_magnet"){var f=p.convertToPixel(g.high);d<p.convertFromPixel(f-v)&&(d=g.high)}else d=g.high;else if(d<g.low)if(t.mode==="weak_magnet"){var x=p.convertToPixel(g.low);d>p.convertFromPixel(x-v)&&(d=g.low)}else d=g.low;else{var _=Math.max(g.open,g.close),m=Math.min(g.open,g.close);d=d>_?d-_<g.high-d?_:g.high:d<m?d-g.low<m-d?g.low:m:_-d<d-m?_:m}}}o.value=d}return o},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,i){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(t,i):n.prototype.dispatchEvent.call(this,t,i)},e.prototype.drawImp=function(t){var i=this;this.getCompleteOverlays().forEach(function(o){o.visible&&i._drawOverlay(t,o)});var r=this.getProgressOverlay();E(r)&&r.visible&&this._drawOverlay(t,r)},e.prototype._drawOverlay=function(t,i){var r=i.points,o=this.getWidget().getPane(),a=o.getChart(),s=a.getChartStore(),l=o.getAxisComponent(),u=a.getXAxisPane().getAxisComponent(),c=r.map(function(p){var d,g=null;W(p.timestamp)&&(g=s.timestampToDataIndex(p.timestamp));var v={x:0,y:0};return W(g)&&(v.x=u.convertToPixel(g)),W(p.value)&&(v.y=(d=l?.convertToPixel(p.value))!==null&&d!==void 0?d:0),v});if(c.length>0){var h=[].concat(this.getFigures(i,c));this.drawFigures(t,i,h)}this.drawDefaultFigures(t,i,c)},e.prototype.drawFigures=function(t,i,r){var o=this,a=this.getWidget().getPane().getChart().getStyles().overlay;r.forEach(function(s,l){var u=s.type,c=s.styles,h=s.attrs;[].concat(h).forEach(function(p){var d,g,v=o._createFigureEvents(i,"other",l,s),f=F(F(F({},a[u]),(d=i.styles)===null||d===void 0?void 0:d[u]),c);(g=o.createFigure({name:u,attrs:p,styles:f},v??void 0))===null||g===void 0||g.draw(t)})})},e.prototype.getCompleteOverlays=function(){var t=this.getWidget().getPane();return t.getChart().getChartStore().getOverlaysByPaneId(t.getId())},e.prototype.getProgressOverlay=function(){var t=this.getWidget().getPane(),i=t.getChart().getChartStore().getProgressOverlayInfo();return E(i)&&i.paneId===t.getId()?i.overlay:null},e.prototype.getFigures=function(t,i){var r,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(r=t.createPointFigures)===null||r===void 0?void 0:r.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e.prototype.drawDefaultFigures=function(t,i,r){var o,a,s=this;if(i.needDefaultPointFigure){var l=this.getWidget().getPane().getChart().getChartStore(),u=l.getHoverOverlayInfo(),c=l.getClickOverlayInfo();if(((o=u.overlay)===null||o===void 0?void 0:o.id)===i.id&&u.figureType!=="none"||((a=c.overlay)===null||a===void 0?void 0:a.id)===i.id&&c.figureType!=="none"){var h=l.getStyles().overlay,p=i.styles,d=F(F({},h.point),p?.point);r.forEach(function(g,v){var f,x,_,m,b,w=g.x,C=g.y,y=d.radius,T=d.color,P=d.borderColor,S=d.borderSize;((f=u.overlay)===null||f===void 0?void 0:f.id)===i.id&&u.figureType==="point"&&((x=u.figure)===null||x===void 0?void 0:x.key)==="".concat(Yt,"point_").concat(v)&&(y=d.activeRadius,T=d.activeColor,P=d.activeBorderColor,S=d.activeBorderSize),(m=s.createFigure({name:"circle",attrs:{x:w,y:C,r:y+S},styles:{color:P}},(_=s._createFigureEvents(i,"point",v,{key:"".concat(Yt,"point_").concat(v),type:"circle",attrs:{x:w,y:C,r:y+S},styles:{color:P}}))!==null&&_!==void 0?_:void 0))===null||m===void 0||m.draw(t),(b=s.createFigure({name:"circle",attrs:{x:w,y:C,r:y},styles:{color:T}}))===null||b===void 0||b.draw(t)})}}},e}(dt),ai=function(n){function e(t,i){var r=n.call(this,t,i)||this;return r._gridView=new lr(r),r._indicatorView=new ur(r),r._crosshairLineView=new cr(r),r._tooltipView=r.createTooltipView(),r._overlayView=new oi(r),r.addChild(r._tooltipView),r.addChild(r._overlayView),r}return Y(e,n),e.prototype.getName=function(){return lt},e.prototype.updateMain=function(t){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t))},e.prototype.createTooltipView=function(){return new ni(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlayContent=function(t){},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(t),this._crosshairLineView.draw(t),this.updateOverlayContent(t)),this._tooltipView.draw(t)},e}(me),hr=function(n){function e(){var t=n.apply(this,Kt([],Gt(arguments),!1))||this;return t._ripplePoint=t.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),t._animationFrameTime=0,t._animation=new he({iterationCount:1/0}).doFrame(function(i){t._animationFrameTime=i;var r=t.getWidget().getPane();r.getChart().updatePane(0,r.getId())}),t}return Y(e,n),e.prototype.drawImp=function(t){var i,r,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=l.getDataList().length-1,c=a.getBounding(),h=s.getAxisComponent(),p=l.getStyles().candle.area,d=[],g=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,f=null;if(this.eachChildren(function(C){var y=C.x,T=C.data.current,P=T?.[p.value];if(W(P)){var S=h.convertToPixel(P);v===Number.MIN_SAFE_INTEGER&&(v=y),d.push({x:y,y:S}),g=Math.min(g,S),C.dataIndex===u&&(f={x:y,y:S})}}),d.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:p.lineColor,size:p.lineSize,smooth:p.smooth}}))===null||i===void 0||i.draw(t);var x=p.backgroundColor,_="";if(xt(x)){var m=t.createLinearGradient(0,c.height,0,g);try{x.forEach(function(C){var y=C.offset,T=C.color;m.addColorStop(y,T)})}catch{}_=m}else _=x;t.fillStyle=_,t.beginPath(),t.moveTo(v,c.height),t.lineTo(d[0].x,d[0].y),He(t,d,p.smooth),t.lineTo(d[d.length-1].x,c.height),t.closePath(),t.fill()}var b=p.point;if(b.show&&E(f)){(r=this.createFigure({name:"circle",attrs:{x:f.x,y:f.y,r:b.radius},styles:{style:"fill",color:b.color}}))===null||r===void 0||r.draw(t);var w=b.rippleRadius;b.animation&&(w=b.radius+this._animationFrameTime/b.animationDuration*(b.rippleRadius-b.radius),this._animation.setDuration(b.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:f.x,y:f.y,r:w}).setStyles({style:"fill",color:b.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(ii),dr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i,r,o=this.getWidget().getPane(),a=o.getChart().getChartStore(),s=a.getStyles().candle.priceMark,l=s.high,u=s.low;if(s.show&&(l.show||u.show)){var c=a.getVisibleRangeHighLowPrice(),h=(r=(i=a.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&r!==void 0?r:2,p=o.getAxisComponent(),d=c[0],g=d.price,v=d.x,f=c[1],x=f.price,_=f.x,m=p.convertToPixel(g),b=p.convertToPixel(x),w=a.getDecimalFold(),C=a.getThousandsSeparator();l.show&&g!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,w.format(C.format(ot(g,h))),{x:v,y:m},m<b?[-2,-5]:[2,5],l),u.show&&x!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,w.format(C.format(ot(x,h))),{x:_,y:b},m<b?[2,5]:[-2,-5],u)}},e.prototype._drawMark=function(t,i,r,o,a){var s,l,u,c=r.x,h=r.y+o[0];(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+o[0]},{x:c,y:h},{x:c+2,y:h+o[0]}]},styles:{color:a.color}}))===null||s===void 0||s.draw(t);var p=0,d=0,g="left";c>this.getWidget().getBounding().width/2?(d=(p=c-5)-a.textOffset,g="right"):(g="left",d=(p=c+5)+a.textOffset);var v=h+o[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:v},{x:p,y:v}]},styles:{color:a.color}}))===null||l===void 0||l.draw(t),(u=this.createFigure({name:"text",attrs:{x:d,y:v,text:i,align:g,baseline:"middle"},styles:{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}}))===null||u===void 0||u.draw(t)},e}(dt),pr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i,r,o,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getChart().getChartStore(),c=u.getStyles().candle.priceMark,h=c.last,p=h.line;if(c.show&&h.show&&p.show){var d=s.getAxisComponent(),g=u.getDataList(),v=g[g.length-1];if(E(v)){var f=v.close,x=v.open,_=h.compareRule==="current_open"?x:(r=(i=g[g.length-2])===null||i===void 0?void 0:i.close)!==null&&r!==void 0?r:f,m=d.convertToNicePixel(f),b="";b=f>_?h.upColor:f<_?h.downColor:h.noChangeColor,(o=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:m},{x:l.width,y:m}]},styles:{style:p.style,color:b,size:p.size,dashedValue:p.dashedValue}}))===null||o===void 0||o.draw(t)}}},e}(dt),gr={second:"HH:mm:ss",minute:"HH:mm",hour:"MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},si={second:"HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},oe={"zh-CN":{time:"\u65F6\u95F4\uFF1A",open:"\u5F00\uFF1A",high:"\u9AD8\uFF1A",low:"\u4F4E\uFF1A",close:"\u6536\uFF1A",volume:"\u6210\u4EA4\u91CF\uFF1A",turnover:"\u6210\u4EA4\u989D\uFF1A",change:"\u6DA8\u5E45\uFF1A",second:"\u79D2",minute:"",hour:"\u5C0F\u65F6",day:"\u5929",week:"\u5468",month:"\u6708",year:"\u5E74"},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: ",second:"S",minute:"",hour:"H",day:"D",week:"W",month:"M",year:"Y"}};function li(n,e){var t;return(t=oe[e][n])!==null&&t!==void 0?t:n}var vr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i=this.getWidget(),r=i.getPane().getChart().getChartStore(),o=r.getCrosshair();if(E(o.kLineData)){var a=i.getBounding(),s=r.getStyles(),l=s.candle,u=s.indicator;if(l.tooltip.showType==="rect"&&u.tooltip.showType==="rect"){var c=this.isDrawTooltip(o,l.tooltip),h=this.isDrawTooltip(o,u.tooltip);this._drawRectTooltip(t,c,h,l.tooltip.offsetTop)}else if(l.tooltip.showType==="standard"&&u.tooltip.showType==="standard"){var p=l.tooltip,d=p.offsetLeft,g=p.offsetTop,v=p.offsetRight,f=a.width-v,x=this._drawCandleStandardTooltip(t,d,g,f);this.drawIndicatorTooltip(t,d,x,f)}else if(l.tooltip.showType==="rect"&&u.tooltip.showType==="standard"){var _=l.tooltip,m=(d=_.offsetLeft,g=_.offsetTop,v=_.offsetRight,f=a.width-v,this.drawIndicatorTooltip(t,d,g,f));c=this.isDrawTooltip(o,l.tooltip),this._drawRectTooltip(t,c,!1,m)}else{var b=l.tooltip,w=(d=b.offsetLeft,g=b.offsetTop,v=b.offsetRight,f=a.width-v,this._drawCandleStandardTooltip(t,d,g,f));h=this.isDrawTooltip(o,u.tooltip),this._drawRectTooltip(t,!1,h,w)}}},e.prototype._drawCandleStandardTooltip=function(t,i,r,o){var a,s=this.getWidget().getPane().getChart().getChartStore(),l=s.getStyles().candle.tooltip,u=l.legend,c=0,h={x:i,y:r},p=s.getCrosshair();if(this.isDrawTooltip(p,l)){var d=l.title;if(d.show){var g=(a=s.getPeriod())!==null&&a!==void 0?a:{},v=g.type,f=v===void 0?"":v,x=g.span,_=x===void 0?"":x,m=Pe(d.template,F(F({},s.getSymbol()),{period:"".concat(_).concat(li(f,s.getLocale()))})),b=d.color,w=this.drawStandardTooltipLegends(t,[{title:{text:"",color:b},value:{text:m,color:b}}],{x:i,y:r},i,0,o,d);h.y=h.y+w}var C=this._getCandleTooltipLegends(),y=this.classifyTooltipFeatures(l.features);c=this.drawStandardTooltipFeatures(t,y[0],h,null,i,c,o),c=this.drawStandardTooltipFeatures(t,y[1],h,null,i,c,o),C.length>0&&(c=this.drawStandardTooltipLegends(t,C,h,i,c,o,u)),c=this.drawStandardTooltipFeatures(t,y[2],h,null,i,c,o)}return h.y+c},e.prototype._drawRectTooltip=function(t,i,r,o){var a,s,l=this,u=this.getWidget(),c=u.getPane(),h=c.getChart().getChartStore(),p=h.getStyles(),d=p.candle,g=p.indicator,v=d.tooltip,f=g.tooltip;if(i||r){var x=this._getCandleTooltipLegends(),_=v.offsetLeft,m=v.offsetTop,b=v.offsetRight,w=v.offsetBottom,C=v.legend,y=C.marginLeft,T=C.marginRight,P=C.marginTop,S=C.marginBottom,A=C.size,L=C.weight,M=C.family,B=v.rect,R=B.position,k=B.paddingLeft,I=B.paddingRight,D=B.paddingTop,O=B.paddingBottom,z=B.offsetLeft,N=B.offsetRight,it=B.offsetTop,$=B.offsetBottom,H=B.borderSize,X=B.borderRadius,Z=B.borderColor,U=B.color,q=0,j=0,K=0;i&&(t.font=Ot(A,L,M),x.forEach(function(kt){var _t=kt.title,gt=kt.value,Et="".concat(_t.text).concat(gt.text),Dt=t.measureText(Et).width+y+T;q=Math.max(q,Dt)}),K+=(S+P+A)*x.length);var J=f.legend,tt=J.marginLeft,ut=J.marginRight,ht=J.marginTop,It=J.marginBottom,ct=J.size,pt=J.weight,Bt=J.family,Mt=[];if(r){var Rt=h.getIndicatorsByPaneId(c.getId());t.font=Ot(ct,pt,Bt),Rt.forEach(function(kt){var _t=l.getIndicatorTooltipData(kt).legends;Mt.push(_t),_t.forEach(function(gt){var Et=gt.title,Dt=gt.value,ue="".concat(Et.text).concat(Dt.text),Gr=t.measureText(ue).width+tt+ut;q=Math.max(q,Gr),K+=ht+It+ct})})}if((j+=q)!==0&&K!==0){var wt=h.getCrosshair(),se=u.getBounding(),wi=c.getYAxisWidget().getBounding();j+=2*H+k+I,K+=2*H+D+O;var Yr=se.width/2,Ci=R==="pointer"&&wt.paneId===at,Ei=((a=wt.realX)!==null&&a!==void 0?a:0)>Yr,Ct=0;if(Ci){var Ti=wt.realX;Ct=Ei?Ti-N-j:Ti+z}else{var le=this.getWidget().getPane().getAxisComponent();Ei?(Ct=z+_,le.inside&&le.position==="left"&&(Ct+=wi.width)):(Ct=se.width-N-j-b,le.inside&&le.position==="right"&&(Ct-=wi.width))}var Ht=o+it;Ci&&((Ht=wt.y-K/2)+K>se.height-$-w&&(Ht=se.height-$-K-w),Ht<o+it&&(Ht=o+it+m)),(s=this.createFigure({name:"rect",attrs:{x:Ct,y:Ht,width:j,height:K},styles:{style:"stroke_fill",color:U,borderColor:Z,borderSize:H,borderRadius:X}}))===null||s===void 0||s.draw(t);var Hr=Ct+H+k+y,Lt=Ht+H+D;if(i&&x.forEach(function(kt){var _t,gt;Lt+=P;var Et=kt.title;(_t=l.createFigure({name:"text",attrs:{x:Hr,y:Lt,text:Et.text},styles:{color:Et.color,size:A,family:M,weight:L}}))===null||_t===void 0||_t.draw(t);var Dt=kt.value;(gt=l.createFigure({name:"text",attrs:{x:Ct+j-H-T-I,y:Lt,text:Dt.text,align:"right"},styles:{color:Dt.color,size:A,family:M,weight:L}}))===null||gt===void 0||gt.draw(t),Lt+=A+S}),r){var Xr=Ct+H+k+tt;Mt.forEach(function(kt){kt.forEach(function(_t){var gt,Et;Lt+=ht;var Dt=_t.title,ue=_t.value;(gt=l.createFigure({name:"text",attrs:{x:Xr,y:Lt,text:Dt.text},styles:{color:Dt.color,size:ct,family:Bt,weight:pt}}))===null||gt===void 0||gt.draw(t),(Et=l.createFigure({name:"text",attrs:{x:Ct+j-H-ut-I,y:Lt,text:ue.text,align:"right"},styles:{color:ue.color,size:ct,family:Bt,weight:pt}}))===null||Et===void 0||Et.draw(t),Lt+=ct+It})})}}}},e.prototype._getCandleTooltipLegends=function(){var t,i,r,o,a,s,l,u,c=this.getWidget().getPane().getChart().getChartStore(),h=c.getStyles().candle,p=c.getDataList(),d=c.getInnerFormatter(),g=c.getDecimalFold(),v=c.getThousandsSeparator(),f=c.getLocale(),x=(t=c.getSymbol())!==null&&t!==void 0?t:{},_=x.pricePrecision,m=_===void 0?2:_,b=x.volumePrecision,w=b===void 0?0:b,C=c.getPeriod(),y=(i=c.getCrosshair().dataIndex)!==null&&i!==void 0?i:0,T=h.tooltip.legend,P=T.color,S=T.defaultValue,A=T.template,L=(r=p[y-1])!==null&&r!==void 0?r:null,M=p[y],B=(o=L?.close)!==null&&o!==void 0?o:M.close,R=M.close-B,k=F(F({},M),{time:d.formatDate(M.timestamp,si[(a=C?.type)!==null&&a!==void 0?a:"day"],"tooltip"),open:g.format(v.format(ot(M.open,m))),high:g.format(v.format(ot(M.high,m))),low:g.format(v.format(ot(M.low,m))),close:g.format(v.format(ot(M.close,m))),volume:g.format(v.format(d.formatBigNumber(ot((s=M.volume)!==null&&s!==void 0?s:S,w)))),turnover:g.format(v.format(ot((l=M.turnover)!==null&&l!==void 0?l:S,m))),change:B===0?S:"".concat(v.format(ot(R/B*100)),"%")});return(st(A)?A({prev:L,current:M,next:(u=p[y+1])!==null&&u!==void 0?u:null},h):A).map(function(I){var D=I.title,O=I.value,z={text:"",color:P};vt(D)?z=F({},D):z.text=D,z.text=li(z.text,f);var N={text:S,color:P};return vt(O)?N=F({},O):N.text=O,E(/{change}/.exec(N.text))&&(N.color=R===0?h.priceMark.last.noChangeColor:R>0?h.priceMark.last.upColor:h.priceMark.last.downColor),N.text=Pe(N.text,k),{title:z,value:N}})},e}(ni),fr=function(n){function e(t){var i=n.call(this,t)||this;return i._activeFeatureInfo=null,i._featureClickEvent=function(r){return function(){return i.getWidget().getPane().getChart().getChartStore().executeAction("onCrosshairFeatureClick",r),!0}},i._featureMouseMoveEvent=function(r){return function(){return i._activeFeatureInfo=r,i.getWidget().setForceCursor("pointer"),!0}},i.registerEvent("mouseMoveEvent",function(r){return i._activeFeatureInfo=null,i.getWidget().setForceCursor(null),!1}),i}return Y(e,n),e.prototype.drawImp=function(t){var i,r,o=this,a=this.getWidget(),s=a.getPane(),l=a.getPane().getChart().getChartStore(),u=l.getCrosshair(),c=this.getWidget(),h=c.getPane().getAxisComponent();if(G(u.paneId)&&u.paneId===s.getId()&&h.isInCandle()){var p=l.getStyles().crosshair,d=p.horizontal.features;if(p.show&&p.horizontal.show&&d.length>0){var g=h.position==="right",v=c.getBounding(),f=0,x=p.horizontal.text;if(h.inside&&x.show){var _=h.convertFromPixel(u.y),m=h.getRange(),b=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(_,{range:m}),{range:m}),(r=(i=l.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&r!==void 0?r:2);b=l.getDecimalFold().format(l.getThousandsSeparator().format(b)),f=x.paddingLeft+ft(b,x.size,x.weight,x.family)+x.paddingRight}var w=f;g&&(w=v.width-f);var C=u.y;d.forEach(function(y){var T,P,S,A,L=y.marginLeft,M=L===void 0?0:L,B=y.marginTop,R=B===void 0?0:B,k=y.marginRight,I=k===void 0?0:k,D=y.paddingLeft,O=D===void 0?0:D,z=y.paddingTop,N=z===void 0?0:z,it=y.paddingRight,$=it===void 0?0:it,H=y.paddingBottom,X=H===void 0?0:H,Z=y.color,U=y.activeColor,q=y.backgroundColor,j=y.activeBackgroundColor,K=y.borderRadius,J=y.size,tt=J===void 0?0:J,ut=y.type,ht=y.content,It=tt;ut==="icon_font"&&(It=O+ft((Mt=ht).code,tt,"normal",Mt.family)+$),g?w-=It+I:w+=M;var ct=Z,pt=q;((T=o._activeFeatureInfo)===null||T===void 0?void 0:T.feature.id)===y.id&&(ct=U??Z,pt=j??q);var Bt={mouseClickEvent:o._featureClickEvent({crosshair:u,feature:y}),mouseMoveEvent:o._featureMouseMoveEvent({crosshair:u,feature:y})};if(ut==="icon_font"){var Mt=ht;(P=o.createFigure({name:"text",attrs:{text:Mt.code,x:w,y:C+R,baseline:"middle"},styles:{paddingLeft:O,paddingTop:N,paddingRight:$,paddingBottom:X,borderRadius:K,size:tt,family:Mt.family,color:ct,backgroundColor:pt}},Bt))===null||P===void 0||P.draw(t)}else{(S=o.createFigure({name:"rect",attrs:{x:w,y:C+R-tt/2,width:tt,height:tt},styles:{paddingLeft:O,paddingTop:N,paddingRight:$,paddingBottom:X,color:pt}},Bt))===null||S===void 0||S.draw(t);var Rt=ht;(A=o.createFigure({name:"path",attrs:{path:Rt.path,x:w,y:C+R+N-tt/2,width:tt,height:tt},styles:{style:Rt.style,lineWidth:Rt.lineWidth,color:ct}}))===null||A===void 0||A.draw(t)}g?w-=M:w+=It+I})}}},e}(dt),mr=function(n){function e(t,i){var r=n.call(this,t,i)||this;return r._candleBarView=new ri(r),r._candleAreaView=new hr(r),r._candleHighLowPriceView=new dr(r),r._candleLastPriceLineView=new pr(r),r._crosshairFeatureView=new fr(r),r.addChild(r._candleBarView),r.addChild(r._crosshairFeatureView),r}return Y(e,n),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!=="area"?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.updateOverlayContent=function(t){this._crosshairFeatureView.draw(t)},e.prototype.createTooltipView=function(){return new vr(this)},e}(ai),ui=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t,i){var r,o,a=this,s=this.getWidget(),l=s.getPane(),u=s.getBounding(),c=l.getAxisComponent(),h=this.getAxisStyles(l.getChart().getStyles());if(h.show&&(h.axisLine.show&&((r=this.createFigure({name:"line",attrs:this.createAxisLine(u,h),styles:h.axisLine}))===null||r===void 0||r.draw(t)),!i[0])){var p=c.getTicks();if(h.tickLine.show&&this.createTickLines(p,u,h).forEach(function(g){var v;(v=a.createFigure({name:"line",attrs:g,styles:h.tickLine}))===null||v===void 0||v.draw(t)}),h.tickText.show){var d=this.createTickTexts(p,u,h);(o=this.createFigure({name:"text",attrs:d,styles:h.tickText}))===null||o===void 0||o.draw(t)}}},e}(dt),yr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,i){var r=this.getWidget().getPane().getAxisComponent(),o=i.axisLine.size,a=0;return{coordinates:[{x:a=r.isFromZero()?0:t.width-o,y:0},{x:a,y:t.height}]}},e.prototype.createTickLines=function(t,i,r){var o=this.getWidget().getPane().getAxisComponent(),a=r.axisLine,s=r.tickLine,l=0,u=0;return o.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=i.width,a.show&&(l-=a.size),u=l-s.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,i,r){var o=this.getWidget().getPane().getAxisComponent(),a=r.axisLine,s=r.tickLine,l=r.tickText,u=0;o.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=i.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},e}(ui),_r=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i,r,o,a,s=this,l=this.getWidget(),u=l.getPane(),c=l.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().candle.priceMark,d=p.last,g=d.text;if(p.show&&d.show&&g.show){var v=(r=(i=h.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&r!==void 0?r:2,f=u.getAxisComponent(),x=h.getDataList(),_=x[x.length-1];if(E(_)){var m=_.close,b=_.open,w=d.compareRule==="current_open"?b:(a=(o=x[x.length-2])===null||o===void 0?void 0:o.close)!==null&&a!==void 0?a:m,C=f.convertToNicePixel(m),y="";y=m>w?d.upColor:m<w?d.downColor:d.noChangeColor;var T=0,P="left";f.isFromZero()?(T=0,P="left"):(T=c.width,P="right");var S=[],A=f.getRange(),L=f.displayValueToText(f.realValueToDisplayValue(f.valueToRealValue(m,{range:A}),{range:A}),v);L=h.getDecimalFold().format(h.getThousandsSeparator().format(L));var M=g.paddingLeft,B=g.paddingRight,R=g.paddingTop,k=g.paddingBottom,I=g.size,D=g.family,O=M+ft(L,I,g.weight,D)+B,z=R+I+k;S.push({name:"text",attrs:{x:T,y:C,width:O,height:z,text:L,align:P,baseline:"middle"},styles:F(F({},g),{backgroundColor:y})});var N=h.getInnerFormatter().formatExtendText,it=I/2,$=C-it-R,H=C+it+k;d.extendTexts.forEach(function(X,Z){var U=N({type:"last_price",data:_,index:Z});if(U.length>0&&X.show){var q=X.size/2,j=0;X.position==="above_price"?(j=$-=X.paddingBottom+q,$-=q+X.paddingTop):(j=H+=X.paddingTop+q,H+=q+X.paddingBottom),O=Math.max(O,X.paddingLeft+ft(U,X.size,X.weight,X.family)+X.paddingRight),S.push({name:"text",attrs:{x:T,y:j,width:O,height:X.paddingTop+X.size+X.paddingBottom,text:U,align:P,baseline:"middle"},styles:F(F({},X),{backgroundColor:y})})}}),S.forEach(function(X){var Z;X.attrs.width=O,(Z=s.createFigure(X))===null||Z===void 0||Z.draw(t)})}}},e}(dt),xr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i=this,r=this.getWidget(),o=r.getPane(),a=r.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().indicator,u=l.lastValueMark,c=u.text;if(u.show){var h=o.getAxisComponent(),p=h.getRange(),d=s.getDataList().length-1,g=s.getIndicatorsByPaneId(o.getId()),v=s.getInnerFormatter(),f=s.getDecimalFold(),x=s.getThousandsSeparator();g.forEach(function(_){var m,b,w=_.result,C=(b=(m=w[d])!==null&&m!==void 0?m:w[d-1])!==null&&b!==void 0?b:{};if(E(C)&&_.visible){var y=_.precision;ge(_,d,l,function(T,P){var S,A=C[T.key];if(W(A)){var L=h.convertToNicePixel(A),M=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(A,{range:p}),{range:p}),y);_.shouldFormatBigNumber&&(M=v.formatBigNumber(M)),M=f.format(x.format(M));var B=0,R="left";h.isFromZero()?(B=0,R="left"):(B=a.width,R="right"),(S=i.createFigure({name:"text",attrs:{x:B,y:L,text:M,align:R,baseline:"middle"},styles:F(F({},c),{backgroundColor:P.color})}))===null||S===void 0||S.draw(t)}})}})}},e}(dt),ci=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,i,r){this.drawFigures(t,i,this.getDefaultFigures(i,r))},e.prototype.getDefaultFigures=function(t,i){var r,o=this.getWidget(),a=o.getPane(),s=a.getChart().getChartStore(),l=s.getClickOverlayInfo(),u=[];if(t.needDefaultYAxisFigure&&t.id===((r=l.overlay)===null||r===void 0?void 0:r.id)&&l.paneId===a.getId()){var c=a.getAxisComponent(),h=o.getBounding(),p=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,g=c.isFromZero(),v="left",f=0;g?(v="left",f=0):(v="right",f=h.width);var x=s.getDecimalFold(),_=s.getThousandsSeparator();i.forEach(function(m,b){var w,C,y=t.points[b];if(W(y.value)){p=Math.min(p,m.y),d=Math.max(d,m.y);var T=x.format(_.format(ot(y.value,(C=(w=s.getSymbol())===null||w===void 0?void 0:w.pricePrecision)!==null&&C!==void 0?C:2)));u.push({type:"text",attrs:{x:f,y:m.y,text:T,align:v,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&u.unshift({type:"rect",attrs:{x:0,y:p,width:h.width,height:d-p},ignoreEvent:!0})}return u},e.prototype.getFigures=function(t,i){var r,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(r=t.createYAxisFigures)===null||r===void 0?void 0:r.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(oi),hi=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.drawImp=function(t){var i,r=this.getWidget(),o=r.getPane(),a=r.getPane().getChart().getChartStore(),s=a.getCrosshair();if(G(s.paneId)&&this.compare(s,o.getId())){var l=a.getStyles().crosshair;if(l.show){var u=this.getDirectionStyles(l),c=u.text;if(u.show&&c.show){var h=r.getBounding(),p=o.getAxisComponent(),d=this.getText(s,a,p);t.font=Ot(c.size,c.weight,c.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(d,t.measureText(d).width,s,h,p,c),styles:c}))===null||i===void 0||i.draw(t)}}}},e.prototype.compare=function(t,i){return t.paneId===i},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,i,r){var o,a,s=r,l=r.convertFromPixel(t.y),u=0,c=!1;s.isInCandle()?u=(a=(o=i.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&a!==void 0?a:2:i.getIndicatorsByPaneId(t.paneId).forEach(function(d){u=Math.max(d.precision,u),c||(c=d.shouldFormatBigNumber)});var h=s.getRange(),p=s.displayValueToText(s.realValueToDisplayValue(s.valueToRealValue(l,{range:h}),{range:h}),u);return c&&(p=i.getInnerFormatter().formatBigNumber(p)),i.getDecimalFold().format(i.getThousandsSeparator().format(p))},e.prototype.getTextAttrs=function(t,i,r,o,a,s){var l=0,u="left";return a.isFromZero()?(l=0,u="left"):(l=o.width,u="right"),{x:l,y:r.y,text:t,align:u,baseline:"middle"}},e}(dt),br=function(n){function e(t,i){var r=n.call(this,t,i)||this;return r._yAxisView=new yr(r),r._candleLastPriceLabelView=new _r(r),r._indicatorLastValueView=new xr(r),r._overlayYAxisView=new ci(r),r._crosshairHorizontalLabelView=new hi(r),r.setCursor("ns-resize"),r.addChild(r._overlayYAxisView),r}return Y(e,n),e.prototype.getName=function(){return bt},e.prototype.updateMain=function(t){var i=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(t,i),i||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t))},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t))},e}(me),di=function(){function n(e){this.scrollZoomEnabled=!0,this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return n.prototype.getParent=function(){return this._parent},n.prototype.buildTicks=function(e){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),!(this._prevRange.from===this._range.from&&this._prevRange.to===this._range.to&&!e)&&(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0)},n.prototype.getTicks=function(){return this._ticks},n.prototype.setRange=function(e){this._autoCalcTickFlag=!1,this._range=e},n.prototype.getRange=function(){return this._range},n.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},n.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},n}(),Qt=function(n){function e(t,i){var r=n.call(this,t)||this;return r.reverse=!1,r.inside=!1,r.position="right",r.gap={top:.2,bottom:.1},r.createRange=function(o){return o.defaultRange},r.minSpan=function(o){return Wt(-o)},r.valueToRealValue=function(o){return o},r.realValueToDisplayValue=function(o){return o},r.displayValueToRealValue=function(o){return o},r.realValueToValue=function(o){return o},r.displayValueToText=function(o,a){return ot(o,a)},r.override(i),r}return Y(e,n),e.prototype.override=function(t){var i=t.name,r=t.gap,o=$t(t,["name","gap"]);G(this.name)||(this.name=i),Q(this.gap,r),Q(this,o)},e.prototype.createRangeImp=function(){var t,i,r=this.getParent(),o=r.getChart(),a=o.getChartStore(),s=r.getId(),l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER,c=!1,h=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,g=a.getIndicatorsByPaneId(s);g.forEach(function(H){c||(c=H.shouldOhlc),d=Math.min(d,H.precision),W(H.minValue)&&(h=Math.min(h,H.minValue)),W(H.maxValue)&&(p=Math.max(p,H.maxValue))});var v=4,f=this.isInCandle();if(f){var x=(i=(t=a.getSymbol())===null||t===void 0?void 0:t.pricePrecision)!==null&&i!==void 0?i:2;v=d!==Number.MAX_SAFE_INTEGER?Math.min(d,x):x}else d!==Number.MAX_SAFE_INTEGER&&(v=d);var _=a.getVisibleRangeDataList(),m=o.getStyles().candle,b=m.type==="area",w=m.area.value,C=f&&!b||!f&&c;_.forEach(function(H){var X=H.dataIndex,Z=H.data.current;if(E(Z)&&(C&&(l=Math.min(l,Z.low),u=Math.max(u,Z.high)),f&&b)){var U=Z[w];W(U)&&(l=Math.min(l,U),u=Math.max(u,U))}g.forEach(function(q){var j,K=q.result,J=q.figures,tt=(j=K[X])!==null&&j!==void 0?j:{};J.forEach(function(ut){var ht=tt[ut.key];W(ht)&&(l=Math.min(l,ht),u=Math.max(u,ht))})})}),l!==Number.MAX_SAFE_INTEGER&&u!==Number.MIN_SAFE_INTEGER?(l=Math.min(h,l),u=Math.max(p,u)):(l=0,u=10);var y=u-l,T={from:l,to:u,range:y,realFrom:l,realTo:u,realRange:y,displayFrom:l,displayTo:u,displayRange:y},P=this.createRange({chart:o,paneId:s,defaultRange:T}),S=P.realFrom,A=P.realTo,L=P.realRange,M=this.minSpan(v);if(S===A||L<M){var B=h===S,R=p===A;S=B?S:R?S-8*M:S-4*M,A=R?A:B?A+8*M:A+4*M}var k=this.getBounding().height,I=this.gap,D=I.top;D>=1&&(D/=k);var O=I.bottom;O>=1&&(O/=k),S-=(L=A-S)*O,A+=L*D;var z=this.realValueToValue(S,{range:P}),N=this.realValueToValue(A,{range:P}),it=this.realValueToDisplayValue(S,{range:P}),$=this.realValueToDisplayValue(A,{range:P});return{from:z,to:N,range:N-z,realFrom:S,realTo:A,realRange:A-S,displayFrom:it,displayTo:$,displayRange:$-it}},e.prototype.isInCandle=function(){return this.getParent().getId()===at},e.prototype.isFromZero=function(){return this.position==="left"&&this.inside||this.position==="right"&&!this.inside},e.prototype.createTicksImp=function(){var t,i,r,o,a=this,s=this.getRange(),l=s.displayFrom,u=s.displayTo,c=s.displayRange,h=[];if(c>=0){var p=function(k){var I=Math.floor(St(k)),D=Wt(I),O=k/D;return+(k=(O<1.5?1:O<2.5?2:O<3.5?3:O<4.5?4:O<5.5?5:O<6.5?6:8)*D).toFixed(Math.abs(I))}(c/8),d=function(k){var I=k.toString(),D=I.indexOf("e");if(D>0){var O=+I.slice(D+1);return O<0?-O:0}var z=I.indexOf(".");return z<0?0:I.length-1-z}(p),g=Fe(Math.ceil(l/p)*p,d),v=Fe(Math.floor(u/p)*p,d),f=0,x=g;if(p!==0)for(;x<=v;){var _=x.toFixed(d);h[f]={text:_,coord:0,value:_},++f,x+=p}}var m=this.getParent(),b=(i=(t=m.getYAxisWidget())===null||t===void 0?void 0:t.getBounding().height)!==null&&i!==void 0?i:0,w=m.getChart().getChartStore(),C=[],y=w.getIndicatorsByPaneId(m.getId()),T=w.getStyles(),P=0,S=!1;this.isInCandle()?P=(o=(r=w.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&o!==void 0?o:2:y.forEach(function(k){P=Math.max(P,k.precision),S||(S=k.shouldFormatBigNumber)});var A=w.getInnerFormatter(),L=w.getThousandsSeparator(),M=w.getDecimalFold(),B=T.xAxis.tickText.size,R=NaN;return h.forEach(function(k){var I=k.value,D=a.displayValueToText(+I,P),O=a.convertToPixel(a.realValueToValue(a.displayValueToRealValue(+I,{range:s}),{range:s}));S&&(D=A.formatBigNumber(I)),D=M.format(L.format(D));var z=W(R);O>B&&O<b-B&&(z&&Math.abs(R-O)>2*B||!z)&&(C.push({text:D,coord:O,value:I}),R=O)}),st(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:C}):C},e.prototype.getAutoSize=function(){var t,i,r=this.getParent(),o=r.getChart().getChartStore(),a=o.getStyles(),s=a.yAxis,l=s.size;if(l!=="auto")return l;var u=0;if(s.show&&(s.axisLine.show&&(u+=s.axisLine.size),s.tickLine.show&&(u+=s.tickLine.length),s.tickText.show)){var c=0;this.getTicks().forEach(function(D){c=Math.max(c,ft(D.text,s.tickText.size,s.tickText.weight,s.tickText.family))}),u+=s.tickText.marginStart+s.tickText.marginEnd+c}var h=a.candle.priceMark,p=h.show&&h.last.show&&h.last.text.show,d=0,g=a.crosshair,v=g.show&&g.horizontal.show&&g.horizontal.text.show,f=0;if(p||v){var x=(i=(t=o.getSymbol())===null||t===void 0?void 0:t.pricePrecision)!==null&&i!==void 0?i:2,_=this.getRange().displayTo;if(p){var m=o.getDataList(),b=m[m.length-1];if(E(b)){var w=h.last.text,C=w.paddingLeft,y=w.paddingRight,T=w.size,P=w.family,S=w.weight;d=C+ft(ot(b.close,x),T,S,P)+y;var A=o.getInnerFormatter().formatExtendText;h.last.extendTexts.forEach(function(D,O){var z=A({type:"last_price",data:b,index:O});z.length>0&&D.show&&(d=Math.max(d,D.paddingLeft+ft(z,D.size,D.weight,D.family)+D.paddingRight))})}}if(v){var L=o.getIndicatorsByPaneId(r.getId()),M=0,B=!1;L.forEach(function(D){M=Math.max(D.precision,M),B||(B=D.shouldFormatBigNumber)});var R=2;if(this.isInCandle()){var k=a.indicator.lastValueMark;R=k.show&&k.text.show?Math.max(M,x):x}else R=M;var I=ot(_,R);B&&(I=o.getInnerFormatter().formatBigNumber(I)),I=o.getDecimalFold().format(I),f+=g.horizontal.text.paddingLeft+g.horizontal.text.paddingRight+2*g.horizontal.text.borderSize+ft(I,g.horizontal.text.size,g.horizontal.text.weight,g.horizontal.text.family)}}return Math.max(u,d,f)},e.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var i=this.getBounding().height,r=this.getRange(),o=r.realFrom,a=r.realRange,s=(this.reverse?t/i:1-t/i)*a+o;return this.realValueToValue(s,{range:r})},e.prototype.convertToPixel=function(t){var i,r,o=this.getRange(),a=this.valueToRealValue(t,{range:o}),s=(r=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&r!==void 0?r:0,l=(a-o.realFrom)/o.realRange;return this.reverse?Math.round(l*s):Math.round((1-l)*s)},e.prototype.convertToNicePixel=function(t){var i,r,o=(r=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&r!==void 0?r:0,a=this.convertToPixel(t);return Math.round(Math.max(.05*o,Math.min(a,.98*o)))},e.extend=function(t){var i=function(r){function o(a){return r.call(this,a,t)||this}return Y(o,r),o}(e);return i},e}(di),wr={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(n){return"".concat(ot(n,2),"%")},valueToRealValue:function(n,e){var t=e.range;return(n-t.from)/t.range*t.realRange+t.realFrom},realValueToValue:function(n,e){var t=e.range;return(n-t.realFrom)/t.realRange*t.range+t.from},createRange:function(n){var e=n.chart,t=n.defaultRange,i=e.getDataList()[e.getVisibleRange().from];if(E(i)){var r=t.from,o=t.to,a=t.range,s=(t.from-i.close)/i.close*100,l=(t.to-i.close)/i.close*100,u=l-s;return{from:r,to:o,range:a,realFrom:s,realTo:l,realRange:u,displayFrom:s,displayTo:l,displayRange:u}}return t}},Cr={name:"logarithm",minSpan:function(n){return .05*Wt(-n)},valueToRealValue:function(n){return n<0?-St(Math.abs(n)):St(n)},realValueToDisplayValue:function(n){return n<0?-Wt(Math.abs(n)):Wt(n)},displayValueToRealValue:function(n){return n<0?-St(Math.abs(n)):St(n)},realValueToValue:function(n){return n<0?-Wt(Math.abs(n)):Wt(n)},createRange:function(n){var e=n.defaultRange,t=e.from,i=e.to,r=e.range,o=t<0?-St(Math.abs(t)):St(t),a=i<0?-St(Math.abs(i)):St(i);return{from:t,to:i,range:r,realFrom:o,realTo:a,realRange:a-o,displayFrom:t,displayTo:i,displayRange:r}}},_e={normal:Qt.extend({name:"normal"}),percentage:Qt.extend(wr),logarithm:Qt.extend(Cr)},pi=function(){function n(e,t){this._bounding=te(),this._originalBounding=te(),this._visible=!0,this._chart=e,this._id=t,this._container=Tt("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return n.prototype.getContainer=function(){return this._container},n.prototype.setVisible=function(e){this._visible!==e&&(this._container.style.display=e?"block":"none",this._visible=e)},n.prototype.getVisible=function(){return this._visible},n.prototype.getId=function(){return this._id},n.prototype.getChart=function(){return this._chart},n.prototype.getBounding=function(){return this._bounding},n.prototype.setOriginalBounding=function(e){Q(this._originalBounding,e)},n.prototype.getOriginalBounding=function(){return this._originalBounding},n.prototype.update=function(e){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(e??3,this._container,this._bounding)},n}(),gi=function(n){function e(t,i,r){var o=n.call(this,t,i)||this;o._yAxisWidget=null,o._options={id:"",minHeight:30,dragEnabled:!0,order:0,height:100,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var a=o.getContainer();return o._mainWidget=o.createMainWidget(a),o._yAxisWidget=o.createYAxisWidget(a),o.setOptions(r),o}return Y(e,n),e.prototype.setOptions=function(t){var i,r,o,a,s,l=this.getId();if(l===at||l===et){var u=(i=t.axis)===null||i===void 0?void 0:i.name;(!E(this._axis)||E(u)&&this._options.axis.name!==u)&&(this._axis=this.createAxisComponent(u??"normal"))}else E(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof Qt&&this._axis.setAutoCalcTickFlag(!0),Q(this._options,t),this._axis.override(F(F({},this._options.axis),{name:(o=(r=t.axis)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"normal"}));var c=null,h="default";return this.getId()===et?(c=this.getMainWidget().getContainer(),h="ew-resize"):(c=this.getYAxisWidget().getContainer(),h="ns-resize"),(s=(a=t.axis)===null||a===void 0?void 0:a.scrollZoomEnabled)===null||s===void 0||s?c.style.cursor=h:c.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,i,r,o){var a,s,l,u;Q(this.getBounding(),t);var c={};E(t.height)&&(c.height=t.height),E(t.top)&&(c.top=t.top),this._mainWidget.setBounding(c);var h=E(i);return h&&this._mainWidget.setBounding(i),E(this._yAxisWidget)&&(this._yAxisWidget.setBounding(c),this._axis.position==="left"?E(r)&&this._yAxisWidget.setBounding(F(F({},r),{left:0})):E(o)&&(this._yAxisWidget.setBounding(o),h&&this._yAxisWidget.setBounding({left:((a=i.left)!==null&&a!==void 0?a:0)+((s=i.width)!==null&&s!==void 0?s:0)+((l=i.right)!==null&&l!==void 0?l:0)-((u=o.width)!==null&&u!==void 0?u:0)}))),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var i;this._mainWidget.update(t),(i=this._yAxisWidget)===null||i===void 0||i.update(t)},e.prototype.destroy=function(){var t;this._mainWidget.destroy(),(t=this._yAxisWidget)===null||t===void 0||t.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),r=i.width,o=i.height,a=Tt("canvas",{width:"".concat(r,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=At(a);a.width=r*l,a.height=o*l,s.scale(l,l);var u=this._mainWidget.getBounding();if(s.drawImage(this._mainWidget.getImage(t),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();s.drawImage(this._yAxisWidget.getImage(t),c.left,0,c.width,c.height)}return a},e.prototype.createYAxisWidget=function(t){return null},e}(pi),vi=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.createAxisComponent=function(t){var i=function(r){var o;return(o=_e[r])!==null&&o!==void 0?o:_e.normal}(t??"default");return new i(this)},e.prototype.createMainWidget=function(t){return new ai(t,this)},e.prototype.createYAxisWidget=function(t){return new br(t,this)},e}(gi),Er=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.createMainWidget=function(t){return new mr(t,this)},e}(vi),Tr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,i,r){var o=r.tickLine,a=r.axisLine.size;return t.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+o.length}]}})},e.prototype.createTickTexts=function(t,i,r){var o=r.tickText,a=r.axisLine.size,s=r.tickLine.length;return t.map(function(l){return{x:l.coord,y:a+s+o.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(ui),Sr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},e.prototype.getProgressOverlay=function(){var t,i;return(i=(t=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||t===void 0?void 0:t.overlay)!==null&&i!==void 0?i:null},e.prototype.getDefaultFigures=function(t,i){var r,o=[],a=this.getWidget(),s=a.getPane().getChart().getChartStore(),l=s.getClickOverlayInfo();if(t.needDefaultXAxisFigure&&t.id===((r=l.overlay)===null||r===void 0?void 0:r.id)){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;i.forEach(function(h,p){u=Math.min(u,h.x),c=Math.max(c,h.x);var d=t.points[p];if(W(d.timestamp)){var g=s.getInnerFormatter().formatDate(d.timestamp,"YYYY-MM-DD HH:mm","crosshair");o.push({type:"text",attrs:{x:h.x,y:0,text:g,align:"center"},ignoreEvent:!0})}}),i.length>1&&o.unshift({type:"rect",attrs:{x:u,y:0,width:c-u,height:a.getBounding().height},ignoreEvent:!0})}return o},e.prototype.getFigures=function(t,i){var r,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(r=t.createXAxisFigures)===null||r===void 0?void 0:r.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(ci),Pr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.compare=function(t){return E(t.timestamp)},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,i){var r,o,a=t.timestamp;return i.getInnerFormatter().formatDate(a,si[(o=(r=i.getPeriod())===null||r===void 0?void 0:r.type)!==null&&o!==void 0?o:"day"],"crosshair")},e.prototype.getTextAttrs=function(t,i,r,o,a,s){var l=r.realX,u=0,c="center";return l-i/2-s.paddingLeft<0?(u=0,c="left"):l+i/2+s.paddingRight>o.width?(u=o.width,c="right"):u=l,{x:u,y:0,text:t,align:c,baseline:"top"}},e}(hi),Ir=function(n){function e(t,i){var r=n.call(this,t,i)||this;return r._xAxisView=new Tr(r),r._overlayXAxisView=new Sr(r),r._crosshairVerticalLabelView=new Pr(r),r.setCursor("ew-resize"),r.addChild(r._overlayXAxisView),r}return Y(e,n),e.prototype.getName=function(){return Pt},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(me),fi=function(n){function e(t,i){var r=n.call(this,t)||this;return r.override(i),r}return Y(e,n),e.prototype.override=function(t){var i=t.name,r=t.scrollZoomEnabled,o=t.createTicks;G(this.name)||(this.name=i),this.scrollZoomEnabled=r??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},e.prototype.createRangeImp=function(){var t=this.getParent().getChart().getChartStore().getVisibleRange(),i=t.realFrom,r=t.realTo,o=r-i+1;return{from:i,to:r,range:o,realFrom:i,realTo:r,realRange:o,displayFrom:i,displayTo:r,displayRange:o}},e.prototype.createTicksImp=function(){var t,i=this.getRange(),r=i.realFrom,o=i.realTo,a=i.from,s=this.getParent().getChart().getChartStore(),l=s.getInnerFormatter().formatDate,u=s.getPeriod(),c=[],h=s.getBarSpace().bar,p=s.getStyles().xAxis.tickText,d=Math.max(ft("YYYY-MM-DD HH:mm:ss",p.size,p.weight,p.family),this.getBounding().width/8),g=Math.ceil(d/h);g%2!=0&&(g+=1);for(var v=Math.max(0,Math.floor(r/g)*g);v<o;v+=g)if(v>=a){var f=s.dataIndexToTimestamp(v);W(f)&&c.push({coord:this.convertToPixel(v),value:f,text:l(f,gr[(t=u?.type)!==null&&t!==void 0?t:"day"],"xAxis")})}return st(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:c}):c},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),i=t.xAxis,r=i.size;if(r!=="auto")return r;var o=t.crosshair,a=0;i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show&&(a+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var s=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(s+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+2*o.vertical.text.borderSize+o.vertical.text.size),Math.max(a,s)},e.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var i=this.getParent().getChart().getChartStore(),r=i.coordinateToDataIndex(t);return i.dataIndexToTimestamp(r)},e.prototype.convertTimestampToPixel=function(t){var i=this.getParent().getChart().getChartStore(),r=i.timestampToDataIndex(t);return i.dataIndexToCoordinate(r)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(t)},e.extend=function(t){var i=function(r){function o(a){return r.call(this,a,t)||this}return Y(o,r),o}(e);return i},e}(di),xe={normal:fi.extend({name:"normal"})},Mr=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Y(e,n),e.prototype.createAxisComponent=function(t){var i=function(r){var o;return(o=xe[r])!==null&&o!==void 0?o:xe.normal}(t);return new i(this)},e.prototype.createMainWidget=function(t){return new Ir(t,this)},e}(gi),kr=function(n){function e(t,i){var r,o,a,s=n.call(this,t,i)||this;return s._dragFlag=!1,s._dragStartY=0,s._topPaneHeight=0,s._bottomPaneHeight=0,s._topPane=null,s._bottomPane=null,s._pressedMouseMoveEvent=(r=s._pressedTouchMouseMoveEvent,o=20,a=0,function(){var l=Date.now();l-a>o&&(r.apply(this,arguments),a=l)}),s.registerEvent("touchStartEvent",s._mouseDownEvent.bind(s)).registerEvent("touchMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("touchEndEvent",s._mouseUpEvent.bind(s)).registerEvent("mouseDownEvent",s._mouseDownEvent.bind(s)).registerEvent("mouseUpEvent",s._mouseUpEvent.bind(s)).registerEvent("pressedMouseMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("mouseEnterEvent",s._mouseEnterEvent.bind(s)).registerEvent("mouseLeaveEvent",s._mouseLeaveEvent.bind(s)),s}return Y(e,n),e.prototype.getName=function(){return qt},e.prototype._mouseDownEvent=function(t){var i=this;this._dragFlag=!0,this._dragStartY=t.pageY;var r=this.getPane(),o=r.getChart();this._topPane=r.getTopPane(),this._bottomPane=r.getBottomPane();var a=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var s=a.findIndex(function(h){var p;return h.getId()===((p=i._topPane)===null||p===void 0?void 0:p.getId())}),l=s-1;l>-1;l--){var u=a[l];if(u.getOptions().state!=="minimize"){this._topPane=u;break}}if(this._bottomPane.getOptions().state==="minimize")for(s=a.findIndex(function(h){var p;return h.getId()===((p=i._bottomPane)===null||p===void 0?void 0:p.getId())}),l=s+1;l<a.length;l++){var c=a[l];if(c.getOptions().state!=="minimize"){this._bottomPane=c;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var i=t.pageY-this._dragStartY,r=i<0;if(E(this._topPane)&&E(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var a=null,s=null,l=0,u=0;r?(a=this._topPane,s=this._bottomPane,l=this._topPaneHeight,u=this._bottomPaneHeight):(a=this._bottomPane,s=this._topPane,l=this._bottomPaneHeight,u=this._topPaneHeight);var c=a.getOptions().minHeight;if(l>c){var h=Math.max(l-Math.abs(i),c),p=l-h;a.setBounding({height:h}),s.setBounding({height:u+p});var d=this.getPane(),g=d.getChart();g.getChartStore().executeAction("onPaneDrag",{paneId:d.getId()}),g.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getBottomPane().getOptions().dragEnabled){var i=t.getChart().getStyles().separator;return this.getContainer().style.background=i.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="transparent",!0)},e.prototype.createContainer=function(){return Tt("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,i,r){if(r===4||r===2){var o=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-o.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(qe),Dr=function(n){function e(t,i,r,o){var a=n.call(this,t,i)||this;return a.getContainer().style.overflow="",a._topPane=r,a._bottomPane=o,a._separatorWidget=new kr(a.getContainer(),a),a}return Y(e,n),e.prototype.setBounding=function(t){return Q(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var i=this.getBounding(),r=i.width,o=i.height,a=this.getChart().getStyles().separator,s=Tt("canvas",{width:"".concat(r,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=At(s);return s.width=r*u,s.height=o*u,l.scale(u,u),l.fillStyle=a.color,l.fillRect(0,0,r,o),s},e.prototype.updateImp=function(t,i,r){if(t===4||t===2){var o=this.getChart().getStyles().separator;i.style.backgroundColor=o.color,i.style.height="".concat(r.height,"px"),i.style.marginLeft="".concat(r.left,"px"),i.style.width="".concat(r.width,"px"),this._separatorWidget.update(t)}},e}(pi);function mi(){return typeof window<"u"&&window.navigator.userAgent.toLowerCase().includes("firefox")}function be(){return typeof window<"u"&&/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var yi=500,Ar=500,Fr=500,Br=5,Rr=5,_i=5,xi=30,we=0,Lr=1,Or=2,Wr=function(){function n(e,t,i){var r=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!be(),this._onFirefoxOutsideMouseUp=function(o){r._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){r._firesTouchEvents(o)?(++r._tapCount,r._tapTimeoutId!==null&&r._tapCount>1&&(r._mouseTouchMoveWithDownInfo(r._getCoordinate(o),r._tapCoordinate).manhattanDistance<xi&&!r._cancelTap&&r._processEvent(r._makeCompatEvent(o),r._handler.doubleTapEvent),r._resetTapTimeout())):(++r._clickCount,r._clickTimeoutId!==null&&r._clickCount>1&&(r._mouseTouchMoveWithDownInfo(r._getCoordinate(o),r._clickCoordinate).manhattanDistance<_i&&!r._cancelClick&&r._processEvent(r._makeCompatEvent(o),r._handler.mouseDoubleClickEvent),r._resetClickTimeout()))},this._target=e,this._handler=t,this._options=i,this._init()}return n.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},n.prototype._mouseEnterHandler=function(e){var t,i,r,o=this;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(r=this._unsubscribeContextMenu)===null||r===void 0||r.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){o._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){o._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){o._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},n.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},n.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},n.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},n.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(!E(this._handler.mouseWheelHortEvent)||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(!E(this._handler.mouseWheelVertEvent))return;var t=-e.deltaY/100;if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(t!==0){var i=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),i)}}},n.prototype._contextMenuHandler=function(e){this._preventDefault(e)},n.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),r=i.xOffset,o=i.yOffset,a=i.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(a<Rr)){if(!this._touchMoveExceededManhattanDistance){var s=.5*r,l=o>=s&&!this._options.treatVertDragAsPageScroll(),u=s>o&&!this._options.treatHorzDragAsPageScroll();l||u||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},n.prototype._mouseMoveWithDownHandler=function(e){e.button===we&&(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate).manhattanDistance>=Br&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent))},n.prototype._mouseTouchMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return{xOffset:i,yOffset:r,manhattanDistance:i+r}},n.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(e,t);this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance<xi&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||(this._processEvent(i,this._handler.tapEvent),E(this._handler.tapEvent)&&this._preventDefault(e)),this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},n.prototype._mouseUpHandler=function(e){if(e.button===we){var t=this._makeCompatEvent(e);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),mi()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._firesTouchEvents(e)||(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance<_i&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent))}},n.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},n.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var r=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),Ar),this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),yi),this._tapCoordinate=this._getCoordinate(t))}},n.prototype._mouseDownHandler=function(e){if(e.button===Or)return this._preventDefault(e),void this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);if(e.button===we){var t=this._target.ownerDocument.documentElement;mi()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),r=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",r)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",r),this._mousePressed=!0,this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),yi),this._clickCoordinate=this._getCoordinate(e)))}},n.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,i=function(r){e._handler.mouseDownOutsideEvent!=null&&(r.composed&&e._target.contains(r.composedPath()[0])||r.target!==null&&e._target.contains(r.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0}),be()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(r){if(r.button===Lr)return r.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},n.prototype._initPinch=function(){var e=this;(E(this._handler.pinchStartEvent)||E(this._handler.pinchEvent)||E(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",function(t){e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(t.touches.length===2&&e._startPinchMiddleCoordinate!==null&&E(e._handler.pinchEvent)){var i=e._getTouchDistance(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(F(F({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},n.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},n.prototype._startPinch=function(e){var t=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),E(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},n.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,E(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},n.prototype._mouseLeaveHandler=function(e){var t,i,r;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(r=this._unsubscribeContextMenu)===null||r===void 0||r.call(this),this._firesTouchEvents(e)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!be())},n.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},n.prototype._firesTouchEvents=function(e){var t;return E((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+Fr},n.prototype._processEvent=function(e,t){t?.call(this._handler,e)},n.prototype._makeCompatEvent=function(e,t){var i=this,r=t??e,o=this._target.getBoundingClientRect();return{x:r.clientX-o.left,y:r.clientY-o.top,pageX:r.pageX,pageY:r.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click"&&e.type!=="wheel",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},n.prototype._getTouchDistance=function(e,t){var i=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(i*i+r*r)},n.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},n.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},n.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},n.prototype._touchWithId=function(e,t){for(var i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null},n}(),Vr=function(){function n(e,t){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(r){if(r.shiftKey)switch(r.code){case"Equal":i._chart.getChartStore().zoom(.5);break;case"Minus":i._chart.getChartStore().zoom(-.5);break;case"ArrowLeft":(o=i._chart.getChartStore()).startScroll(),o.scroll(-3*o.getBarSpace().bar);break;case"ArrowRight":var o;(o=i._chart.getChartStore()).startScroll(),o.scroll(3*o.getBarSpace().bar)}},this._container=e,this._chart=t,this._event=new Wr(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return n.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},n.prototype.pinchEvent=function(e,t){var i=this._findWidgetByEvent(e),r=i.pane,o=i.widget;if(r?.getId()!==et&&o?.getName()===lt){var a=this._makeWidgetEvent(e,o),s=5*(t-this._pinchScale);return this._pinchScale=t,this._chart.getChartStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},n.prototype.mouseWheelHortEvent=function(e,t){var i=this._chart.getChartStore();return i.startScroll(),i.scroll(t),!0},n.prototype.mouseWheelVertEvent=function(e,t){var i=this._findWidgetByEvent(e).widget,r=this._makeWidgetEvent(e,i);return i?.getName()===lt&&(this._chart.getChartStore().zoom(t,{x:r.x,y:r.y}),!0)},n.prototype.mouseDownEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,r=t.widget;if(this._mouseDownWidget=r,r!==null){var o=this._makeWidgetEvent(e,r);switch(r.getName()){case qt:return r.dispatchEvent("mouseDownEvent",o);case lt:var a=i.getAxisComponent();if(!a.getAutoCalcTickFlag()){var s=a.getRange();this._prevYAxisRange=F({},s)}return this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),r.dispatchEvent("mouseDownEvent",o);case Pt:return this._processXAxisScrollStartEvent(r,o);case bt:return this._processYAxisScaleStartEvent(r,o)}}return!1},n.prototype.mouseMoveEvent=function(e){var t,i,r,o=this._findWidgetByEvent(e),a=o.pane,s=o.widget,l=this._makeWidgetEvent(e,s);if(((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())===a?.getId()&&((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())===s?.getName()||(s?.dispatchEvent("mouseEnterEvent",l),(r=this._mouseMoveTriggerWidgetInfo.widget)===null||r===void 0||r.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null)switch(s.getName()){case lt:var u=s.dispatchEvent("mouseMoveEvent",l),c={x:l.x,y:l.y,paneId:a?.getId()};return u?(s.getForceCursor()!=="pointer"&&(c=void 0),s.setCursor("pointer")):s.setCursor("crosshair"),this._chart.getChartStore().setCrosshair(c),u;case qt:case Pt:case bt:return u=s.dispatchEvent("mouseMoveEvent",l),this._chart.getChartStore().setCrosshair(),u}return!1},n.prototype.pressedMouseMoveEvent=function(e){var t,i;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===qt)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var r=this._findWidgetByEvent(e),o=r.pane,a=r.widget;if(a!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===o?.getId()&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===a.getName()){var s=this._makeWidgetEvent(e,a);switch(a.getName()){case lt:var l=void 0,u=a.dispatchEvent("pressedMouseMoveEvent",s);return u||this._processMainScrollingEvent(a,s),u&&a.getForceCursor()!=="pointer"||(l={x:s.x,y:s.y,paneId:o?.getId()}),this._chart.getChartStore().setCrosshair(l,{forceInvalidate:!0}),u;case Pt:return this._processXAxisScrollingEvent(a,s);case bt:return this._processYAxisScalingEvent(a,s)}}return!1},n.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var r=this._makeWidgetEvent(e,t);switch(t.getName()){case lt:case qt:case Pt:case bt:i=t.dispatchEvent("mouseUpEvent",r)}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},n.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var i=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",i)}return!1},n.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var r=this._makeWidgetEvent(e,t);switch(t.getName()){case lt:case Pt:case bt:i=t.dispatchEvent("mouseRightClickEvent",r)}i&&this._chart.updatePane(1)}return!1},n.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,r=t.widget;if(r!==null)switch(r.getName()){case lt:var o=this._makeWidgetEvent(e,r);return r.dispatchEvent("mouseDoubleClickEvent",o);case bt:var a=i.getAxisComponent();if(!a.getAutoCalcTickFlag())return a.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0}return!1},n.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},n.prototype.touchStartEvent=function(e){var t,i=this._findWidgetByEvent(e),r=i.pane,o=i.widget;if(o!==null){var a=this._makeWidgetEvent(e,o);switch((t=a.preventDefault)===null||t===void 0||t.call(a),o.getName()){case lt:var s=this._chart.getChartStore();if(o.dispatchEvent("mouseDownEvent",a))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,s.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(ke(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var l=r.getAxisComponent();if(!l.getAutoCalcTickFlag()){var u=l.getRange();this._prevYAxisRange=F({},u)}if(this._startScrollCoordinate={x:a.x,y:a.y},s.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var c=a.x-this._touchCoordinate.x,h=a.y-this._touchCoordinate.y;Math.sqrt(c*c+h*h)<10?(this._touchCoordinate={x:a.x,y:a.y},s.setCrosshair({x:a.x,y:a.y,paneId:r?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,s.setCrosshair())}return!0;case Pt:return this._processXAxisScrollStartEvent(o,a);case bt:return this._processYAxisScaleStartEvent(o,a)}}return!1},n.prototype.touchMoveEvent=function(e){var t,i=this._findWidgetByEvent(e),r=i.pane,o=i.widget;if(o!==null){var a=this._makeWidgetEvent(e,o);(t=a.preventDefault)===null||t===void 0||t.call(a);var s=o.getName(),l=this._chart.getChartStore();switch(s){case lt:return o.dispatchEvent("pressedMouseMoveEvent",a)?(l.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?l.setCrosshair({x:a.x,y:a.y,paneId:r?.getId()}):this._processMainScrollingEvent(o,a),!0);case Pt:return this._processXAxisScrollingEvent(o,a);case bt:return this._processYAxisScalingEvent(o,a)}}return!1},n.prototype.touchEndEvent=function(e){var t=this,i=this._findWidgetByEvent(e).widget;if(i!==null){var r=this._makeWidgetEvent(e,i);switch(i.getName()){case lt:if(i.dispatchEvent("mouseUpEvent",r),this._startScrollCoordinate!==null){var o=new Date().getTime()-this._flingStartTime,a=(r.x-this._startScrollCoordinate.x)/(o>0?o:1)*20;if(o<200&&Math.abs(a)>0){var s=this._chart.getChartStore(),l=function(){t._flingScrollRequestId=ee(function(){s.startScroll(),s.scroll(a),a*=.975,Math.abs(a)<1?t._flingScrollRequestId!==null&&(ke(t._flingScrollRequestId),t._flingScrollRequestId=null):l()})};l()}}return!0;case Pt:case bt:i.dispatchEvent("mouseUpEvent",r)&&this._chart.updatePane(1)}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},n.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,r=t.widget,o=!1;if(r!==null){var a=this._makeWidgetEvent(e,r),s=r.dispatchEvent("mouseClickEvent",a);if(r.getName()===lt){var l=this._makeWidgetEvent(e,r),u=this._chart.getChartStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,{notInvalidate:!0}),o=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:l.x,y:l.y},u.setCrosshair({x:l.x,y:l.y,paneId:i?.getId()},{notInvalidate:!0}),o=!0),this._touchCancelCrosshair=!1)}(o||s)&&this._chart.updatePane(1)}return o},n.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},n.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,r=t.widget;if(r!==null&&r.getName()===lt){var o=this._makeWidgetEvent(e,r);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:i?.getId()}),!0}return!1},n.prototype._processMainScrollingEvent=function(e,t){if(this._startScrollCoordinate!==null){var i=e.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!i.getAutoCalcTickFlag()&&i.scrollZoomEnabled){var r=this._prevYAxisRange,o=r.from,a=r.to,s=r.range*((i.reverse?this._startScrollCoordinate.y-t.y:t.y-this._startScrollCoordinate.y)/e.getBounding().height),l=o+s,u=a+s,c=i.valueToRealValue(l,{range:this._prevYAxisRange}),h=i.valueToRealValue(u,{range:this._prevYAxisRange}),p=i.realValueToDisplayValue(c,{range:this._prevYAxisRange}),d=i.realValueToDisplayValue(h,{range:this._prevYAxisRange});i.setRange({from:l,to:u,range:u-l,realFrom:c,realTo:h,realRange:h-c,displayFrom:p,displayTo:d,displayRange:d-p})}var g=t.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(g)}},n.prototype._processXAxisScrollStartEvent=function(e,t){var i=e.dispatchEvent("mouseDownEvent",t);return i&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:t.x,y:t.y},this._xAxisStartScaleDistance=t.pageX,i},n.prototype._processXAxisScrollingEvent=function(e,t){var i,r=e.dispatchEvent("pressedMouseMoveEvent",t);if(r)this._chart.updatePane(1);else if(e.getPane().getAxisComponent().scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var o=this._xAxisStartScaleDistance/t.pageX;if(Number.isFinite(o)){var a=10*(o-this._xAxisScale);this._xAxisScale=o,this._chart.getChartStore().zoom(a,(i=this._xAxisStartScaleCoordinate)!==null&&i!==void 0?i:void 0)}}return r},n.prototype._processYAxisScaleStartEvent=function(e,t){var i=e.dispatchEvent("mouseDownEvent",t);i&&this._chart.updatePane(1);var r=e.getPane().getAxisComponent().getRange();return this._prevYAxisRange=F({},r),this._yAxisStartScaleDistance=t.pageY,i},n.prototype._processYAxisScalingEvent=function(e,t){var i=e.dispatchEvent("pressedMouseMoveEvent",t);if(i)this._chart.updatePane(1);else{var r=e.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&r.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){var o=this._prevYAxisRange,a=o.from,s=o.to,l=o.range,u=l*(t.pageY/this._yAxisStartScaleDistance),c=(u-l)/2,h=a-c,p=s+c,d=r.valueToRealValue(h,{range:this._prevYAxisRange}),g=r.valueToRealValue(p,{range:this._prevYAxisRange}),v=r.realValueToDisplayValue(d,{range:this._prevYAxisRange}),f=r.realValueToDisplayValue(g,{range:this._prevYAxisRange});r.setRange({from:h,to:p,range:u,realFrom:d,realTo:g,realRange:g-d,displayFrom:v,displayTo:f,displayRange:f-v}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return i},n.prototype._findWidgetByEvent=function(e){var t,i,r,o,a=e.x,s=e.y,l=this._chart.getSeparatorPanes(),u=this._chart.getStyles().separator.size;try{for(var c=mt(l),h=c.next();!h.done;h=c.next()){var p=h.value[1],d=(_=p.getBounding()).top-Math.round((7-u)/2);if(a>=_.left&&a<=_.left+_.width&&s>=d&&s<=d+7)return{pane:p,widget:p.getWidget()}}}catch(P){t={error:P}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}var g=this._chart.getDrawPanes(),v=null;try{for(var f=mt(g),x=f.next();!x.done;x=f.next()){var _,m=x.value;if(a>=(_=m.getBounding()).left&&a<=_.left+_.width&&s>=_.top&&s<=_.top+_.height){v=m;break}}}catch(P){r={error:P}}finally{try{x&&!x.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}var b=null;if(v!==null){if(!E(b)){var w=v.getMainWidget(),C=w.getBounding();a>=C.left&&a<=C.left+C.width&&s>=C.top&&s<=C.top+C.height&&(b=w)}if(!E(b)){var y=v.getYAxisWidget();if(y!==null){var T=y.getBounding();a>=T.left&&a<=T.left+T.width&&s>=T.top&&s<=T.top+T.height&&(b=y)}}}return{pane:v,widget:b}},n.prototype._makeWidgetEvent=function(e,t){var i,r,o,a=(i=t?.getBounding())!==null&&i!==void 0?i:null;return F(F({},e),{x:e.x-((r=a?.left)!==null&&r!==void 0?r:0),y:e.y-((o=a?.top)!==null&&o!==void 0?o:0)})},n.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},n}(),bi=function(){function n(e,t){this._chartBounding=te(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._cacheYAxisWidth={left:0,right:0},this._initContainer(e),this._chartEvent=new Vr(this._chartContainer,this),this._chartStore=new tr(this,t),this._initPanes(t),this._layout()}return n.prototype._initContainer=function(e){this._container=e,this._chartContainer=Tt("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer),this._cacheChartBounding()},n.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},n.prototype._initPanes=function(e){var t,i=this,r=(t=e?.layout)!==null&&t!==void 0?t:[{type:"candle"}],o=function(s){var l,u;if(!E(i._candlePane)){var c=(l=s.options)!==null&&l!==void 0?l:{};Q(c,{id:at}),i._candlePane=i._createPane(Er,at,c),((u=s.content)!==null&&u!==void 0?u:[]).forEach(function(h){i.createIndicator(h,!0,c)})}},a=function(s){if(!E(i._xAxisPane)){var l=i._createPane(Mr,et,s??{});i._xAxisPane=l}};r.forEach(function(s){var l,u,c;switch(s.type){case"candle":o(s);break;case"indicator":var h=(l=s.content)!==null&&l!==void 0?l:[];if(h.length>0){var p=(c=(u=s.options)===null||u===void 0?void 0:u.id)!==null&&c!==void 0?c:null;E(p)&&(p=ie(Ue));var d=F(F({},s.options),{id:p});h.forEach(function(g){i.createIndicator(g,!0,d)})}break;case"xAxis":a(s.options)}}),o({}),a({order:Number.MAX_SAFE_INTEGER})},n.prototype._createPane=function(e,t,i){var r=new e(this,t,i??{});return this._drawPanes.push(r),r},n.prototype._recalculatePaneHeight=function(e,t,i){if(i===0)return!1;var r=this._drawPanes.filter(function(h){var p=h.getId();return h.getOptions().state==="normal"&&p!==e.getId()&&p!==et}),o=r.length;if(o===0)return!1;if(e.getId()!==at&&E(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var a=this._candlePane.getBounding().height;if(a>0){var s=this._candlePane.getOptions().minHeight,l=a+i;l<s&&(t-=a+i-(l=s)),this._candlePane.setBounding({height:l})}}else{var u=i,c=Math.floor(i/o);r.forEach(function(h,p){var d=h.getBounding().height,g=0;(g=p===o-1?d+u:d+c)<h.getOptions().minHeight&&(g=h.getOptions().minHeight),h.setBounding({height:g}),u-=g-d}),Math.abs(u)>0&&(t-=u)}return e.setBounding({height:t}),!0},n.prototype.getDrawPaneById=function(e){if(e===at)return this._candlePane;if(e===et)return this._xAxisPane;var t=this._drawPanes.find(function(i){return i.getId()===e});return t??null},n.prototype.getContainer=function(){return this._container},n.prototype.getChartStore=function(){return this._chartStore},n.prototype.getXAxisPane=function(){return this._xAxisPane},n.prototype.getDrawPanes=function(){return this._drawPanes},n.prototype.getSeparatorPanes=function(){return this._separatorPanes},n.prototype.layout=function(e){var t,i,r,o,a,s,l,u=this;(t=e.sort)!==null&&t!==void 0&&t&&(this._layoutOptions.sort=e.sort),(i=e.measureHeight)!==null&&i!==void 0&&i&&(this._layoutOptions.measureHeight=e.measureHeight),(r=e.measureWidth)!==null&&r!==void 0&&r&&(this._layoutOptions.measureWidth=e.measureWidth),(o=e.update)!==null&&o!==void 0&&o&&(this._layoutOptions.update=e.update),(a=e.buildYAxisTick)!==null&&a!==void 0&&a&&(this._layoutOptions.buildYAxisTick=e.buildYAxisTick),(s=e.cacheYAxisWidth)!==null&&s!==void 0&&s&&(this._layoutOptions.cacheYAxisWidth=e.cacheYAxisWidth),(l=e.buildYAxisTick)!==null&&l!==void 0&&l&&(this._layoutOptions.forceBuildYAxisTick=e.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(c){u._layout(),u._layoutPending=!1}).catch(function(c){}))},n.prototype._layout=function(){var e=this,t=this._layoutOptions,i=t.sort,r=t.measureHeight,o=t.measureWidth,a=t.update,s=t.buildYAxisTick,l=t.cacheYAxisWidth,u=t.forceBuildYAxisTick;if(i){for(;E(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(k,I){return k.getOptions().order-I.getOptions().order});var c=null;this._drawPanes.forEach(function(k){if(k.getId()!==et){if(E(c)){var I=new Dr(e,"",c,k);e._chartContainer.appendChild(I.getContainer()),e._separatorPanes.set(k,I)}c=k}e._chartContainer.appendChild(k.getContainer())})}if(r){var h=this._chartBounding.height,p=this.getStyles().separator.size,d=this._xAxisPane.getAxisComponent().getAutoSize(),g=h-d;g<0&&(g=0),this._drawPanes.forEach(function(k){var I=k.getId();if(E(e._separatorPanes.get(k))&&(g-=p),I!==et&&I!==at&&k.getVisible()){var D=k.getBounding().height;D>g?(D=g,g=0):g-=D,k.setBounding({height:D})}}),this._candlePane.setBounding({height:Math.max(g,0)}),this._xAxisPane.setBounding({height:d});var v=0;this._drawPanes.forEach(function(k){var I=e._separatorPanes.get(k);E(I)&&(I.setBounding({height:p,top:v}),v+=p),k.setBounding({top:v}),v+=k.getBounding().height})}var f=o;if((s||u)&&this._drawPanes.forEach(function(k){var I=k.getAxisComponent().buildTicks(u);f||(f=I)}),f){var x=this._chartBounding.width,_=this.getStyles(),m=0,b=!0,w=0,C=!0;this._drawPanes.forEach(function(k){if(k.getId()!==et){var I=k.getAxisComponent(),D=I.inside,O=I.getAutoSize();I.position==="left"?(m=Math.max(m,O),D&&(b=!1)):(w=Math.max(w,O),D&&(C=!1))}}),l&&(m=Math.max(this._cacheYAxisWidth.left,m),w=Math.max(this._cacheYAxisWidth.right,w)),this._cacheYAxisWidth.left=m,this._cacheYAxisWidth.right=w;var y=x,T=0,P=0;b&&(y-=m,T=m),C&&(y-=w,P=w),this._chartStore.setTotalBarSpace(y);var S={width:x},A={width:y,left:T,right:P},L={width:m},M={width:w},B=_.separator.fill,R={};R=B?S:A,this._drawPanes.forEach(function(k){var I;(I=e._separatorPanes.get(k))===null||I===void 0||I.setBounding(R),k.setBounding(S,A,L,M)})}a&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1}},n.prototype.updatePane=function(e,t){var i=this;if(E(t)){var r=this.getDrawPaneById(t);r?.update(e)}else this._drawPanes.forEach(function(o){var a;o.update(e),(a=i._separatorPanes.get(o))===null||a===void 0||a.update(e)})},n.prototype.crosshairChange=function(e){var t=this;if(this._chartStore.hasAction("onCrosshairChange")){var i={};this._drawPanes.forEach(function(r){var o=r.getId(),a={};t._chartStore.getIndicatorsByPaneId(o).forEach(function(s){var l,u=s.result;a[s.name]=u[(l=e.dataIndex)!==null&&l!==void 0?l:u.length-1]}),i[o]=a}),G(e.paneId)&&this._chartStore.executeAction("onCrosshairChange",{crosshair:e,indicatorData:i})}},n.prototype.getDom=function(e,t){var i,r;if(!E(e))return this._chartContainer;var o=this.getDrawPaneById(e);if(E(o))switch(t??"root"){case"root":return o.getContainer();case"main":return o.getMainWidget().getContainer();case"yAxis":return(r=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&r!==void 0?r:null}return null},n.prototype.getSize=function(e,t){var i,r;if(!E(e))return this._chartBounding;var o=this.getDrawPaneById(e);if(E(o))switch(t??"root"){case"root":return o.getBounding();case"main":return o.getMainWidget().getBounding();case"yAxis":return(r=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&r!==void 0?r:null}return null},n.prototype.setSymbol=function(e){this._chartStore.setSymbol(e)},n.prototype.getSymbol=function(){return this._chartStore.getSymbol()},n.prototype.setPeriod=function(e){this._chartStore.setPeriod(e)},n.prototype.getPeriod=function(){return this._chartStore.getPeriod()},n.prototype.setStyles=function(e){var t=this;this._setOptions(function(){t._chartStore.setStyles(e)})},n.prototype.getStyles=function(){return this._chartStore.getStyles()},n.prototype.setFormatter=function(e){var t=this;this._setOptions(function(){t._chartStore.setFormatter(e)})},n.prototype.getFormatter=function(){return this._chartStore.getFormatter()},n.prototype.setLocale=function(e){var t=this;this._setOptions(function(){t._chartStore.setLocale(e)})},n.prototype.getLocale=function(){return this._chartStore.getLocale()},n.prototype.setTimezone=function(e){var t=this;this._setOptions(function(){t._chartStore.setTimezone(e)})},n.prototype.getTimezone=function(){return this._chartStore.getTimezone()},n.prototype.setThousandsSeparator=function(e){var t=this;this._setOptions(function(){t._chartStore.setThousandsSeparator(e)})},n.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},n.prototype.setDecimalFold=function(e){var t=this;this._setOptions(function(){t._chartStore.setDecimalFold(e)})},n.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},n.prototype._setOptions=function(e){e(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},n.prototype.setOffsetRightDistance=function(e){this._chartStore.setOffsetRightDistance(e,!0)},n.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},n.prototype.setMaxOffsetLeftDistance=function(e){e<0||this._chartStore.setMaxOffsetLeftDistance(e)},n.prototype.setMaxOffsetRightDistance=function(e){e<0||this._chartStore.setMaxOffsetRightDistance(e)},n.prototype.setLeftMinVisibleBarCount=function(e){e<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(e))},n.prototype.setRightMinVisibleBarCount=function(e){e<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(e))},n.prototype.setBarSpace=function(e){this._chartStore.setBarSpace(e)},n.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},n.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},n.prototype.resetData=function(){this._chartStore.resetData()},n.prototype.getDataList=function(){return this._chartStore.getDataList()},n.prototype.setDataLoader=function(e){this._chartStore.setDataLoader(e)},n.prototype.createIndicator=function(e,t,i){var r,o=G(e)?{name:e}:e;if(Ve(o.name)===null)return null;var a=i??{};if(G(a.id)||(a.id=ie(Ue)),G(o.id)||(o.id=ie(o.name)),this._chartStore.addIndicator(o,a.id,t!=null&&t)){var s=!1;return E(this.getDrawPaneById(a.id))||(this._createPane(vi,a.id,a),(r=a.height)!==null&&r!==void 0||(a.height=100),s=!0),this.setPaneOptions(a),this.layout({sort:s,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),o.id}return null},n.prototype.overrideIndicator=function(e){return this._chartStore.overrideIndicator(e)},n.prototype.getIndicators=function(e){return this._chartStore.getIndicatorsByFilter(e??{})},n.prototype.removeIndicator=function(e){var t=this,i=this._chartStore.removeIndicator(e??{});if(i){var r=!1,o=[];this._drawPanes.forEach(function(a){var s=a.getId();s!==at&&s!==et&&o.push(s)}),o.forEach(function(a){if(!t._chartStore.hasIndicators(a)){var s=t._drawPanes.findIndex(function(u){return u.getId()===a}),l=t._drawPanes[s];E(l)&&(r=!0,t._recalculatePaneHeight(l,0,l.getBounding().height),t._drawPanes.splice(s,1),l.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:r,measureHeight:r,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return i},n.prototype.createOverlay=function(e){var t=this,i=[],r=[],o=function(s){E(s.paneId)&&t.getDrawPaneById(s.paneId)!==null?r.push(!0):(s.paneId=at,r.push(!1)),i.push(s)};G(e)?o({name:e}):xt(e)?e.forEach(function(s){var l=null;l=G(s)?{name:s}:s,o(l)}):o(e);var a=this._chartStore.addOverlays(i,r);return xt(e)?a:a[0]},n.prototype.getOverlays=function(e){return this._chartStore.getOverlaysByFilter(e??{})},n.prototype.overrideOverlay=function(e){return this._chartStore.overrideOverlay(e)},n.prototype.removeOverlay=function(e){return this._chartStore.removeOverlay(e??{})},n.prototype.setPaneOptions=function(e){var t,i,r,o=this,a=!1,s=!1,l=E(e.id),u=function(d){var g=d.getId();if(l&&e.id===g||!l){if(g!==et){if(W(e.height)&&e.height>0){var v=Math.max((r=e.minHeight)!==null&&r!==void 0?r:d.getOptions().minHeight,0),f=Math.max(v,e.height);s=!0,a=!0,d.setOriginalBounding({height:f}),c._recalculatePaneHeight(d,f,-f)}if(E(e.state)&&d.getOptions().state!==e.state){a=!0,s=!0;var x=e.state;switch(x){case"maximize":if(!E(c._drawPanes.find(function(C){var y=C.getId();return C.getOptions().state==="maximize"&&y!==et}))){d.getOptions().state==="normal"&&d.setOriginalBounding({height:d.getBounding().height}),d.setOptions({state:x});var _=c._chartBounding.height;d.setBounding({height:_-c._xAxisPane.getBounding().height}),c._drawPanes.forEach(function(C){var y;C.getId()!==et&&C.getId()!==g&&(C.setBounding({height:C.getOriginalBounding().height}),C.setVisible(!1),(y=o._separatorPanes.get(C))===null||y===void 0||y.setVisible(!1))})}break;case"minimize":f=d.getBounding().height;var m=d.getOptions().state,b=f-30;m==="maximize"&&(b=d.getOriginalBounding().height-30),c._recalculatePaneHeight(d,30,b)&&(m==="normal"&&d.setOriginalBounding({height:f}),d.setOptions({state:x})),c._drawPanes.forEach(function(C){var y;C.getId()!==et&&(C.setVisible(!0),(y=o._separatorPanes.get(C))===null||y===void 0||y.setVisible(!0))});break;default:f=d.getOriginalBounding().height,c._recalculatePaneHeight(d,f,d.getBounding().height-f)&&d.setOptions({state:x}),c._drawPanes.forEach(function(C){var y;C.getId()!==et&&(C.setVisible(!0),(y=o._separatorPanes.get(C))===null||y===void 0||y.setVisible(!0))})}}}E(e.axis)&&(s=!0);var w=F({},e);if(delete w.state,d.setOptions(w),g===e.id)return"break"}},c=this;try{for(var h=mt(this._drawPanes),p=h.next();!p.done&&u(p.value)!=="break";p=h.next());}catch(d){t={error:d}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}s&&this.layout({measureHeight:a,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},n.prototype.getPaneOptions=function(e){var t;if(E(e)){var i=this.getDrawPaneById(e);return(t=i?.getOptions())!==null&&t!==void 0?t:null}return this._drawPanes.map(function(r){return r.getOptions()})},n.prototype.setZoomEnabled=function(e){this._chartStore.setZoomEnabled(e)},n.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},n.prototype.setScrollEnabled=function(e){this._chartStore.setScrollEnabled(e)},n.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},n.prototype.scrollByDistance=function(e,t){var i=this,r=W(t)&&t>0?t:0;if(this._chartStore.startScroll(),r>0){var o=new he({duration:r});o.doFrame(function(a){var s=e*(a/r);i._chartStore.scroll(s)}),o.start()}else this._chartStore.scroll(e)},n.prototype.scrollToRealTime=function(e){var t=this._chartStore.getBarSpace().bar,i=(this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/t)*t;this.scrollByDistance(i,e)},n.prototype.scrollToDataIndex=function(e,t){var i=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-e))*this._chartStore.getBarSpace().bar;this.scrollByDistance(i,t)},n.prototype.scrollToTimestamp=function(e,t){var i=pe(this.getDataList(),"timestamp",e);this.scrollToDataIndex(i,t)},n.prototype.zoomAtCoordinate=function(e,t,i){var r=this,o=W(i)&&i>0?i:0,a=this._chartStore.getBarSpace().bar,s=a*e-a;if(o>0){var l=0,u=new he({duration:o});u.doFrame(function(c){var h=s*(c/o),p=(h-l)/r._chartStore.getBarSpace().bar*10;r._chartStore.zoom(p,t),l=h}),u.start()}else this._chartStore.zoom(s/a*10,t)},n.prototype.zoomAtDataIndex=function(e,t,i){var r=this._chartStore.dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:r,y:0},i)},n.prototype.zoomAtTimestamp=function(e,t,i){var r=pe(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,r,i)},n.prototype.convertToPixel=function(e,t){var i,r=this,o=t??{},a=o.paneId,s=a===void 0?at:a,l=o.absolute,u=l!==void 0&&l,c=[];if(s!==et){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=[].concat(e),g=this._xAxisPane.getAxisComponent(),v=h.getAxisComponent();c=d.map(function(f){var x={},_=f.dataIndex;if(W(f.timestamp)&&(_=r._chartStore.timestampToDataIndex(f.timestamp)),W(_)&&(x.x=g.convertToPixel(_)),W(f.value)){var m=v.convertToPixel(f.value);x.y=u?p.top+m:m}return x})}}return xt(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},n.prototype.convertFromPixel=function(e,t){var i,r=this,o=t??{},a=o.paneId,s=a===void 0?at:a,l=o.absolute,u=l!==void 0&&l,c=[];if(s!==et){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=[].concat(e),g=this._xAxisPane.getAxisComponent(),v=h.getAxisComponent();c=d.map(function(f){var x,_={};if(W(f.x)){var m=g.convertFromPixel(f.x);_.dataIndex=m,_.timestamp=(x=r._chartStore.dataIndexToTimestamp(m))!==null&&x!==void 0?x:void 0}if(W(f.y)){var b=u?f.y-p.top:f.y;_.value=v.convertFromPixel(b)}return _})}}return xt(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},n.prototype.executeAction=function(e,t){var i;if(e==="onCrosshairChange"){var r=F({},t);(i=r.paneId)!==null&&i!==void 0||(r.paneId=at),this._chartStore.setCrosshair(r,{notExecuteAction:!0})}},n.prototype.subscribeAction=function(e,t){this._chartStore.subscribeAction(e,t)},n.prototype.unsubscribeAction=function(e,t){this._chartStore.unsubscribeAction(e,t)},n.prototype.getConvertPictureUrl=function(e,t,i){var r=this,o=this._chartBounding,a=o.width,s=o.height,l=Tt("canvas",{width:"".concat(a,"px"),height:"".concat(s,"px"),boxSizing:"border-box"}),u=l.getContext("2d"),c=At(l);l.width=a*c,l.height=s*c,u.scale(c,c),u.fillStyle=i??"#FFFFFF",u.fillRect(0,0,a,s);var h=e!=null&&e;return this._drawPanes.forEach(function(p){var d=r._separatorPanes.get(p);if(E(d)){var g=d.getBounding();u.drawImage(d.getImage(h),g.left,g.top,g.width,g.height)}var v=p.getBounding();u.drawImage(p.getImage(h),0,v.top,a,v.height)}),l.toDataURL("image/".concat(t??"jpeg"))},n.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},n.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(e){e.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._chartStore.destroy(),this._container.removeChild(this._chartContainer)},n}(),ae=new Map,zr=1,Nr={clone:Vt,merge:Q,isString:G,isNumber:W,isValid:E,isObject:vt,isArray:xt,isFunction:st,isBoolean:Xt,formatValue:nt,formatPrecision:ot,formatBigNumber:Ee,formatDate:Ce,formatThousands:Te,formatFoldDecimal:Se,calcTextWidth:ft,getLinearSlopeIntercept:ne,getLinearYFromSlopeIntercept:fe,getLinearYFromCoordinates:Ut,checkCoordinateOnArc:ti,checkCoordinateOnCircle:je,checkCoordinateOnLine:Ye,checkCoordinateOnPolygon:Qe,checkCoordinateOnRect:ye,checkCoordinateOnText:Ke};rt.dispose=function(n){var e,t,i=null;if(n instanceof bi)i=n.id;else{var r=null;i=(e=(r=G(n)?document.getElementById(n):n)==null?void 0:r.getAttribute("k-line-chart-id"))!==null&&e!==void 0?e:null}i!==null&&((t=ae.get(i))===null||t===void 0||t.destroy(),ae.delete(i))},rt.getFigureClass=function(n){var e;return(e=jt[n])!==null&&e!==void 0?e:null},rt.getOverlayClass=function(n){var e;return(e=Zt[n])!==null&&e!==void 0?e:null},rt.getSupportedFigures=function(){return Object.keys(jt)},rt.getSupportedIndicators=function(){return Object.keys(re)},rt.getSupportedLocales=function(){return Object.keys(oe)},rt.getSupportedOverlays=function(){return Object.keys(Zt)},rt.init=function(n,e){var t=null;if((t=G(n)?document.getElementById(n):n)===null)return null;var i=ae.get(t.id);if(E(i))return i;var r="k_line_chart_".concat(zr++);return(i=new bi(t,e)).id=r,t.setAttribute("k-line-chart-id",r),ae.set(r,i),i},rt.registerFigure=function(n){jt[n.name]=Ne.extend(n)},rt.registerIndicator=function(n){re[n.name]=Oe.extend(n)},rt.registerLocale=function(n,e){oe[n]=F(F({},oe[n]),e)},rt.registerOverlay=function(n){Zt[n.name]=ze.extend(n)},rt.registerStyles=function(n,e){Ge[n]=e},rt.registerXAxis=function(n){xe[n.name]=fi.extend(n)},rt.registerYAxis=function(n){_e[n.name]=Qt.extend(n)},rt.utils=Nr,rt.version=function(){return"10.0.0-alpha8"}});</script>
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f5f0d6d79a8fb0825e285ab72dc542cb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5737631e><!--[--><!----><!--]--><!--[--><span tabindex="-1" data-v-76b8043d></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-76b8043d>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5737631e data-v-4a0e59e0><div class="VPNavBar" data-v-4a0e59e0 data-v-8b43f5c4><div class="wrapper" data-v-8b43f5c4><div class="container" data-v-8b43f5c4><div class="title" data-v-8b43f5c4><div class="VPNavBarTitle has-sidebar" data-v-8b43f5c4 data-v-0a4011e2><a class="title" href="/en-US/" data-v-0a4011e2><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo-nav.svg" alt data-v-dc811db4><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-8b43f5c4><div class="content-body" data-v-8b43f5c4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8b43f5c4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8b43f5c4 data-v-d584bcdb><span id="main-nav-aria-label" class="visually-hidden" data-v-d584bcdb> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/en-US/guide/introduction" tabindex="0" data-v-d584bcdb data-v-428440c4><!--[--><span data-v-428440c4>Guide</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d584bcdb data-v-ac243a68><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-ac243a68><span class="text" data-v-ac243a68><!----><span data-v-ac243a68>API</span><span class="vpi-chevron-down text-icon" data-v-ac243a68></span></span></button><div class="menu" data-v-ac243a68><div class="VPMenu" data-v-ac243a68 data-v-dedda180><div class="items" data-v-dedda180><!--[--><!--[--><div class="VPMenuLink" data-v-dedda180 data-v-31cabb70><a class="VPLink link" href="/en-US/api/chart/init" data-v-31cabb70><!--[--><span data-v-31cabb70>Chart API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-dedda180 data-v-31cabb70><a class="VPLink link" href="/en-US/api/instance/getDom" data-v-31cabb70><!--[--><span data-v-31cabb70>Instance API</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://pro.klinecharts.com/en-US" target="_blank" rel="noreferrer" tabindex="0" data-v-d584bcdb data-v-428440c4><!--[--><span data-v-428440c4>Pro</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://preview.klinecharts.com/#en-US" target="_blank" rel="noreferrer" tabindex="0" data-v-d584bcdb data-v-428440c4><!--[--><span data-v-428440c4>Preview</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/customize" tabindex="0" data-v-d584bcdb data-v-428440c4><!--[--><span data-v-428440c4>Customize</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/sponsor" tabindex="0" data-v-d584bcdb data-v-428440c4><!--[--><span data-v-428440c4>Sponsor</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d584bcdb data-v-ac243a68><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-ac243a68><span class="text" data-v-ac243a68><!----><span data-v-ac243a68>10.0.0-alpha8</span><span class="vpi-chevron-down text-icon" data-v-ac243a68></span></span></button><div class="menu" data-v-ac243a68><div class="VPMenu" data-v-ac243a68 data-v-dedda180><div class="items" data-v-dedda180><!--[--><!--[--><div class="VPMenuLink" data-v-dedda180 data-v-31cabb70><a class="VPLink link vp-external-link-icon" href="https://v9.klinecharts.com/en-US" target="_blank" rel="noreferrer" data-v-31cabb70><!--[--><span data-v-31cabb70>9.x Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-dedda180 data-v-31cabb70><a class="VPLink link vp-external-link-icon" href="https://v8.klinecharts.com" target="_blank" rel="noreferrer" data-v-31cabb70><!--[--><span data-v-31cabb70>8.x Docs</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-8b43f5c4 data-v-5cc8fac0 data-v-ac243a68><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-ac243a68><span class="text" data-v-ac243a68><span class="vpi-languages option-icon" data-v-ac243a68></span><!----><span class="vpi-chevron-down text-icon" data-v-ac243a68></span></span></button><div class="menu" data-v-ac243a68><div class="VPMenu" data-v-ac243a68 data-v-dedda180><!----><!--[--><!--[--><div class="items" data-v-5cc8fac0><p class="title" data-v-5cc8fac0>🇬🇧 English</p><!--[--><div class="VPMenuLink" data-v-5cc8fac0 data-v-31cabb70><a class="VPLink link" href="/guide/figure" data-v-31cabb70><!--[--><span data-v-31cabb70>🇨🇳 简体中文</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-8b43f5c4 data-v-f0cc0e64><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f0cc0e64 data-v-4d9a4a8f data-v-da601859><span class="check" data-v-da601859><span class="icon" data-v-da601859><!--[--><span class="vpi-sun sun" data-v-4d9a4a8f></span><span class="vpi-moon moon" data-v-4d9a4a8f></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8b43f5c4 data-v-b55f7918 data-v-920f373e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-920f373e data-v-aee075d6><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-920f373e data-v-aee075d6><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/guide/feedback" aria-label target="_blank" rel="noopener" data-v-920f373e data-v-aee075d6><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8b43f5c4 data-v-4ef77927 data-v-ac243a68><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-ac243a68><span class="vpi-more-horizontal icon" data-v-ac243a68></span></button><div class="menu" data-v-ac243a68><div class="VPMenu" data-v-ac243a68 data-v-dedda180><!----><!--[--><!--[--><div class="group translations" data-v-4ef77927><p class="trans-title" data-v-4ef77927>🇬🇧 English</p><!--[--><div class="VPMenuLink" data-v-4ef77927 data-v-31cabb70><a class="VPLink link" href="/guide/figure" data-v-31cabb70><!--[--><span data-v-31cabb70>🇨🇳 简体中文</span><!--]--></a></div><!--]--></div><div class="group" data-v-4ef77927><div class="item appearance" data-v-4ef77927><p class="label" data-v-4ef77927>Appearance</p><div class="appearance-action" data-v-4ef77927><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4ef77927 data-v-4d9a4a8f data-v-da601859><span class="check" data-v-da601859><span class="icon" data-v-da601859><!--[--><span class="vpi-sun sun" data-v-4d9a4a8f></span><span class="vpi-moon moon" data-v-4d9a4a8f></span><!--]--></span></span></button></div></div></div><div class="group" data-v-4ef77927><div class="item social-links" data-v-4ef77927><div class="VPSocialLinks social-links-list" data-v-4ef77927 data-v-920f373e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-920f373e data-v-aee075d6><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-920f373e data-v-aee075d6><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/guide/feedback" aria-label target="_blank" rel="noopener" data-v-920f373e data-v-aee075d6><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8b43f5c4 data-v-d21089f2><span class="container" data-v-d21089f2><span class="top" data-v-d21089f2></span><span class="middle" data-v-d21089f2></span><span class="bottom" data-v-d21089f2></span></span></button></div></div></div></div><div class="divider" data-v-8b43f5c4><div class="divider-line" data-v-8b43f5c4></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5737631e data-v-d7d07f37><div class="container" data-v-d7d07f37><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d7d07f37><span class="vpi-align-left menu-icon" data-v-d7d07f37></span><span class="menu-text" data-v-d7d07f37>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-d7d07f37 data-v-2383e3f0><button data-v-2383e3f0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5737631e data-v-c19ade0c><div class="curtain" data-v-c19ade0c></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c19ade0c><span class="visually-hidden" id="sidebar-aria-label" data-v-c19ade0c> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-d74c07ba><section class="VPSidebarItem level-0 collapsible" data-v-d74c07ba data-v-b19fb66c><div class="item" role="button" tabindex="0" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><h2 class="text" data-v-b19fb66c>Started</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b19fb66c><span class="vpi-chevron-right caret-icon" data-v-b19fb66c></span></div></div><div class="items" data-v-b19fb66c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/introduction" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/quick-start" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Quick Start</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d74c07ba><section class="VPSidebarItem level-0 collapsible" data-v-d74c07ba data-v-b19fb66c><div class="item" role="button" tabindex="0" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><h2 class="text" data-v-b19fb66c>Basic</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b19fb66c><span class="vpi-chevron-right caret-icon" data-v-b19fb66c></span></div></div><div class="items" data-v-b19fb66c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/styles" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Style Configuration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/data-source" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Data Source</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/i18n" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Internationalization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/environment" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Environment</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/hot-key" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Hot Key</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d74c07ba><section class="VPSidebarItem level-0 collapsible has-active" data-v-d74c07ba data-v-b19fb66c><div class="item" role="button" tabindex="0" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><h2 class="text" data-v-b19fb66c>Advanced</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b19fb66c><span class="vpi-chevron-right caret-icon" data-v-b19fb66c></span></div></div><div class="items" data-v-b19fb66c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/figure" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Figure</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/indicator" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Indicator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/overlay" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Overlay</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/local-development" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Local Development</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d74c07ba><section class="VPSidebarItem level-0 collapsible" data-v-d74c07ba data-v-b19fb66c><div class="item" role="button" tabindex="0" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><h2 class="text" data-v-b19fb66c>Others</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b19fb66c><span class="vpi-chevron-right caret-icon" data-v-b19fb66c></span></div></div><div class="items" data-v-b19fb66c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/v9-to-v10" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>9.x to 10.x</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/faq" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>FAQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/feedback" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Feedback</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b19fb66c data-v-b19fb66c><div class="item" data-v-b19fb66c><div class="indicator" data-v-b19fb66c></div><a class="VPLink link link" href="/en-US/guide/changelog" data-v-b19fb66c><!--[--><p class="text" data-v-b19fb66c>Changelog</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5737631e data-v-058be052><div class="VPDoc has-sidebar has-aside" data-v-058be052 data-v-e76c32ef><!--[--><!--]--><div class="container" data-v-e76c32ef><div class="aside" data-v-e76c32ef><div class="aside-curtain" data-v-e76c32ef></div><div class="aside-container" data-v-e76c32ef><div class="aside-content" data-v-e76c32ef><div class="VPDocAside" data-v-e76c32ef data-v-94199b8c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-94199b8c data-v-c44a54bc><div class="content" data-v-c44a54bc><div class="outline-marker" data-v-c44a54bc></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c44a54bc>On this page</div><ul class="VPDocOutlineItem root" data-v-c44a54bc data-v-b1d2e9f0><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-94199b8c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><a class="asideSponsor" href="https://www.tradingx.cloud/" target="_blank" rel="noopener noreferrer" data-v-2e8097db><img class="" src="/images/sponsors/tradingx.png" alt="tradingx" data-v-2e8097db><span style="padding:6px 22px 0 22px;text-align:center;" data-v-2e8097db>Free is the new benchmark of trading innovation.</span></a><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-e76c32ef><div class="content-container" data-v-e76c32ef><!--[--><!--]--><main class="main" data-v-e76c32ef><div style="position:relative;" class="vp-doc _en-US_guide_figure" data-v-e76c32ef><div><h1 id="figure" tabindex="-1">Figure <a class="header-anchor" href="#figure" aria-label="Permalink to “Figure”">​</a></h1><p>Figure are an important part of the chart. All elements on the chart are composed of figures. If you need to make complex custom technical indicators and overlays, it is recommended to read carefully. This document describes the built-in figures and how to customize a figure. The basic figure can be obtained through the chart method <code>klinecharts.getFigureClass(name)</code>.</p><h2 id="example-of-use" tabindex="-1">Example of use <a class="header-anchor" href="#example-of-use" aria-label="Permalink to “Example of use”">​</a></h2><div class="warning custom-block"><p class="custom-block-title">Note</p><p>It needs to be used when there is a canvas context.</p></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get the figure class</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// name is the name of the figure, such as &#39;arc&#39;, &#39;circle&#39;, etc.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Figure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> klinecharts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFigureClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// instantiate and draw</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// attrs attribute</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// styles styles</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ctx canvas context</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Figure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(attrs, styles).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span></code></pre></div><h2 id="built-in-figures" tabindex="-1">Built-in figures <a class="header-anchor" href="#built-in-figures" aria-label="Permalink to “Built-in figures”">​</a></h2><p>These figures are built into the chart, <code>arc</code>, <code>circle</code>, <code>line</code>, <code>polygon</code>, <code>rect</code>, <code>text</code>, <code>rectText</code>.</p><h3 id="arc" tabindex="-1">arc <a class="header-anchor" href="#arc" aria-label="Permalink to “arc”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The x-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The y-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // radius</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     r: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // start angle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     startAngle: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // end angle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     endAngle: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // style, optional `solid`, `dashed`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     dashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="circle" tabindex="-1">circle <a class="header-anchor" href="#circle" aria-label="Permalink to “circle”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The x-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The y-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // radius</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     r: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // border dotted line parameters</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="line" tabindex="-1">line <a class="header-anchor" href="#line" aria-label="Permalink to “line”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // set of coordinates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    coordinates: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `solid`, `dashed`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="polygon" tabindex="-1">polygon <a class="header-anchor" href="#polygon" aria-label="Permalink to “polygon”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // set of coordinates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    coordinates: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="rect" tabindex="-1">rect <a class="header-anchor" href="#rect" aria-label="Permalink to “rect”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The x-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The y-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // width</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // high</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border dotted line parameters</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Border fillet value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderRadius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="text" tabindex="-1">text <a class="header-anchor" href="#text" aria-label="Permalink to “text”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The x-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The y-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Fixed width</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Fixed height</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // text content</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    text: any</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // alignment</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    align: CanvasTextAlign</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // benchmark</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseline: CanvasTextBaseline</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // font</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    family</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // thickness</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // left padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingLeft</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // right padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingRight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // top padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingTop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Bottom padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingBottom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Border fillet value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderRadius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // background color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    backgroundColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CanvasGradient</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h2 id="customize-figure" tabindex="-1">Customize figure <a class="header-anchor" href="#customize-figure" aria-label="Permalink to “Customize figure”">​</a></h2><p>To create a custom figure, you only need to generate the basic figure information, and then add it globally through the chart API <a href="/en-US/api/chart/registerFigure">registerFigure(figure)</a> , and add it to the chart to use it like a built-in basic figure. For more examples, refer to the files under <a href="https://github.com/klinecharts/KLineChart/tree/main/src/extension/figure" target="_blank" rel="noreferrer">https://github.com/klinecharts/KLineChart/tree/main/src/extension/figure</a> .</p></div></div></main><footer class="VPDocFooter" data-v-e76c32ef data-v-862a8695><!--[--><!--]--><div class="edit-info" data-v-862a8695><div class="edit-link" data-v-862a8695><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/klinecharts/KLineChart/edit/main/docs/en-US/guide/figure.md" target="_blank" rel="noreferrer" data-v-862a8695><!--[--><span class="vpi-square-pen edit-link-icon" data-v-862a8695></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-862a8695><p class="VPLastUpdated" data-v-862a8695 data-v-d7973346>Last updated: <time datetime="2025-05-14T09:10:04.000Z" data-v-d7973346></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-862a8695><span class="visually-hidden" id="doc-footer-aria-label" data-v-862a8695>Pager</span><div class="pager" data-v-862a8695><a class="VPLink link pager-link prev" href="/en-US/guide/hot-key" data-v-862a8695><!--[--><span class="desc" data-v-862a8695>Previous page</span><span class="title" data-v-862a8695>Hot Key</span><!--]--></a></div><div class="pager" data-v-862a8695><a class="VPLink link pager-link next" href="/en-US/guide/indicator" data-v-862a8695><!--[--><span class="desc" data-v-862a8695>Next page</span><span class="title" data-v-862a8695>Indicator</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5737631e data-v-a098f9e0><div class="container" data-v-a098f9e0><p class="message" data-v-a098f9e0>Released under the <a href="https://github.com/klinecharts/KLineChart/blob/main/LICENSE">Apache License V2</a>.</p><p class="copyright" data-v-a098f9e0>Copyright © 2018-2025 <a href="https://github.com/liihuu">liihuu</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>