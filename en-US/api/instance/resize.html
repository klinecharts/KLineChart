<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>resize() | KLineChart</title>
    <meta name="description" content="ðŸ’¹ðŸ“ˆ Highly customizable professional lightweight financial chart.">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.BPYYeAcc.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.155a6990.js"></script>
    <script type="module" src="/assets/app.fQgJxsvK.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CexKBWwx.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BkII0pUR.js">
    <link rel="modulepreload" href="/assets/chunks/index.CfS-j46e.js">
    <link rel="modulepreload" href="/assets/en-US_api_instance_resize.md.Dt-PBxIw.lean.js">
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <script>/**
     * @license
     * KLineChart v10.0.0-alpha2
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */(function(_,Et){typeof exports=="object"&&typeof module<"u"?Et(exports):typeof define=="function"&&define.amd?define(["exports"],Et):Et((_=typeof globalThis<"u"?globalThis:_||self).klinecharts={})})(this,function(_){"use strict";var Et=function(r,e){return Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},Et(r,e)};function W(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=r}Et(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Oe,pe,ge,We,ve,Ve,Ft,D=function(){return D=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},D.apply(this,arguments)};function $t(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]])}return t}function Ne(r,e,t,i){return new(t||(t=Promise))(function(n,o){function s(u){try{l(i.next(u))}catch(c){o(c)}}function a(u){try{l(i.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(s,a)}l((i=i.apply(r,e||[])).next())})}function ze(r,e){var t,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(o=0)),o;)try{if(t=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(c[0]===6&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(r,o)}catch(h){c=[6,h],i=0}finally{t=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function J(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i,n,o=t.call(r),s=[];try{for(;(e===void 0||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}return s}function Yt(r,e,t){if(t||arguments.length===2)for(var i,n=0,o=e.length;n<o;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError,_.LineType=void 0,(Oe=_.LineType||(_.LineType={})).Dashed="dashed",Oe.Solid="solid",_.PolygonType=void 0,(pe=_.PolygonType||(_.PolygonType={})).Stroke="stroke",pe.Fill="fill",pe.StrokeFill="stroke_fill",_.TooltipShowRule=void 0,(ge=_.TooltipShowRule||(_.TooltipShowRule={})).Always="always",ge.FollowCross="follow_cross",ge.None="none",_.TooltipShowType=void 0,(We=_.TooltipShowType||(_.TooltipShowType={})).Standard="standard",We.Rect="rect",_.TooltipIconPosition=void 0,(ve=_.TooltipIconPosition||(_.TooltipIconPosition={})).Left="left",ve.Middle="middle",ve.Right="right",_.CandleTooltipRectPosition=void 0,(Ve=_.CandleTooltipRectPosition||(_.CandleTooltipRectPosition={})).Fixed="fixed",Ve.Pointer="pointer",_.CandleType=void 0,(Ft=_.CandleType||(_.CandleType={})).CandleSolid="candle_solid",Ft.CandleStroke="candle_stroke",Ft.CandleUpStroke="candle_up_stroke",Ft.CandleDownStroke="candle_down_stroke",Ft.Ohlc="ohlc",Ft.Area="area";var Qt="#F92855",fe="rgba(249, 40, 85, .7)",te="#2DC08E",ye="rgba(45, 192, 142, .7)",It="#888888",ee="#FFFFFF",tt="#1677FF",Mt="#76808F",me="#DDDDDD";function Bt(r){return"rgba(22, 119, 255, ".concat(r,")")}function $i(){function r(){return{show:!0,size:1,color:"#EDEDED",style:_.LineType.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:r(),vertical:r()}}function Ye(){return{show:!0,size:"auto",axisLine:{show:!0,color:me,size:1},tickText:{show:!0,color:Mt,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:me}}}function Qi(){function r(){return{show:!0,line:{show:!0,style:_.LineType.Dashed,dashedValue:[4,2],size:1,color:Mt},text:{show:!0,style:_.PolygonType.Fill,color:ee,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:_.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:Mt,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Mt}}}return{show:!0,horizontal:r(),vertical:r()}}function Y(r,e){if(nt(r)||nt(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=r[t],n=e[t];nt(n)&&nt(i)?Y(i,n):T(e[t])&&(r[t]=Rt(e[t]))}}}function Rt(r){if(!nt(r))return r;var e=null;for(var t in e=st(r)?[]:{},r)if(Object.prototype.hasOwnProperty.call(r,t)){var i=r[t];nt(i)?e[t]=Rt(i):e[t]=i}return e}function st(r){return Object.prototype.toString.call(r)==="[object Array]"}function j(r){return typeof r=="function"}function nt(r){return typeof r=="object"&&T(r)}function B(r){return typeof r=="number"&&Number.isFinite(r)}function T(r){return r!=null}function Ht(r){return typeof r=="boolean"}function V(r){return typeof r=="string"}var tn=/\\(\\)?/g,en=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function G(r,e,t){if(T(r)){var i=[];e.replace(en,function(a){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=a;return T(l[1])?c=l[2].replace(tn,"$1"):T(l[0])&&(c=l[0].trim()),i.push(c),""});for(var n=r,o=0,s=i.length;T(n)&&o<s;)n=n?.[i[o++]];return T(n)?n:t??"--"}return t??"--"}function He(r,e){var t={};return r.formatToParts(new Date(e)).forEach(function(i){var n=i.type,o=i.value;switch(n){case"year":t.YYYY=o;break;case"month":t.MM=o;break;case"day":t.DD=o;break;case"hour":t.HH=o==="24"?"00":o;break;case"minute":t.mm=o;break;case"second":t.ss=o}}),t}function Xe(r,e,t){var i=He(r,e);return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return i[n]})}function Z(r,e){var t=+r;return B(t)?t.toFixed(e??2):"".concat(r)}function Ge(r){var e=+r;if(B(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(r)}function Ue(r,e){var t="".concat(r);if(e.length===0)return t;if(t.includes(".")){var i=t.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)}),".").concat(i[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)})}function je(r,e){var t="".concat(r);if(new RegExp("\\.0{"+e+",}[1-9][0-9]*$").test(t)){var i=t.split("."),n=i.length-1,o=i[n],s=/0*/.exec(o);if(T(s)){var a=s[0].length;return i[n]=o.replace(/0*/,"0{".concat(a,"}")),i.join(".")}}return t}var kt,ie=null;function wt(r){var e,t;return(t=(e=r.ownerDocument.defaultView)===null||e===void 0?void 0:e.devicePixelRatio)!==null&&t!==void 0?t:1}function Dt(r,e,t){return"".concat(e??"normal"," ").concat(r??12,"px ").concat(t??"Helvetica Neue")}function Xt(r,e,t,i){if(!T(ie)){var n=document.createElement("canvas"),o=wt(n);(ie=n.getContext("2d")).scale(o,o)}return ie.font=Dt(e,t,i),Math.round(ie.measureText(r).width)}_.ActionType=void 0,(kt=_.ActionType||(_.ActionType={})).OnZoom="onZoom",kt.OnScroll="onScroll",kt.OnVisibleRangeChange="onVisibleRangeChange",kt.OnTooltipIconClick="onTooltipIconClick",kt.OnCrosshairChange="onCrosshairChange",kt.OnCandleBarClick="onCandleBarClick",kt.OnPaneDrag="onPaneDrag";var _e,Gt,nn=function(){function r(){this._callbacks=[]}return r.prototype.subscribe=function(e){this._callbacks.indexOf(e)<0&&this._callbacks.push(e)},r.prototype.unsubscribe=function(e){if(j(e)){var t=this._callbacks.indexOf(e);t>-1&&this._callbacks.splice(t,1)}else this._callbacks=[]},r.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},r.prototype.isEmpty=function(){return this._callbacks.length===0},r}();function xe(r,e,t,i){var n,o=r.result,s=r.figures,a=r.styles,l=G(a,"circles",t.circles),u=l.length,c=G(a,"bars",t.bars),h=c.length,p=G(a,"lines",t.lines),d=p.length,v=0,g=0,f=0,y=0;s.forEach(function(x){var m;switch(x.type){case"circle":y=v;var b=l[v%u];n=D(D({},b),{color:b.noChangeColor}),v++;break;case"bar":y=g;var S=c[g%h];n=D(D({},S),{color:S.noChangeColor}),g++;break;case"line":y=f,n=p[f%d],f++}if(T(x.type)){var C=(m=x.styles)===null||m===void 0?void 0:m.call(x,{data:{prev:o[e-1],current:o[e],next:o[e+1]},indicator:r,defaultStyles:t});i(x,D(D({},n),C),y)}})}_.IndicatorSeries=void 0,(_e=_.IndicatorSeries||(_.IndicatorSeries={})).Normal="normal",_e.Price="price",_e.Volume="volume",function(r){r.Loading="loading",r.Error="error",r.Ready="ready"}(Gt||(Gt={}));var be,Ze=function(){function r(e){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series=_.IndicatorSeries.Normal,this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(t,i){var n=JSON.stringify(t.calcParams)!==JSON.stringify(i.calcParams)||t.figures!==i.figures||t.calc!==i.calc;return{calc:n,draw:n||t.shortName!==i.shortName||t.series!==i.series||t.minValue!==i.minValue||t.maxValue!==i.maxValue||t.precision!==i.precision||t.shouldOhlc!==i.shouldOhlc||t.shouldFormatBigNumber!==i.shouldFormatBigNumber||t.visible!==i.visible||t.zLevel!==i.zLevel||t.extendData!==i.extendData||t.regenerateFigures!==i.regenerateFigures||t.createTooltipDataSource!==i.createTooltipDataSource||t.draw!==i.draw}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result=[],this._lockSeriesPrecision=!1,this.override(e),this._lockSeriesPrecision=!1}return r.prototype.override=function(e){var t,i,n=this.result,o=$t(this,["result"]);this._prevIndicator=D(D({},Rt(o)),{result:n});var s=e.name,a=e.shortName,l=e.precision,u=e.styles,c=e.figures,h=e.calcParams,p=$t(e,["name","shortName","precision","styles","figures","calcParams"]);V(this.name)||(this.name=s??""),this.shortName=(t=a??this.shortName)!==null&&t!==void 0?t:this.name,B(l)&&(this.precision=l,this._lockSeriesPrecision=!0),T(u)&&((i=this.styles)!==null&&i!==void 0||(this.styles={}),Y(this.styles,u)),Y(this,p),T(h)&&(this.calcParams=h,j(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=c??this.figures},r.prototype.setSeriesPrecision=function(e){this._lockSeriesPrecision||(this.precision=e)},r.prototype.shouldUpdateImp=function(){var e=this._prevIndicator.zLevel!==this.zLevel,t=this.shouldUpdate(this._prevIndicator,this);return Ht(t)?{calc:t,draw:t,sort:e}:D(D({},t),{sort:e})},r.prototype.calcImp=function(e){return Ne(this,void 0,void 0,function(){var t;return ze(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=i.sent(),this.result=t,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},r.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return W(i,t),i}(r)},r}();_.OverlayMode=void 0,(be=_.OverlayMode||(_.OverlayMode={})).Normal="normal",be.WeakMagnet="weak_magnet",be.StrongMagnet="strong_magnet";var Lt,Ot="overlay_figure_",Ke=function(){function r(e){this.groupId="",this.totalStep=1,this.currentStep=1,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode=_.OverlayMode.Normal,this.modeSensitivity=8,this.points=[],this.extendData=null,this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(e)}return r.prototype.override=function(e){var t,i;this._prevOverlay=Rt(this);var n=e.id,o=e.name;e.currentStep;var s=e.points,a=e.styles;if(Y(this,$t(e,["id","name","currentStep","points","styles"])),V(this.name)||(this.name=o??""),!V(this.id)&&V(n)&&(this.id=n),T(a)&&((t=this.styles)!==null&&t!==void 0||(this.styles={}),Y(this.styles,a)),st(s)&&s.length>0){var l=0;if(this.points=Yt([],dt(s),!1),s.length>=this.totalStep-1?(this.currentStep=-1,l=this.totalStep-1):(this.currentStep=s.length+1,l=s.length),j(this.performEventMoveForDrawing))for(var u=0;u<l;u++)this.performEventMoveForDrawing({currentStep:u+2,mode:this.mode,points:this.points,performPointIndex:u,performPoint:this.points[u]});this.currentStep===-1&&((i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},r.prototype.shouldUpdate=function(){var e=this._prevOverlay.zLevel!==this.zLevel;return{sort:e,draw:e||JSON.stringify(this._prevOverlay)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles}},r.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},r.prototype.forceComplete=function(){this.currentStep=-1},r.prototype.isDrawing=function(){return this.currentStep!==-1},r.prototype.isStart=function(){return this.currentStep===1},r.prototype.eventMoveForDrawing=function(e){var t,i=this.currentStep-1,n={};B(e.timestamp)&&(n.timestamp=e.timestamp),B(e.dataIndex)&&(n.dataIndex=e.dataIndex),B(e.value)&&(n.value=e.value),this.points[i]=n,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},r.prototype.eventPressedPointMove=function(e,t){var i;this.points[t].timestamp=e.timestamp,B(e.value)&&(this.points[t].value=e.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},r.prototype.startPressedMove=function(e){this._prevPressedPoint=D({},e),this._prevPressedPoints=Rt(this.points)},r.prototype.eventPressedOtherMove=function(e,t){if(this._prevPressedPoint!==null){var i=null;B(e.dataIndex)&&B(this._prevPressedPoint.dataIndex)&&(i=e.dataIndex-this._prevPressedPoint.dataIndex);var n=null;B(e.value)&&B(this._prevPressedPoint.value)&&(n=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var s;B(o.timestamp)&&(o.dataIndex=t.timestampToDataIndex(o.timestamp));var a=D({},o);return B(i)&&B(o.dataIndex)&&(a.dataIndex=o.dataIndex+i,a.timestamp=(s=t.dataIndexToTimestamp(a.dataIndex))!==null&&s!==void 0?s:void 0),B(n)&&B(o.value)&&(a.value=o.value+n),a})}},r.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return W(i,t),i}(r)},r}();function ne(r){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return T(r)&&Y(e,r),e}_.FormatDateType=void 0,(Lt=_.FormatDateType||(_.FormatDateType={}))[Lt.Tooltip=0]="Tooltip",Lt[Lt.Crosshair=1]="Crosshair",Lt[Lt.XAxis=2]="XAxis";var Wt=-1;function re(r){return j(window.requestAnimationFrame)?window.requestAnimationFrame(r):window.setTimeout(r,20)}function qe(r){j(window.cancelAnimationFrame)?window.cancelAnimationFrame(r):window.clearTimeout(r)}function Je(r){if(j(window.requestIdleCallback))return window.requestIdleCallback(r);var e=performance.now();return window.setTimeout(function(){r({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-e))}})},1)}var et,Ce=function(){function r(e){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Y(this._options,e)}return r.prototype._loop=function(){var e=this;this._running=!0;var t=function(){var i;if(e._running){var n=new Date().getTime()-e._time;n<e._options.duration?((i=e._doFrameCallback)===null||i===void 0||i.call(e,n),re(t)):(e.stop(),e._currentIterationCount++,e._currentIterationCount<e._options.iterationCount&&e.start())}};re(t)},r.prototype.doFrame=function(e){return this._doFrameCallback=e,this},r.prototype.setDuration=function(e){return this._options.duration=e,this},r.prototype.setIterationCount=function(e){return this._options.iterationCount=e,this},r.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},r.prototype.stop=function(){var e;this._running&&((e=this._doFrameCallback)===null||e===void 0||e.call(this,this._options.duration)),this._running=!1},r}(),we=1,$e=new Date().getTime();function Qe(r){var e=new Date().getTime();return e===$e?++we:we=1,$e=e,"".concat(r??"").concat(e,"_").concat(we)}function pt(r,e){var t,i=document.createElement(r),n=e??{};for(var o in n)i.style[o]=(t=n[o])!==null&&t!==void 0?t:"";return i}function Te(r,e,t){var i=0,n=0;for(n=r.length-1;i!==n;){var o=Math.floor((n+i)/2),s=n-i,a=r[o][e];if(t===r[i][e])return i;if(t===r[n][e])return n;if(t===a)return o;if(t>a?i=o:n=o,s<=2)break}return i}function ti(r,e){e=Math.max(0,e??0);var t=Math.pow(10,e);return Math.round(r*t)/t}function ei(r,e,t){for(var i,n,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=r.length,a=0;a<s;){var l=r[a];o[0]=Math.max((i=l[e])!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((n=l[t])!==null&&n!==void 0?n:Number.MAX_SAFE_INTEGER,o[1]),++a}return o}function gt(r){return r===0?0:Math.log10(r)}function At(r){return Math.pow(10,r)}function ii(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.join("_")}(function(r){r.Init="init",r.Forward="forward",r.Backward="backward",r.Update="update"})(et||(et={}));var rn=function(){function r(e){this._requestIdleCallbackId=Wt,this._tasks=e??[],this._operateTasks()}return r.prototype._operateTasks=function(e){var t,i=this;this._requestIdleCallbackId!==Wt&&(t=this._requestIdleCallbackId,j(window.cancelIdleCallback)?window.cancelIdleCallback(t):window.clearTimeout(t),this._requestIdleCallbackId=Wt),e?.(),this._requestIdleCallbackId=Je(function(n){i._runTasks(n)})},r.prototype._runTasks=function(e){for(var t=this;e.timeRemaining()>0&&this._tasks.length>0;){var i=this._tasks.shift();i?.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=Je(function(n){t._runTasks(n)}))},r.prototype.addTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e.id});i>-1?t._tasks[i]=e:t._tasks.push(e)}),this},r.prototype.removeTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e});i>-1&&t._tasks.splice(i,1)}),this},r}(),ni=31536e3,ri=2592e3,oi=86400,ai=3600,si=60,Se=1;function li(r,e,t,i,n,o){var s;i===void 0&&(i=0);for(var a=null,l=o??null,u=0;u<e.length;u++){var c=e[u].timestamp,h=Se,p=He(t,c);T(a)&&(h=p.YYYY!==a.YYYY?ni:p.MM!==a.MM?ri:p.DD!==a.DD?oi:p.HH!==a.HH?ai:p.mm!==a.mm?si:Se),B(l)&&B(n?.value)&&(n.value=Math.min(n.value,c-l));var d=(s=r.get(h))!==null&&s!==void 0?s:[];d.push({dataIndex:u+i,weight:h,timestamp:c}),r.set(h,d),a=p,l=c}}function ui(r,e){var t=Math.max(Xt("0000-00-00 00:00:00",e.size,e.weight,e.family),146);return Math.ceil(t/r)}function Pe(r,e,t){var i=ui(e,t),n=[];return Array.from(r.keys()).sort(function(o,s){return s-o}).forEach(function(o){var s=r.get(o),a=n;n=[];for(var l=a.length,u=0,c=s.length,h=1/0,p=-1/0,d=0;d<c;d++){for(var v=s[d],g=v.dataIndex;u<l;){var f=a[u],y=f.dataIndex;if(!(y<g)){h=y;break}u++,n.push(f),p=y,h=1/0}h-g>=i&&g-p>=i&&(n.push(v),p=g)}for(;u<l;u++)n.push(a[u])}),n}var on={name:"AVP",shortName:"AVP",series:_.IndicatorSeries.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(r){var e=0,t=0;return r.map(function(i){var n,o,s={},a=(n=i.turnover)!==null&&n!==void 0?n:0,l=(o=i.volume)!==null&&o!==void 0?o:0;return e+=a,(t+=l)!==0&&(s.avp=e/t),s})}},an={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(r){var e,t,i=r.data,n=r.indicator,o=r.defaultStyles,s=i.prev,a=i.current,l=(e=s?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=a?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return{color:c=u>l?G(n.styles,"bars[0].upColor",o.bars[0].upColor):G(n.styles,"bars[0].downColor",o.bars[0].downColor),style:u>l?_.PolygonType.Stroke:_.PolygonType.Fill,borderColor:c}}}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,s=0,a=0;return r.map(function(l,u){var c={},h=(l.low+l.high)/2;if(n+=h,o+=h,u>=t[0]-1){s=n/t[0];var p=r[u-(t[0]-1)];n-=(p.low+p.high)/2}return u>=t[1]-1&&(a=o/t[1],p=r[u-(t[1]-1)],o-=(p.low+p.high)/2),u>=i-1&&(c.ao=s-a),c})}},sn={name:"BOLL",shortName:"BOLL",series:_.IndicatorSeries.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0;return r.map(function(o,s){var a=o.close,l={};if(n+=a,s>=i){l.mid=n/t[0];var u=function(c,h){var p=c.length,d=0;return c.forEach(function(v){var g=v.close-h;d+=g*g}),d=Math.abs(d),Math.sqrt(d/p)}(r.slice(s-i,s+1),l.mid);l.up=l.mid+t[1]*u,l.dn=l.mid-t[1]*u,n-=r[s-i].close}return l})}},ln={name:"BBI",shortName:"BBI",series:_.IndicatorSeries.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max.apply(Math,Yt([],dt(t),!1)),n=[],o=[];return r.map(function(s,a){var l={},u=s.close;if(t.forEach(function(h,p){var d;n[p]=((d=n[p])!==null&&d!==void 0?d:0)+u,a>=h-1&&(o[p]=n[p]/h,n[p]-=r[a-(h-1)].close)}),a>=i-1){var c=0;o.forEach(function(h){c+=h}),l.bbi=c/4}return l})}},un={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0,o=[];return r.map(function(s,a){var l={},u=(s.high+s.low+s.close)/3;if(n+=u,o.push(u),a>=i){var c=n/t[0],h=o.slice(a-i,a+1),p=0;h.forEach(function(g){p+=Math.abs(g-c)});var d=p/t[0];l.cci=d!==0?(u-c)/d/.015:0;var v=(r[a-i].high+r[a-i].low+r[a-i].close)/3;n-=v}return l})}},cn={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.ceil(t[1]/2.5+1),n=Math.ceil(t[2]/2.5+1),o=Math.ceil(t[3]/2.5+1),s=Math.ceil(t[4]/2.5+1),a=0,l=[],u=0,c=[],h=0,p=[],d=0,v=[],g=[];return r.forEach(function(f,y){var x,m,b,S,C,w={},P=(x=r[y-1])!==null&&x!==void 0?x:f,E=(P.high+P.close+P.low+P.open)/4,k=Math.max(0,f.high-E),A=Math.max(0,E-f.low);y>=t[0]-1&&(w.cr=A!==0?k/A*100:0,a+=w.cr,u+=w.cr,h+=w.cr,d+=w.cr,y>=t[0]+t[1]-2&&(l.push(a/t[1]),y>=t[0]+t[1]+i-3&&(w.ma1=l[l.length-1-i]),a-=(m=g[y-(t[1]-1)].cr)!==null&&m!==void 0?m:0),y>=t[0]+t[2]-2&&(c.push(u/t[2]),y>=t[0]+t[2]+n-3&&(w.ma2=c[c.length-1-n]),u-=(b=g[y-(t[2]-1)].cr)!==null&&b!==void 0?b:0),y>=t[0]+t[3]-2&&(p.push(h/t[3]),y>=t[0]+t[3]+o-3&&(w.ma3=p[p.length-1-o]),h-=(S=g[y-(t[3]-1)].cr)!==null&&S!==void 0?S:0),y>=t[0]+t[4]-2&&(v.push(d/t[4]),y>=t[0]+t[4]+s-3&&(w.ma4=v[v.length-1-s]),d-=(C=g[y-(t[4]-1)].cr)!==null&&C!==void 0?C:0)),g.push(w)}),g}},hn={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,s=0,a=[];return r.forEach(function(l,u){var c,h={},p=l.close;n+=p,o+=p;var d=0,v=0;if(u>=t[0]-1&&(d=n/t[0],n-=r[u-(t[0]-1)].close),u>=t[1]-1&&(v=o/t[1],o-=r[u-(t[1]-1)].close),u>=i-1){var g=d-v;h.dma=g,s+=g,u>=i+t[2]-2&&(h.ama=s/t[2],s-=(c=a[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}a.push(h)}),a}},dn={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,s=0,a=0,l=0,u=0,c=0,h=[];return r.forEach(function(p,d){var v,g,f={},y=(v=r[d-1])!==null&&v!==void 0?v:p,x=y.close,m=p.high,b=p.low,S=m-b,C=Math.abs(m-x),w=Math.abs(x-b),P=m-y.high,E=y.low-b,k=Math.max(Math.max(S,C),w),A=P>0&&P>E?P:0,R=E>0&&E>P?E:0;if(i+=k,n+=A,o+=R,d>=t[0]-1){d>t[0]-1?(s=s-s/t[0]+k,a=a-a/t[0]+A,l=l-l/t[0]+R):(s=i,a=n,l=o);var M=0,I=0;s!==0&&(M=100*a/s,I=100*l/s),f.pdi=M,f.mdi=I;var F=0;I+M!==0&&(F=Math.abs(I-M)/(I+M)*100),u+=F,d>=2*t[0]-2&&(c=d>2*t[0]-2?(c*(t[0]-1)+F)/t[0]:u/t[0],f.adx=c,d>=2*t[0]+t[1]-3&&(f.adxr=(((g=h[d-(t[1]-1)].adx)!==null&&g!==void 0?g:0)+c)/2))}h.push(f)}),h}},pn={name:"EMA",shortName:"EMA",series:_.IndicatorSeries.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=0,o=[];return r.map(function(s,a){var l={},u=s.close;return n+=u,t.forEach(function(c,h){a>=c-1&&(o[h]=a>c-1?(2*u+(c-1)*o[h])/(c+1):n/c,l[i[h].key]=o[h])}),l})}},gn={name:"MA",shortName:"MA",series:_.IndicatorSeries.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,s){var a={},l=o.close;return t.forEach(function(u,c){var h;n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,s>=u-1&&(a[i[c].key]=n[c]/u,n[c]-=r[s-(u-1)].close)}),a})}},vn={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(r){var e,t,i=r.data,n=r.indicator,o=r.defaultStyles,s=i.prev,a=i.current,l=(e=s?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=a?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return c=u>0?G(n.styles,"bars[0].upColor",o.bars[0].upColor):u<0?G(n.styles,"bars[0].downColor",o.bars[0].downColor):G(n.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor),{style:l<u?_.PolygonType.Stroke:_.PolygonType.Fill,color:c,borderColor:c}}}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,s=0,a=0,l=0,u=Math.max(t[0],t[1]);return r.map(function(c,h){var p={},d=c.close;return i+=d,h>=t[0]-1&&(n=h>t[0]-1?(2*d+(t[0]-1)*n)/(t[0]+1):i/t[0]),h>=t[1]-1&&(o=h>t[1]-1?(2*d+(t[1]-1)*o)/(t[1]+1):i/t[1]),h>=u-1&&(s=n-o,p.dif=s,a+=s,h>=u+t[2]-2&&(l=h>u+t[2]-2?(2*s+l*(t[2]-1))/(t[2]+1):a/t[2],p.macd=2*(s-l),p.dea=l)),p})}},fn={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){var i=t+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t,o=[],s=[];return r.map(function(a,l){var u,c={},h=((u=r[l-1])!==null&&u!==void 0?u:a).close,p=a.close-h;return n.forEach(function(d,v){var g,f,y;if(p>0?o[v]=((g=o[v])!==null&&g!==void 0?g:0)+p:s[v]=((f=s[v])!==null&&f!==void 0?f:0)+Math.abs(p),l>=d-1){s[v]!==0?c[i[v].key]=100-100/(1+o[v]/s[v]):c[i[v].key]=0;var x=r[l-(d-1)],m=(y=r[l-d])!==null&&y!==void 0?y:x,b=x.close-m.close;b>0?o[v]-=b:s[v]-=Math.abs(b)}}),c})}},yn={name:"SMA",shortName:"SMA",series:_.IndicatorSeries.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(r,e){var t=e.calcParams,i=0,n=0;return r.map(function(o,s){var a={},l=o.close;return i+=l,s>=t[0]-1&&(n=s>t[0]-1?(l*t[1]+n*(t[0]-t[1]+1))/(t[0]+1):i/t[0],a.sma=n),a})}},mn={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[];return r.forEach(function(n,o){var s,a,l,u,c={},h=n.close;if(o>=t[0]-1){var p=ei(r.slice(o-(t[0]-1),o+1),"high","low"),d=p[0],v=p[1],g=d-v,f=(h-v)/(g===0?1:g)*100;c.k=((t[1]-1)*((a=(s=i[o-1])===null||s===void 0?void 0:s.k)!==null&&a!==void 0?a:50)+f)/t[1],c.d=((t[2]-1)*((u=(l=i[o-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},_n={name:"SAR",shortName:"SAR",series:_.IndicatorSeries.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(r){var e,t,i,n=r.data,o=r.indicator,s=r.defaultStyles,a=n.current;return{color:((e=a?.sar)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER)<(((t=a?.high)!==null&&t!==void 0?t:0)+((i=a?.low)!==null&&i!==void 0?i:0))/2?G(o.styles,"circles[0].upColor",s.circles[0].upColor):G(o.styles,"circles[0].downColor",s.circles[0].downColor)}}}],calc:function(r,e){var t=e.calcParams,i=t[0]/100,n=t[1]/100,o=t[2]/100,s=i,a=-100,l=!1,u=0;return r.map(function(c,h){var p=u,d=c.high,v=c.low;if(l){(a===-100||a<d)&&(a=d,s=Math.min(s+n,o)),u=p+s*(a-p);var g=Math.min(r[Math.max(1,h)-1].low,v);u>c.low?(u=a,s=i,a=-100,l=!l):u>g&&(u=g)}else{(a===-100||a>v)&&(a=v,s=Math.min(s+n,o)),u=p+s*(a-p);var f=Math.max(r[Math.max(1,h)-1].high,d);u<c.high?(u=a,s=0,a=-100,l=!l):u<f&&(u=f)}return{high:d,low:v,sar:u}})}};function ci(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(r){var e=r.data,t=r.indicator,i=r.defaultStyles,n=e.current,o=G(t.styles,"bars[0].noChangeColor",i.bars[0].noChangeColor);return T(n)&&(n.close>n.open?o=G(t.styles,"bars[0].upColor",i.bars[0].upColor):n.close<n.open&&(o=G(t.styles,"bars[0].downColor",i.bars[0].downColor))),{color:o}}}}var xn={name:"VOL",shortName:"VOL",series:_.IndicatorSeries.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},ci()],regenerateFigures:function(r){var e=r.map(function(t,i){return{key:"ma".concat(i+1),title:"MA".concat(t,": "),type:"line"}});return e.push(ci()),e},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t,o=[];return r.map(function(s,a){var l,u=(l=s.volume)!==null&&l!==void 0?l:0,c={volume:u,open:s.open,close:s.close};return n.forEach(function(h,p){var d,v;o[p]=((d=o[p])!==null&&d!==void 0?d:0)+u,a>=h-1&&(c[i[p].key]=o[p]/h,o[p]-=(v=r[a-(h-1)].volume)!==null&&v!==void 0?v:0)}),c})}},bn={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t;return r.map(function(o,s){var a={},l=o.close;return n.forEach(function(u,c){var h=u-1;if(s>=h){var p=ei(r.slice(s-h,s+1),"high","low"),d=p[0],v=d-p[1];a[i[c].key]=v===0?0:(l-d)/v*100}}),a})}},oe={},Cn=[on,an,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t,o=[];return r.map(function(s,a){var l={},u=s.close;return n.forEach(function(c,h){var p;if(o[h]=((p=o[h])!==null&&p!==void 0?p:0)+u,a>=c-1){var d=o[h]/n[h];l[i[h].key]=(u-d)/d*100,o[h]-=r[a-(c-1)].close}}),l})}},sn,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,s=0;return r.map(function(a,l){var u,c,h={},p=a.high,d=a.low,v=a.open,g=((u=r[l-1])!==null&&u!==void 0?u:a).close;if(o+=p-v,s+=v-d,i+=p-g,n+=g-d,l>=t[0]-1){h.ar=s!==0?o/s*100:0,h.br=n!==0?i/n*100:0;var f=r[l-(t[0]-1)],y=f.high,x=f.low,m=f.open,b=((c=r[l-t[0]])!==null&&c!==void 0?c:r[l-(t[0]-1)]).close;i-=y-b,n-=b-x,o-=y-m,s-=m-x}return h})}},ln,un,cn,hn,dn,{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.map(function(o,s){var a,l={};if(s>0){var u=r[s-1],c=o.high,h=o.low,p=(a=o.volume)!==null&&a!==void 0?a:0,d=(c+h)/2-(u.high+u.low)/2;if(p===0||c-h==0)l.emv=0;else{var v=p/1e8/(c-h);l.emv=d/v}i+=l.emv,n.push(l.emv),s>=t[0]&&(l.maEmv=i/t[0],i-=n[s-t[0]])}return l})}},pn,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.forEach(function(o,s){var a,l={};if(s>=t[0]){var u=o.close,c=r[s-t[0]].close;l.mtm=u-c,i+=l.mtm,s>=t[0]+t[1]-1&&(l.maMtm=i/t[1],i-=(a=n[s-(t[1]-1)].mtm)!==null&&a!==void 0?a:0)}n.push(l)}),n}},gn,vn,{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[];return r.forEach(function(s,a){var l,u,c,h,p=(l=r[a-1])!==null&&l!==void 0?l:s;s.close<p.close?n-=(u=s.volume)!==null&&u!==void 0?u:0:s.close>p.close&&(n+=(c=s.volume)!==null&&c!==void 0?c:0);var d={obv:n};i+=n,a>=t[0]-1&&(d.maObv=i/t[0],i-=(h=o[a-(t[0]-1)].obv)!==null&&h!==void 0?h:0),o.push(d)}),o}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(r){var e=0;return r.map(function(t,i){var n,o,s={},a=t.close,l=(n=t.volume)!==null&&n!==void 0?n:1,u=((o=r[i-1])!==null&&o!==void 0?o:t).close,c=0,h=u*l;return h!==0&&(c=(a-u)/h),e+=c,s.pvt=e,s})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[],s=[];return r.forEach(function(a,l){var u,c,h={},p=((u=r[l-1])!==null&&u!==void 0?u:a).close,d=a.close-p>0?1:0;o.push(d),i+=d,l>=t[0]-1&&(h.psy=i/t[0]*100,n+=h.psy,l>=t[0]+t[1]-2&&(h.maPsy=n/t[1],n-=(c=s[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),i-=o[l-(t[0]-1)]),s.push(h)}),s}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[],n=0;return r.forEach(function(o,s){var a,l,u={};if(s>=t[0]-1){var c=o.close,h=((a=r[s-t[0]])!==null&&a!==void 0?a:r[s-(t[0]-1)]).close;u.roc=h!==0?(c-h)/h*100:0,n+=u.roc,s>=t[0]-1+t[1]-1&&(u.maRoc=n/t[1],n-=(l=i[s-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},fn,yn,mn,_n,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,s=0,a=0,l=0,u=0,c=[];return r.forEach(function(h,p){var d,v={},g=h.close;if(i+=g,p>=t[0]-1&&(n=p>t[0]-1?(2*g+(t[0]-1)*n)/(t[0]+1):i/t[0],a+=n,p>=2*t[0]-2&&(o=p>2*t[0]-2?(2*n+(t[0]-1)*o)/(t[0]+1):a/t[0],l+=o,p>=3*t[0]-3))){var f=0,y=0;p>3*t[0]-3?y=((f=(2*o+(t[0]-1)*s)/(t[0]+1))-s)/s*100:f=l/t[0],s=f,v.trix=y,u+=y,p>=3*t[0]+t[1]-4&&(v.maTrix=u/t[1],u-=(d=c[p-(t[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(v)}),c}},xn,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,s=0,a=[];return r.forEach(function(l,u){var c,h,p,d,v,g={},f=l.close,y=((c=r[u-1])!==null&&c!==void 0?c:l).close,x=(h=l.volume)!==null&&h!==void 0?h:0;if(f>y?i+=x:f<y?n+=x:o+=x,u>=t[0]-1){var m=o/2;g.vr=n+m===0?0:(i+m)/(n+m)*100,s+=g.vr,u>=t[0]+t[1]-2&&(g.maVr=s/t[1],s-=(p=a[u-(t[1]-1)].vr)!==null&&p!==void 0?p:0);var b=r[u-(t[0]-1)],S=(d=r[u-t[0]])!==null&&d!==void 0?d:b,C=b.close,w=(v=b.volume)!==null&&v!==void 0?v:0;C>S.close?i-=w:C<S.close?n-=w:o-=w}a.push(g)}),a}},bn];function hi(r){var e;return(e=oe[r])!==null&&e!==void 0?e:null}Cn.forEach(function(r){oe[r.name]=Ze.extend(r)});var wn={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t,i=r.chart,n=r.coordinates,o=r.bounding,s=r.overlay,a=r.yAxis,l=s.points;if(n.length>0){var u=0;(e=a?.isInCandle())===null||e===void 0||e?u=i.getPrecision().price:((t=i.getIndicators({paneId:s.paneId}).get(s.paneId))!==null&&t!==void 0?t:[]).forEach(function(g){u=Math.max(u,g.precision)});var c=[],h=[],p=o.width;if(n.length>1&&B(l[0].value)&&B(l[1].value)){var d=n[0].y-n[1].y,v=l[0].value-l[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(g){var f,y=n[1].y+d*g,x=i.getDecimalFold().format(i.getThousandsSeparator().format((((f=l[1].value)!==null&&f!==void 0?f:0)+v*g).toFixed(u)));c.push({coordinates:[{x:0,y},{x:p,y}]}),h.push({x:0,y,text:"".concat(x," (").concat((100*g).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:c},{type:"text",isCheckEvent:!1,attrs:h}]}return[]}},Tn={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding,i={x:0,y:e[0].y};return T(e[1])&&e[0].x<e[1].x&&(i.x=t.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},Ee=function(){function r(){this._children=[],this._callbacks=new Map}return r.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},r.prototype.onEvent=function(e,t,i){var n=this._callbacks.get(e);return!(!T(n)||!this.checkEventOn(t))&&n(t,i)},r.prototype.checkEventOn=function(e){var t,i;try{for(var n=J(this._children),o=n.next();!o.done;o=n.next())if(o.value.checkEventOn(e))return!0}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!1},r.prototype.dispatchEvent=function(e,t,i){var n=this._children.length-1;if(n>-1){for(var o=n;o>-1;o--)if(this._children[o].dispatchEvent(e,t,i))return!0}return this.onEvent(e,t,i)},r.prototype.addChild=function(e){return this._children.push(e),this},r.prototype.clear=function(){this._children=[]},r}(),di=function(r){function e(t){var i=r.call(this)||this;return i.attrs=t.attrs,i.styles=t.styles,i}return W(e,r),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var i=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return W(o,n),o.prototype.checkEventOnImp=function(s,a,l){return t.checkEventOn(s,a,l)},o.prototype.drawImp=function(s,a,l){t.draw(s,a,l)},o}(e);return i},e}(Ee);function pi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),s=o.next();!s.done;s=o.next()){var a=s.value.coordinates;if(a.length>1)for(var l=1;l<a.length;l++){var u=a[l-1],c=a[l];if(u.x===c.x){if(Math.abs(u.y-r.y)+Math.abs(c.y-r.y)-Math.abs(u.y-c.y)<4&&Math.abs(r.x-u.x)<2)return!0}else{var h=ae(u,c),p=Ie(h,r),d=Math.abs(p-r.y);if(Math.abs(u.x-r.x)+Math.abs(c.x-r.x)-Math.abs(u.x-c.x)<4&&d*d/(h[0]*h[0]+1)<4)return!0}}}}catch(v){t={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function Ie(r,e){return r!==null?e.x*r[0]+r[1]:e.y}function Ut(r,e,t){return Ie(ae(r,e),t)}function ae(r,e){var t=r.x-e.x;if(t!==0){var i=(r.y-e.y)/t;return[i,r.y-i*r.x]}return null}function gi(r,e,t){var i=e.length,n=B(t)?t>0&&t<1?t:0:t?.5:0;if(n>0&&i>2){for(var o=e[0].x,s=e[0].y,a=1;a<i-1;a++){var l=e[a-1],u=e[a],c=e[a+1],h=u.x-l.x,p=u.y-l.y,d=c.x-u.x,v=c.y-u.y,g=c.x-l.x,f=c.y-l.y,y=Math.sqrt(h*h+p*p),x=Math.sqrt(d*d+v*v),m=x/(x+y),b=u.x+g*n*m,S=u.y+f*n*m;b=Math.min(b,Math.max(c.x,u.x)),S=Math.min(S,Math.max(c.y,u.y)),b=Math.max(b,Math.min(c.x,u.x)),S=Math.max(S,Math.min(c.y,u.y)),g=b-u.x,f=S-u.y;var C=u.x-g*y/x,w=u.y-f*y/x;C=Math.min(C,Math.max(l.x,u.x)),w=Math.min(w,Math.max(l.y,u.y)),C=Math.max(C,Math.min(l.x,u.x)),w=Math.max(w,Math.min(l.y,u.y)),g=u.x-C,f=u.y-w,b=u.x+g*x/y,S=u.y+f*x/y,r.bezierCurveTo(o,s,C,w,u.x,u.y),o=b,s=S}var P=e[i-1];r.bezierCurveTo(o,s,P.x,P.y,P.x,P.y)}else for(a=1;a<i;a++)r.lineTo(e[a].x,e[a].y)}var Sn={name:"line",checkEventOn:pi,draw:function(r,e,t){(function(i,n,o){var s=[];s=s.concat(n);var a=o.style,l=a===void 0?_.LineType.Solid:a,u=o.smooth,c=u!==void 0&&u,h=o.size,p=h===void 0?1:h,d=o.color,v=d===void 0?"currentColor":d,g=o.dashedValue,f=g===void 0?[2,2]:g;i.lineWidth=p,i.strokeStyle=v,l===_.LineType.Dashed?i.setLineDash(f):i.setLineDash([]);var y=p%2==1?.5:0;s.forEach(function(x){var m=x.coordinates;m.length>1&&(m.length!==2||m[0].x!==m[1].x&&m[0].y!==m[1].y?(i.save(),p%2==1&&i.translate(.5,.5),i.beginPath(),i.moveTo(m[0].x,m[0].y),gi(i,m,c),i.stroke(),i.closePath(),i.restore()):(i.beginPath(),m[0].x===m[1].x?(i.moveTo(m[0].x+y,m[0].y),i.lineTo(m[1].x+y,m[1].y)):(i.moveTo(m[0].x,m[0].y+y),i.lineTo(m[1].x,m[1].y+y)),i.stroke(),i.closePath()))})})(r,e,t)}};function vi(r,e,t){var i=t??0,n=[];if(r.length>1)if(r[0].x===r[1].x){var o=e.height;if(n.push({coordinates:[{x:r[0].x,y:0},{x:r[0].x,y:o}]}),r.length>2){n.push({coordinates:[{x:r[2].x,y:0},{x:r[2].x,y:o}]});for(var s=r[0].x-r[2].x,a=0;a<i;a++){var l=s*(a+1);n.push({coordinates:[{x:r[0].x+l,y:0},{x:r[0].x+l,y:o}]})}}}else{var u=e.width,c=ae(r[0],r[1]),h=c[0],p=c[1];if(n.push({coordinates:[{x:0,y:0*h+p},{x:u,y:u*h+p}]}),r.length>2){var d=r[2].y-h*r[2].x;for(n.push({coordinates:[{x:0,y:0*h+d},{x:u,y:u*h+d}]}),s=p-d,a=0;a<i;a++){var v=p+s*(a+1);n.push({coordinates:[{x:0,y:0*h+v},{x:u,y:u*h+v}]})}}}return n}var Pn={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:vi(r.coordinates,r.bounding)}]}},En={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:vi(r.coordinates,r.bounding,1)}]}},In={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t,i=r.chart,n=r.coordinates,o=r.bounding,s=r.overlay,a=r.yAxis,l=0;(e=a?.isInCandle())===null||e===void 0||e?l=i.getPrecision().price:((t=i.getIndicators({paneId:s.paneId}).get(s.paneId))!==null&&t!==void 0?t:[]).forEach(function(h){l=Math.max(l,h.precision)});var u=s.points[0].value,c=u===void 0?0:u;return[{type:"line",attrs:{coordinates:[n[0],{x:o.width,y:n[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:n[0].x,y:n[0].y,text:i.getDecimalFold().format(i.getThousandsSeparator().format(c.toFixed(l))),baseline:"bottom"}}]}};function Mn(r,e){if(r.length>1){var t={x:0,y:0};return t=r[0].x===r[1].x&&r[0].y!==r[1].y?r[0].y<r[1].y?{x:r[0].x,y:e.height}:{x:r[0].x,y:0}:r[0].x>r[1].x?{x:0,y:Ut(r[0],r[1],{x:0,y:r[0].y})}:{x:e.width,y:Ut(r[0],r[1],{x:e.width,y:r[0].y})},{coordinates:[r[0],t]}}return[]}var kn={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:Mn(r.coordinates,r.bounding)}]}},Dn={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Ut(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:Ut(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},An={name:"simpleAnnotation",totalStep:2,styles:{line:{style:_.LineType.Dashed}},createPointFigures:function(r){var e,t=r.overlay,i=r.coordinates,n="";T(t.extendData)&&(n=j(t.extendData)?t.extendData(t):(e=t.extendData)!==null&&e!==void 0?e:"");var o=i[0].x,s=i[0].y-6,a=s-50,l=a-5;return[{type:"line",attrs:{coordinates:[{x:o,y:s},{x:o,y:a}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:a},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:n,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},Fn={name:"simpleTag",totalStep:2,styles:{line:{style:_.LineType.Dashed}},createPointFigures:function(r){var e=r.bounding,t=r.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(r){var e,t,i=r.chart,n=r.overlay,o=r.coordinates,s=r.bounding,a=r.yAxis,l="left",u=0;(e=a?.isFromZero())!==null&&e!==void 0&&e?(l="left",u=0):(l="right",u=s.width);var c="";return T(n.extendData)&&(c=j(n.extendData)?n.extendData(n):(t=n.extendData)!==null&&t!==void 0?t:""),!T(c)&&B(n.points[0].value)&&(c=Z(n.points[0].value,i.getPrecision().price)),{type:"text",attrs:{x:u,y:o[0].y,text:c,align:l,baseline:"middle"}}}},jt={};function Bn(r){var e;return(e=jt[r])!==null&&e!==void 0?e:null}[wn,Tn,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]}}]}},Pn,En,In,kn,{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},Dn,{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;if(e.length===2){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=t.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]}},An,Fn].forEach(function(r){jt[r.name]=Ke.extend(r)});var fi={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function Rn(r){var e;return(e=fi[r])!==null&&e!==void 0?e:null}var q="candle_pane",Ln="indicator_pane_",z="x_axis_pane",On=1,Wn=50,Vn=function(){function r(e,t){var i,n,o,s,a=this;this._styles={grid:$i(),candle:(s={show:!0,color:Mt,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},{type:_.CandleType.CandleSolid,bar:{upColor:te,downColor:Qt,noChangeColor:It,upBorderColor:te,downBorderColor:Qt,noChangeBorderColor:It,upWickColor:te,downWickColor:Qt,noChangeWickColor:It},area:{lineSize:2,lineColor:tt,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Bt(.01)},{offset:1,color:Bt(.2)}],point:{show:!0,color:tt,radius:4,rippleColor:Bt(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:D({},s),low:D({},s),last:{show:!0,upColor:te,downColor:Qt,noChangeColor:It,line:{show:!0,style:_.LineType.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:_.PolygonType.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:_.LineType.Solid,borderSize:0,borderDashedValue:[2,2],color:ee,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:_.TooltipShowRule.Always,showType:_.TooltipShowType.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:_.CandleTooltipRectPosition.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:Mt,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),indicator:(o=["#FF9600","#935EBD",tt,"#E11D74","#01C5C4"].map(function(g){return{style:_.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:g}}),{ohlc:{upColor:ye,downColor:fe,noChangeColor:It},bars:[{style:_.PolygonType.Fill,borderStyle:_.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:ye,downColor:fe,noChangeColor:It}],lines:o,circles:[{style:_.PolygonType.Fill,borderStyle:_.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:ye,downColor:fe,noChangeColor:It}],lastValueMark:{show:!1,text:{show:!1,style:_.PolygonType.Fill,color:ee,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:_.LineType.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:_.TooltipShowRule.Always,showType:_.TooltipShowType.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:Mt,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),xAxis:Ye(),yAxis:Ye(),separator:{size:1,color:me,fill:!0,activeBackgroundColor:Bt(.08)},crosshair:Qi(),overlay:(i=Bt(.35),n=Bt(.25),{point:{color:tt,borderColor:i,borderSize:1,radius:5,activeColor:tt,activeBorderColor:i,activeBorderSize:3,activeRadius:5},line:{style:_.LineType.Solid,smooth:!1,color:tt,size:1,dashedValue:[2,2]},rect:{style:_.PolygonType.Fill,color:n,borderColor:tt,borderSize:1,borderRadius:0,borderStyle:_.LineType.Solid,borderDashedValue:[2,2]},polygon:{style:_.PolygonType.Fill,color:tt,borderColor:tt,borderSize:1,borderStyle:_.LineType.Solid,borderDashedValue:[2,2]},circle:{style:_.PolygonType.Fill,color:n,borderColor:tt,borderSize:1,borderStyle:_.LineType.Solid,borderDashedValue:[2,2]},arc:{style:_.LineType.Solid,color:tt,size:1,dashedValue:[2,2]},text:{style:_.PolygonType.Fill,color:ee,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:_.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:tt,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:tt}})},this._customApi={formatDate:function(g,f){return Xe(a._dateTimeFormat,g,f)},formatBigNumber:Ge},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(g){return Ue(g,a._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(g){return je(g,a._decimalFold.threshold)}},this._precision={price:2,volume:0},this._dataList=[],this._loadMoreDataCallback=null,this._loading=!0,this._loadDataMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=10,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeWeightTickMap=new Map,this._timeWeightTickList=[],this._minTimeDifference=Number.MAX_SAFE_INTEGER,this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._activeTooltipIcon=null,this._actions=new Map,this._indicators=new Map,this._taskScheduler=new rn,this._overlays=new Map,this._progressOverlayInfo=null,this._pressedOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chart=e,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var l=t??{},u=l.styles,c=l.locale,h=l.timezone,p=l.customApi,d=l.thousandsSeparator,v=l.decimalFold;T(u)&&this.setStyles(u),V(c)&&this.setLocale(c),this.setTimezone(h??""),T(p)&&this.setCustomApi(p),T(d)&&this.setThousandsSeparator(d),T(v)&&this.setDecimalFold(v)}return r.prototype.setStyles=function(e){var t,i,n=null;n=V(e)?Rn(e):e,Y(this._styles,n),st((i=(t=n?.candle)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.custom)&&(this._styles.candle.tooltip.custom=n.candle.tooltip.custom)},r.prototype.getStyles=function(){return this._styles},r.prototype.setCustomApi=function(e){Y(this._customApi,e)},r.prototype.getCustomApi=function(){return this._customApi},r.prototype.setLocale=function(e){this._locale=e},r.prototype.getLocale=function(){return this._locale},r.prototype.setTimezone=function(e){if(!T(this._dateTimeFormat)||this.getTimezone()!==e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};e.length>0&&(t.timeZone=e);var i=null;try{i=new Intl.DateTimeFormat("en",t)}catch{}i!==null&&(this._classifyTimeWeightTicks(this._dataList),this._dateTimeFormat=i)}},r.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},r.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},r.prototype.setThousandsSeparator=function(e){Y(this._thousandsSeparator,e)},r.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},r.prototype.setDecimalFold=function(e){Y(this._decimalFold,e)},r.prototype.getDecimalFold=function(){return this._decimalFold},r.prototype.getPrecision=function(){return this._precision},r.prototype.setPrecision=function(e){Y(this._precision,e),this._synchronizeIndicatorSeriesPrecision()},r.prototype.getDataList=function(){return this._dataList},r.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},r.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},r.prototype.addData=function(e,t,i){var n,o,s,a,l=this,u=!1,c=!1,h=0;if(st(e)){switch(h=e.length,t){case et.Init:this.clearData(),this._dataList=e,this._loadDataMore.backward=(n=i?.forward)!==null&&n!==void 0&&n,this._loadDataMore.forward=(o=i?.forward)!==null&&o!==void 0&&o,this._classifyTimeWeightTicks(this._dataList),this.setOffsetRightDistance(this._offsetRightDistance),c=!0;break;case et.Backward:this._classifyTimeWeightTicks(e,!0),this._dataList=this._dataList.concat(e),this._loadDataMore.backward=(s=i?.backward)!==null&&s!==void 0&&s,c=h>0;break;case et.Forward:this._dataList=e.concat(this._dataList),this._classifyTimeWeightTicks(this._dataList),this._loadDataMore.forward=(a=i?.forward)!==null&&a!==void 0&&a,c=h>0}this._loading=!1,u=!0}else{var p=this._dataList.length,d=e.timestamp,v=G(this._dataList[p-1],"timestamp",0);if(d>v){this._classifyTimeWeightTicks([e],!0),this._dataList.push(e);var g=this.getLastBarRightSideDiffBarCount();g<0&&this.setLastBarRightSideDiffBarCount(--g),h=1,u=!0,c=!0}else d===v&&(this._dataList[p-1]=e,u=!0,c=!0)}u&&c&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this.getIndicatorsByFilter({}).forEach(function(f,y){f.forEach(function(x){l._addIndicatorCalcTask(y,x,t)})}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},r.prototype.setLoadMoreDataCallback=function(e){this._loadMoreDataCallback=e},r.prototype._calcOptimalBarSpace=function(){var e=1-.2*Math.atan(Math.max(4,this._barSpace)-4)/(.5*Math.PI),t=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));t%2==0&&t+2>=this._barSpace&&--t,this._gapBarSpace=Math.max(1,t)},r.prototype._classifyTimeWeightTicks=function(e,t){var i=0,n=null;t!=null&&t?(i=this._dataList.length,n=this._dataList[i-1].timestamp):(this._timeWeightTickMap.clear(),this._minTimeDifference=Number.MAX_SAFE_INTEGER);var o={value:this._minTimeDifference};li(this._timeWeightTickMap,e,this._dateTimeFormat,i,o,n),this._minTimeDifference=o.value,this._timeWeightTickList=Pe(this._timeWeightTickMap,this._barSpace,this._styles.xAxis.tickText)},r.prototype.getTimeWeightTickList=function(){return this._timeWeightTickList},r.prototype._adjustVisibleRange=function(){var e,t,i=this,n=this._dataList.length,o=this._totalBarSpace/this._barSpace,s=0,a=0;this._scrollLimitRole===1?(s=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,a=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(s=this._minVisibleBarCount.left,a=this._minVisibleBarCount.right),s=Math.max(0,s),a=Math.max(0,a);var l=o-Math.min(s,n);this._lastBarRightSideDiffBarCount>l&&(this._lastBarRightSideDiffBarCount=l);var u=-n+Math.min(a,n);this._lastBarRightSideDiffBarCount<u&&(this._lastBarRightSideDiffBarCount=u);var c=Math.round(this._lastBarRightSideDiffBarCount+n+.5),h=c;c>n&&(c=n);var p=Math.round(c-o)-1;p<0&&(p=0);var d=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-o)-1:p;this._visibleRange={from:p,to:c,realFrom:d,realTo:h},this.executeAction(_.ActionType.OnVisibleRangeChange,this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var v=d;v<h;v++){var g=this._dataList[v],f=this.dataIndexToCoordinate(v);this._visibleRangeDataList.push({dataIndex:v,x:f,data:g}),T(g)&&(this._visibleRangeHighLowPrice[0].price<g.high&&(this._visibleRangeHighLowPrice[0].price=g.high,this._visibleRangeHighLowPrice[0].x=f),this._visibleRangeHighLowPrice[1].price>g.low&&(this._visibleRangeHighLowPrice[1].price=g.low,this._visibleRangeHighLowPrice[1].x=f))}if(!this._loading&&T(this._loadMoreDataCallback)){var y=null;p===0?this._loadDataMore.forward&&(this._loading=!0,y={type:et.Forward,data:(e=this._dataList[0])!==null&&e!==void 0?e:null,callback:function(x,m){i.addData(x,et.Forward,{forward:m!=null&&m,backward:m!=null&&m})}}):c===n&&this._loadDataMore.backward&&(this._loading=!0,y={type:et.Backward,data:(t=this._dataList[n-1])!==null&&t!==void 0?t:null,callback:function(x,m){i.addData(x,et.Backward,{forward:m!=null&&m,backward:m!=null&&m})}}),T(y)&&this._loadMoreDataCallback(y)}},r.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},r.prototype.setBarSpace=function(e,t){e<On||e>Wn||this._barSpace===e||(this._barSpace=e,this._timeWeightTickList=Pe(this._timeWeightTickMap,this._barSpace,this._styles.xAxis.tickText),this._calcOptimalBarSpace(),t?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},r.prototype.setTotalBarSpace=function(e){this._totalBarSpace!==e&&(this._totalBarSpace=e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0))},r.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,e):e,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,t!=null&&t&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})),this},r.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},r.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},r.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},r.prototype.setLastBarRightSideDiffBarCount=function(e){this._lastBarRightSideDiffBarCount=e},r.prototype.setMaxOffsetLeftDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.left=e},r.prototype.setMaxOffsetRightDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.right=e},r.prototype.setLeftMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.left=e},r.prototype.setRightMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.right=e},r.prototype.getVisibleRange=function(){return this._visibleRange},r.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},r.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0});var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this.executeAction(_.ActionType.OnScroll,{distance:n})}},r.prototype.getDataByDataIndex=function(e){var t;return(t=this._dataList[e])!==null&&t!==void 0?t:null},r.prototype.coordinateToFloatIndex=function(e){var t=this._dataList.length,i=(this._totalBarSpace-e)/this._barSpace,n=t+this._lastBarRightSideDiffBarCount-i;return Math.round(1e6*n)/1e6},r.prototype.dataIndexToTimestamp=function(e){var t=this._dataList.length;if(t===0)return null;var i=this.getDataByDataIndex(e);if(T(i))return i.timestamp;var n=t-1;return e>n?this._dataList[n].timestamp+this._minTimeDifference*(e-n):e<0?this._dataList[0].timestamp-this._minTimeDifference*Math.abs(e):null},r.prototype.timestampToDataIndex=function(e){var t=this._dataList.length;if(t===0)return 0;var i=t-1,n=this._dataList[i].timestamp;if(e>n)return i+Math.floor((e-n)/this._minTimeDifference);var o=this._dataList[0].timestamp;return e<o?Math.floor((e-o)/this._minTimeDifference):Te(this._dataList,"timestamp",e)},r.prototype.dataIndexToCoordinate=function(e){var t=this._dataList.length+this._lastBarRightSideDiffBarCount-e;return Math.floor(this._totalBarSpace-(t-.5)*this._barSpace+.5)},r.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},r.prototype.zoom=function(e,t){var i,n=this;if(this._zoomEnabled){var o=t??null;B(o?.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var s=o.x,a=this.coordinateToFloatIndex(s),l=this._barSpace,u=this._barSpace+e*(this._barSpace/10);this.setBarSpace(u,function(){n._lastBarRightSideDiffBarCount+=a-n.coordinateToFloatIndex(s)});var c=this._barSpace/l;c!==1&&this.executeAction(_.ActionType.OnZoom,{scale:c})}},r.prototype.setZoomEnabled=function(e){this._zoomEnabled=e},r.prototype.isZoomEnabled=function(){return this._zoomEnabled},r.prototype.setScrollEnabled=function(e){this._scrollEnabled=e},r.prototype.isScrollEnabled=function(){return this._scrollEnabled},r.prototype.setCrosshair=function(e,t){var i,n=e??{},o=0,s=0;s=B(n.x)?(o=this.coordinateToDataIndex(n.x))<0?0:o>this._dataList.length-1?this._dataList.length-1:o:o=this._dataList.length-1;var a=this._dataList[s],l=this.dataIndexToCoordinate(o),u=this._crosshair.x,c=this._crosshair.y,h=this._crosshair.paneId;this._crosshair=D(D({},n),{realX:l,kLineData:a,realDataIndex:o,dataIndex:s,timestamp:(i=this.dataIndexToTimestamp(o))!==null&&i!==void 0?i:void 0}),u===n.x&&c===n.y&&h===n.paneId||(T(a)&&this._chart.crosshairChange(this._crosshair),t!=null&&t||this._chart.updatePane(1))},r.prototype.getCrosshair=function(){return this._crosshair},r.prototype.setActiveTooltipIcon=function(e){this._activeTooltipIcon=e??null},r.prototype.getActiveTooltipIcon=function(){return this._activeTooltipIcon},r.prototype.executeAction=function(e,t){var i;(i=this._actions.get(e))===null||i===void 0||i.execute(t)},r.prototype.subscribeAction=function(e,t){var i;this._actions.has(e)||this._actions.set(e,new nn),(i=this._actions.get(e))===null||i===void 0||i.subscribe(t)},r.prototype.unsubscribeAction=function(e,t){var i=this._actions.get(e);T(i)&&(i.unsubscribe(t),i.isEmpty()&&this._actions.delete(e))},r.prototype.hasAction=function(e){var t=this._actions.get(e);return T(t)&&!t.isEmpty()},r.prototype._sortIndicators=function(e){var t;V(e)?(t=this._indicators.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._indicators.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype._addIndicatorCalcTask=function(e,t,i){var n=this;this._taskScheduler.addTask({id:ii(e,t.name),handler:function(){var o;(o=t.onDataStateChange)===null||o===void 0||o.call(t,{state:Gt.Loading,type:i,indicator:t}),t.calcImp(n._dataList).then(function(s){var a;s&&(n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),(a=t.onDataStateChange)===null||a===void 0||a.call(t,{state:Gt.Ready,type:i,indicator:t}))}).catch(function(){var s;(s=t.onDataStateChange)===null||s===void 0||s.call(t,{state:Gt.Error,type:i,indicator:t})})}})},r.prototype.addIndicator=function(e,t,i){var n=e.name,o=this._indicators.get(t);if(T(o)&&T(o.find(function(a){return a.name===n})))return!1;T(o)||(o=[]);var s=new(hi(n));return this._synchronizeIndicatorSeriesPrecision(s),s.override(e),i||(this.removeIndicator({paneId:t}),o=[]),o.push(s),this._indicators.set(t,o),this._sortIndicators(t),this._addIndicatorCalcTask(t,s,et.Init),!0},r.prototype.getIndicatorsByPaneId=function(e){var t;return(t=this._indicators.get(e))!==null&&t!==void 0?t:[]},r.prototype.getIndicatorsByFilter=function(e){var t=function(a,l){return a.filter(function(u){return!T(l)||u.name===l})},i=e.paneId,n=e.name,o=new Map;if(T(i)){var s=this.getIndicatorsByPaneId(i);o.set(i,t(s,n))}else T(n)?this._indicators.forEach(function(a,l){o.set(l,t(a,n))}):this._indicators.forEach(function(a,l){o.set(l,t(a))});return o},r.prototype.removeIndicator=function(e){var t=this,i=!1;return this.getIndicatorsByFilter(e).forEach(function(n,o){var s=t.getIndicatorsByPaneId(o);n.forEach(function(a){var l=s.findIndex(function(u){return u.name===a.name});l>-1&&(t._taskScheduler.removeTask(ii(o,a.name)),s.splice(l,1),i=!0)}),s.length===0&&t._indicators.delete(o)}),i},r.prototype.hasIndicators=function(e){return this._indicators.has(e)},r.prototype._synchronizeIndicatorSeriesPrecision=function(e){var t=this._precision,i=t.price,n=t.volume,o=function(s){switch(s.series){case _.IndicatorSeries.Price:s.setSeriesPrecision(i);break;case _.IndicatorSeries.Volume:s.setSeriesPrecision(n)}};T(e)?o(e):this._indicators.forEach(function(s){s.forEach(function(a){o(a)})})},r.prototype.overrideIndicator=function(e,t){var i=this,n=e.name,o=new Map;if(T(t)){var s=this._indicators.get(t);T(s)&&o.set(t,s)}else o=this._indicators;var a=!1,l=!1;return o.forEach(function(u,c){var h=u.find(function(g){return g.name===n});if(T(h)){h.override(e);var p=h.shouldUpdateImp(),d=p.calc,v=p.draw;p.sort&&(l=!0),d?i._addIndicatorCalcTask(c,h,et.Update):v&&(a=!0)}}),l&&this._sortIndicators(),!!a&&(this._chart.layout({update:!0}),!0)},r.prototype.getOverlaysByFilter=function(e){var t,i,n=e.id,o=e.groupId,s=e.paneId,a=e.name,l=function(d){return d.filter(function(v){return T(n)?v.id===n:T(o)?v.groupId===o&&(!T(a)||v.name===a):!T(a)||v.name===a})},u=new Map;if(T(s)){var c=this.getOverlaysByPaneId(s);u.set(s,l(c))}else this._overlays.forEach(function(d,v){u.set(v,l(d))});var h=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay;if(T(h)){var p=(i=u.get(h.paneId))!==null&&i!==void 0?i:[];p.push(h),u.set(h.paneId,p)}return u},r.prototype.getOverlaysByPaneId=function(e){var t;if(!V(e)){var i=[];return this._overlays.forEach(function(n){i=i.concat(n)}),i}return(t=this._overlays.get(e))!==null&&t!==void 0?t:[]},r.prototype._sortOverlays=function(e){var t;V(e)?(t=this._overlays.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._overlays.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype.addOverlays=function(e,t){var i=this,n=[],o=e.map(function(s,a){var l,u,c,h,p,d;if(T(s.id)){var v=null;try{for(var g=J(i._overlays),f=g.next();!f.done;f=g.next())if(T(m=dt(f.value,2)[1].find(function(S){return S.id===s.id}))){v=m;break}}catch(S){l={error:S}}finally{try{f&&!f.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}if(T(v))return s.id}var y=Bn(s.name);if(T(y)){var x=(c=s.id)!==null&&c!==void 0?c:Qe("overlay_"),m=new y;s.id=x,(h=s.groupId)!==null&&h!==void 0||(s.groupId=x),m.override(s);var b=m.paneId;return n.includes(b)||n.push(b),m.isDrawing()?i._progressOverlayInfo={paneId:b,overlay:m,appointPaneFlag:t[a]}:(i._overlays.has(b)||i._overlays.set(b,[]),(p=i._overlays.get(b))===null||p===void 0||p.push(m)),m.isStart()&&((d=m.onDrawStart)===null||d===void 0||d.call(m,{overlay:m,chart:i._chart})),x}return null});return n.length>0&&(this._sortOverlays(),n.forEach(function(s){i._chart.updatePane(1,s)}),this._chart.updatePane(1,z)),o},r.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},r.prototype.progressOverlayComplete=function(){var e;if(this._progressOverlayInfo!==null){var t=this._progressOverlayInfo,i=t.overlay,n=t.paneId;i.isDrawing()||(this._overlays.has(n)||this._overlays.set(n,[]),(e=this._overlays.get(n))===null||e===void 0||e.push(i),this._sortOverlays(n),this._progressOverlayInfo=null)}},r.prototype.updateProgressOverlayInfo=function(e,t){this._progressOverlayInfo!==null&&(Ht(t)&&t&&(this._progressOverlayInfo.appointPaneFlag=t),this._progressOverlayInfo.paneId=e,this._progressOverlayInfo.overlay.override({paneId:e}))},r.prototype.overrideOverlay=function(e){var t=this,i=!1,n=[];return this.getOverlaysByFilter(e).forEach(function(o,s){o.forEach(function(a){a.override(e);var l=a.shouldUpdate(),u=l.sort,c=l.draw;u&&(i=!0),(u||c)&&(n.includes(s)||n.push(s))})}),i&&this._sortOverlays(),n.length>0&&(n.forEach(function(o){t._chart.updatePane(1,o)}),this._chart.updatePane(1,z),!0)},r.prototype.removeOverlay=function(e){var t=this,i=[];return this.getOverlaysByFilter(e).forEach(function(n,o){var s=t.getOverlaysByPaneId(o);n.forEach(function(a){var l;if((l=a.onRemoved)===null||l===void 0||l.call(a,{overlay:a,chart:t._chart}),i.includes(o)||i.push(o),a.isDrawing())t._progressOverlayInfo=null;else{var u=s.findIndex(function(c){return c.id===a.id});u>-1&&s.splice(u,1)}s.length===0&&t._overlays.delete(o)})}),i.length>0&&(i.forEach(function(n){t._chart.updatePane(1,n)}),this._chart.updatePane(1,z),!0)},r.prototype.setPressedOverlayInfo=function(e){this._pressedOverlayInfo=e},r.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},r.prototype.setHoverOverlayInfo=function(e,t){var i=this._hoverOverlayInfo,n=i.overlay,o=i.figureType,s=i.figureKey,a=i.figureIndex,l=e.overlay;if((n?.id!==l?.id||o!==e.figureType||a!==e.figureIndex)&&(this._hoverOverlayInfo=e,n?.id!==l?.id)){var u=!1,c=!1;n!==null&&(c=!0,j(n.onMouseLeave)&&(n.onMouseLeave(D({chart:this._chart,overlay:n,figureKey:s,figureIndex:a},t)),u=!0)),l!==null&&(c=!0,j(l.onMouseEnter)&&(l.onMouseEnter(D({chart:this._chart,overlay:l,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),u=!0)),c&&this._sortOverlays(),u||this._chart.updatePane(1)}},r.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},r.prototype.setClickOverlayInfo=function(e,t){var i,n,o,s,a=this._clickOverlayInfo,l=a.paneId,u=a.overlay,c=a.figureType,h=a.figureKey,p=a.figureIndex,d=e.overlay;(i=d?.isDrawing())!==null&&i!==void 0&&i||(n=d?.onClick)===null||n===void 0||n.call(d,D({chart:this._chart,overlay:d,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),u?.id===d?.id&&c===e.figureType&&p===e.figureIndex||(this._clickOverlayInfo=e,u?.id!==d?.id&&((o=u?.onDeselected)===null||o===void 0||o.call(u,D({chart:this._chart,overlay:u,figureKey:h,figureIndex:p},t)),(s=d?.onSelected)===null||s===void 0||s.call(d,D({chart:this._chart,overlay:d,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),this._chart.updatePane(1,e.paneId),l!==e.paneId&&this._chart.updatePane(1,l),this._chart.updatePane(1,z)))},r.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},r.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},r.prototype.isOverlayDrawing=function(){var e,t;return(t=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay.isDrawing())!==null&&t!==void 0&&t},r.prototype.clearData=function(){this._loadDataMore.backward=!1,this._loadDataMore.forward=!1,this._loading=!0,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeWeightTickMap.clear(),this._timeWeightTickList=[],this._crosshair={},this._activeTooltipIcon=null},r.prototype.getChart=function(){return this._chart},r}(),$="main",vt="xAxis",lt="yAxis",Zt="separator",yi=function(){function r(e,t){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Wt,this._mediaQueryListener=function(){var n=wt(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*n),i._nextPixelHeight=Math.round(i._element.clientHeight*n),i._resetPixelRatio()},this._listener=t,this._element=pt("canvas",e),this._ctx=this._element.getContext("2d"),function(){return Ne(this,void 0,void 0,function(){return ze(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o){var s=new ResizeObserver(function(a){o(a.every(function(l){return"devicePixelContentBoxSize"in l})),s.disconnect()});s.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,n.sent()]}})})}().then(function(n){i._supportedDevicePixelContentBox=n,n?(i._resizeObserver=new ResizeObserver(function(o){var s=o.find(function(l){return l.target===i._element}),a=s?.devicePixelContentBoxSize[0];T(a)&&(i._nextPixelWidth=a.inlineSize,i._nextPixelHeight=a.blockSize,i._pixelWidth===i._nextPixelWidth&&i._pixelHeight===i._nextPixelHeight||i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(wt(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(n){return!1})}return r.prototype._resetPixelRatio=function(){var e=this;this._executeListener(function(){var t=e._element.clientWidth,i=e._element.clientHeight;e._width=t,e._height=i,e._pixelWidth=e._nextPixelWidth,e._pixelHeight=e._nextPixelHeight,e._element.width=e._nextPixelWidth,e._element.height=e._nextPixelHeight;var n=e._nextPixelWidth/t,o=e._nextPixelHeight/i;e._ctx.scale(n,o)})},r.prototype._executeListener=function(e){var t=this;this._requestAnimationId===Wt&&(this._requestAnimationId=re(function(){t._ctx.clearRect(0,0,t._width,t._height),e?.(),t._listener(),t._requestAnimationId=Wt}))},r.prototype.update=function(e,t){if(this._width!==e||this._height!==t){if(this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px"),!this._supportedDevicePixelContentBox){var i=wt(this._element);this._nextPixelWidth=Math.round(e*i),this._nextPixelHeight=Math.round(t*i),this._resetPixelRatio()}}else this._executeListener()},r.prototype.getElement=function(){return this._element},r.prototype.getContext=function(){return this._ctx},r.prototype.destroy=function(){T(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),T(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},r}(),mi=function(r){function e(t,i){var n=r.call(this)||this;return n._bounding=ne(),n._pane=i,n._rootContainer=t,n._container=n.createContainer(),t.appendChild(n._container),n}return W(e,r),e.prototype.setBounding=function(t){return Y(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(Ee),Me=function(r){function e(t,i){var n=r.call(this,t,i)||this;n._mainCanvas=new yi({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateMain(n._mainCanvas.getContext())}),n._overlayCanvas=new yi({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateOverlay(n._overlayCanvas.getContext())});var o=n.getContainer();return o.appendChild(n._mainCanvas.getElement()),o.appendChild(n._overlayCanvas.getElement()),n}return W(e,r),e.prototype.createContainer=function(){return pt("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,i,n){var o=i.width,s=i.height,a=i.left;t.style.left="".concat(a,"px");var l=n,u=t.clientWidth,c=t.clientHeight;switch(o===u&&s===c||(t.style.width="".concat(o,"px"),t.style.height="".concat(s,"px"),l=3),l){case 0:this._mainCanvas.update(o,s);break;case 1:this._overlayCanvas.update(o,s);break;case 3:case 4:this._mainCanvas.update(o,s),this._overlayCanvas.update(o,s)}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,s=pt("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),a=s.getContext("2d"),l=wt(s);return s.width=n*l,s.height=o*l,a.scale(l,l),a.drawImage(this._mainCanvas.getElement(),0,0,n,o),t&&a.drawImage(this._overlayCanvas.getElement(),0,0,n,o),s},e}(mi);function Vt(r){return r==="transparent"||r==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(r)||/^[hH][Ss][Ll][Aa]\(([\s]*(360ï½œ3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(r)}function _i(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),s=o.next();!s.done;s=o.next()){var a=s.value,l=a.x,u=a.y,c=a.r,h=r.x-l,p=r.y-u;if(!(h*h+p*p>c*c))return!0}}catch(d){t={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var Nn={name:"circle",checkEventOn:_i,draw:function(r,e,t){(function(i,n,o){var s=[];s=s.concat(n);var a=o.style,l=a===void 0?_.PolygonType.Fill:a,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,v=d===void 0?"currentColor":d,g=o.borderStyle,f=g===void 0?_.LineType.Solid:g,y=o.borderDashedValue,x=y===void 0?[2,2]:y,m=!(l!==_.PolygonType.Fill&&o.style!==_.PolygonType.StrokeFill||V(c)&&Vt(c));m&&(i.fillStyle=c,s.forEach(function(b){var S=b.x,C=b.y,w=b.r;i.beginPath(),i.arc(S,C,w,0,2*Math.PI),i.closePath(),i.fill()})),(l===_.PolygonType.Stroke||o.style===_.PolygonType.StrokeFill)&&p>0&&!Vt(v)&&(i.strokeStyle=v,i.lineWidth=p,f===_.LineType.Dashed?i.setLineDash(x):i.setLineDash([]),s.forEach(function(b){var S=b.x,C=b.y,w=b.r;(!m||w>p)&&(i.beginPath(),i.arc(S,C,w,0,2*Math.PI),i.closePath(),i.stroke())}))})(r,e,t)}};function xi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),s=o.next();!s.done;s=o.next()){for(var a=s.value,l=!1,u=a.coordinates,c=0,h=u.length-1;c<u.length;h=c++)u[c].y>r.y!=u[h].y>r.y&&r.x<(u[h].x-u[c].x)*(r.y-u[c].y)/(u[h].y-u[c].y)+u[c].x&&(l=!l);if(l)return!0}}catch(p){t={error:p}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var zn={name:"polygon",checkEventOn:xi,draw:function(r,e,t){(function(i,n,o){var s=[];s=s.concat(n);var a=o.style,l=a===void 0?_.PolygonType.Fill:a,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,v=d===void 0?"currentColor":d,g=o.borderStyle,f=g===void 0?_.LineType.Solid:g,y=o.borderDashedValue,x=y===void 0?[2,2]:y;l!==_.PolygonType.Fill&&o.style!==_.PolygonType.StrokeFill||V(c)&&Vt(c)||(i.fillStyle=c,s.forEach(function(m){var b=m.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var S=1;S<b.length;S++)i.lineTo(b[S].x,b[S].y);i.closePath(),i.fill()})),(l===_.PolygonType.Stroke||o.style===_.PolygonType.StrokeFill)&&p>0&&!Vt(v)&&(i.strokeStyle=v,i.lineWidth=p,f===_.LineType.Dashed?i.setLineDash(x):i.setLineDash([]),s.forEach(function(m){var b=m.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var S=1;S<b.length;S++)i.lineTo(b[S].x,b[S].y);i.closePath(),i.stroke()}))})(r,e,t)}};function bi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),s=o.next();!s.done;s=o.next()){var a=s.value,l=a.x,u=a.width;u<4&&(l-=2,u=4);var c=a.y,h=a.height;if(h<4&&(c-=2,h=4),r.x>=l&&r.x<=l+u&&r.y>=c&&r.y<=c+h)return!0}}catch(p){t={error:p}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function Ci(r,e,t){var i,n=[];n=n.concat(e);var o=t.style,s=o===void 0?_.PolygonType.Fill:o,a=t.color,l=a===void 0?"transparent":a,u=t.borderSize,c=u===void 0?1:u,h=t.borderColor,p=h===void 0?"transparent":h,d=t.borderStyle,v=d===void 0?_.LineType.Solid:d,g=t.borderRadius,f=g===void 0?0:g,y=t.borderDashedValue,x=y===void 0?[2,2]:y,m=(i=r.roundRect)!==null&&i!==void 0?i:r.rect,b=!(s!==_.PolygonType.Fill&&t.style!==_.PolygonType.StrokeFill||V(l)&&Vt(l));if(b&&(r.fillStyle=l,n.forEach(function(w){var P=w.x,E=w.y,k=w.width,A=w.height;r.beginPath(),m.call(r,P,E,k,A,f),r.closePath(),r.fill()})),(s===_.PolygonType.Stroke||t.style===_.PolygonType.StrokeFill)&&c>0&&!Vt(p)){r.strokeStyle=p,r.fillStyle=p,r.lineWidth=c,v===_.LineType.Dashed?r.setLineDash(x):r.setLineDash([]);var S=c%2==1?.5:0,C=Math.round(2*S);n.forEach(function(w){var P=w.x,E=w.y,k=w.width,A=w.height;k>2*c&&A>2*c?(r.beginPath(),m.call(r,P+S,E+S,k-C,A-C,f),r.closePath(),r.stroke()):b||r.fillRect(P,E,k,A)})}}var Yn={name:"rect",checkEventOn:bi,draw:function(r,e,t){Ci(r,e,t)}};function wi(r,e){var t=e.size,i=t===void 0?12:t,n=e.paddingLeft,o=n===void 0?0:n,s=e.paddingTop,a=s===void 0?0:s,l=e.paddingRight,u=l===void 0?0:l,c=e.paddingBottom,h=c===void 0?0:c,p=e.weight,d=p===void 0?"normal":p,v=e.family,g=r.x,f=r.y,y=r.text,x=r.align,m=x===void 0?"left":x,b=r.baseline,S=b===void 0?"top":b,C=r.width,w=r.height,P=C??o+Xt(y,i,d,v)+u,E=w??a+i+h,k=0;switch(m){case"left":case"start":k=g;break;case"right":case"end":k=g-P;break;default:k=g-P/2}var A=0;switch(S){case"top":case"hanging":A=f;break;case"bottom":case"ideographic":case"alphabetic":A=f-E;break;default:A=f-E/2}return{x:k,y:A,width:P,height:E}}function Ti(r,e,t){var i,n,o=[];o=o.concat(e);try{for(var s=J(o),a=s.next();!a.done;a=s.next()){var l=wi(a.value,t),u=l.x,c=l.y,h=l.width,p=l.height;if(r.x>=u&&r.x<=u+h&&r.y>=c&&r.y<=c+p)return!0}}catch(d){i={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return!1}var Hn={name:"text",checkEventOn:Ti,draw:function(r,e,t){(function(i,n,o){var s=[];s=s.concat(n);var a=o.color,l=a===void 0?"currentColor":a,u=o.size,c=u===void 0?12:u,h=o.family,p=o.weight,d=o.paddingLeft,v=d===void 0?0:d,g=o.paddingTop,f=g===void 0?0:g,y=o.paddingRight,x=y===void 0?0:y,m=s.map(function(b){return wi(b,o)});Ci(i,m,D(D({},o),{color:o.backgroundColor})),i.textAlign="left",i.textBaseline="top",i.font=Dt(c,p,h),i.fillStyle=l,s.forEach(function(b,S){var C=m[S];i.fillText(b.text,C.x+v,C.y+f,C.width-v-x)})})(r,e,t)}};function Si(r,e){var t,i,n,o,s,a,l=[];l=l.concat(e);try{for(var u=J(l),c=u.next();!c.done;c=u.next()){var h=c.value;if(Math.abs((o=h,s=void 0,a=void 0,s=(n=r).x-o.x,a=n.y-o.y,Math.sqrt(s*s+a*a)-h.r))<2){var p=h.r,d=h.startAngle,v=h.endAngle,g=p*Math.cos(d)+h.x,f=p*Math.sin(d)+h.y,y=p*Math.cos(v)+h.x,x=p*Math.sin(v)+h.y;if(r.x<=Math.max(g,y)+2&&r.x>=Math.min(g,y)-2&&r.y<=Math.max(f,x)+2&&r.y>=Math.min(f,x)-2)return!0}}}catch(m){t={error:m}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return!1}var Xn={name:"arc",checkEventOn:Si,draw:function(r,e,t){(function(i,n,o){var s=[];s=s.concat(n);var a=o.style,l=a===void 0?_.LineType.Solid:a,u=o.size,c=u===void 0?1:u,h=o.color,p=h===void 0?"currentColor":h,d=o.dashedValue,v=d===void 0?[2,2]:d;i.lineWidth=c,i.strokeStyle=p,l===_.LineType.Dashed?i.setLineDash(v):i.setLineDash([]),s.forEach(function(g){var f=g.x,y=g.y,x=g.r,m=g.startAngle,b=g.endAngle;i.beginPath(),i.arc(f,y,x,m,b),i.stroke(),i.closePath()})})(r,e,t)}},Kt={};[Nn,Sn,zn,Yn,Hn,Xn].forEach(function(r){Kt[r.name]=di.extend(r)});var ft,rt=function(r){function e(t){var i=r.call(this)||this;return i._widget=t,i}return W(e,r),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,i){var n,o,s=(n=t.name,(o=Kt[n])!==null&&o!==void 0?o:null);if(s!==null){var a=new s(t);if(T(i)){for(var l in i)i.hasOwnProperty(l)&&a.registerEvent(l,i[l]);this.addChild(a)}return a}return null},e.prototype.draw=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.clear(),this.drawImp(t,i)},e}(Ee),Gn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i,n,o=this.getWidget(),s=this.getWidget().getPane(),a=s.getChart(),l=o.getBounding(),u=a.getStyles().grid;if(u.show){t.save(),t.globalCompositeOperation="destination-over";var c=u.horizontal;if(c.show){var h=s.getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:0,y:d.coord},{x:l.width,y:d.coord}]}});(i=this.createFigure({name:"line",attrs:h,styles:c}))===null||i===void 0||i.draw(t)}var p=u.vertical;p.show&&(h=a.getXAxisPane().getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:d.coord,y:0},{x:d.coord,y:l.height}]}}),(n=this.createFigure({name:"line",attrs:h,styles:p}))===null||n===void 0||n.draw(t)),t.restore()}},e}(rt),Pi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.eachChildren=function(t){for(var i=this.getWidget().getPane().getChart().getChartStore(),n=i.getVisibleRangeDataList(),o=i.getBarSpace(),s=n.length,a=0;a<s;)t(n[a],o,a),++a},e}(rt),Ei=function(r){function e(){var t=r.apply(this,Yt([],dt(arguments),!1))||this;return t._boundCandleBarClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction(_.ActionType.OnCandleBarClick,i),!1}},t}return W(e,r),e.prototype.drawImp=function(t){var i=this,n=this.getWidget().getPane(),o=n.getId()===q,s=n.getChart().getChartStore(),a=this.getCandleBarOptions();if(a!==null){var l=0,u=0;if(a.type===_.CandleType.Ohlc){var c=s.getBarSpace().gapBar;(l=Math.min(Math.max(Math.round(.2*c),1),8))>2&&l%2==1&&l--,u=Math.floor(u/2)}var h=n.getAxisComponent();this.eachChildren(function(p,d){var v=p.data,g=p.x;if(T(v)){var f=v.open,y=v.high,x=v.low,m=v.close,b=a.type,S=a.styles,C=[];m>f?(C[0]=S.upColor,C[1]=S.upBorderColor,C[2]=S.upWickColor):m<f?(C[0]=S.downColor,C[1]=S.downBorderColor,C[2]=S.downWickColor):(C[0]=S.noChangeColor,C[1]=S.noChangeBorderColor,C[2]=S.noChangeWickColor);var w=h.convertToPixel(f),P=h.convertToPixel(m),E=[w,P,h.convertToPixel(y),h.convertToPixel(x)];E.sort(function(R,M){return R-M});var k=d.gapBar%2==0?1:0,A=[];switch(b){case _.CandleType.CandleSolid:A=i._createSolidBar(g,E,d,C,k);break;case _.CandleType.CandleStroke:A=i._createStrokeBar(g,E,d,C,k);break;case _.CandleType.CandleUpStroke:A=m>f?i._createStrokeBar(g,E,d,C,k):i._createSolidBar(g,E,d,C,k);break;case _.CandleType.CandleDownStroke:A=f>m?i._createStrokeBar(g,E,d,C,k):i._createSolidBar(g,E,d,C,k);break;case _.CandleType.Ohlc:A=[{name:"rect",attrs:[{x:g-u,y:E[0],width:l,height:E[3]-E[0]},{x:g-d.halfGapBar,y:w+l>E[3]?E[3]-l:w,width:d.halfGapBar,height:l},{x:g+u,y:P+l>E[3]?E[3]-l:P,width:d.halfGapBar-u,height:l}],styles:{color:C[0]}}]}A.forEach(function(R){var M,I=null;o&&(I={mouseClickEvent:i._boundCandleBarClickEvent(p)}),(M=i.createFigure(R,I??void 0))===null||M===void 0||M.draw(t)})}})}},e.prototype.getCandleBarOptions=function(){var t=this.getWidget().getPane().getChart().getStyles().candle;return{type:t.type,styles:t.bar}},e.prototype._createSolidBar=function(t,i,n,o,s){return[{name:"rect",attrs:{x:t,y:i[0],width:1,height:i[3]-i[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+s,height:Math.max(1,i[2]-i[1])},styles:{style:_.PolygonType.StrokeFill,color:o[0],borderColor:o[1]}}]},e.prototype._createStrokeBar=function(t,i,n,o,s){return[{name:"rect",attrs:[{x:t,y:i[0],width:1,height:i[1]-i[0]},{x:t,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+s,height:Math.max(1,i[2]-i[1])},styles:{style:_.PolygonType.Stroke,borderColor:o[1]}}]},e}(Pi),Un=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.getCandleBarOptions=function(){var t,i,n=this.getWidget().getPane();if(!n.getAxisComponent().isInCandle()){var o=n.getChart().getChartStore(),s=o.getIndicatorsByPaneId(n.getId());try{for(var a=J(s),l=a.next();!l.done;l=a.next()){var u=l.value;if(u.shouldOhlc&&u.visible){var c=u.styles,h=o.getStyles().indicator,p=G(c,"ohlc.upColor",h.ohlc.upColor),d=G(c,"ohlc.downColor",h.ohlc.downColor),v=G(c,"ohlc.noChangeColor",h.ohlc.noChangeColor);return{type:_.CandleType.Ohlc,styles:{upColor:p,downColor:d,noChangeColor:v,upBorderColor:p,downBorderColor:d,noChangeBorderColor:v,upWickColor:p,downWickColor:d,noChangeWickColor:v}}}}}catch(g){t={error:g}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}}return null},e.prototype.drawImp=function(t){var i=this;r.prototype.drawImp.call(this,t);var n=this.getWidget(),o=n.getPane(),s=o.getChart(),a=n.getBounding(),l=s.getXAxisPane().getAxisComponent(),u=o.getAxisComponent(),c=s.getChartStore(),h=c.getIndicatorsByPaneId(o.getId()),p=c.getStyles().indicator;t.save(),h.forEach(function(d){if(d.visible){d.zLevel<0?t.globalCompositeOperation="destination-over":t.globalCompositeOperation="source-over";var v=!1;if(d.draw!==null&&(t.save(),v=d.draw({ctx:t,chart:s,indicator:d,bounding:a,xAxis:l,yAxis:u}),t.restore()),!v){var g=d.result,f=[];i.eachChildren(function(y,x){var m,b,S,C=x.halfGapBar,w=y.dataIndex,P=y.x,E=l.convertToPixel(w-1),k=l.convertToPixel(w+1),A=(m=g[w-1])!==null&&m!==void 0?m:null,R=(b=g[w])!==null&&b!==void 0?b:null,M=(S=g[w+1])!==null&&S!==void 0?S:null,I={x:E},F={x:P},O={x:k};d.figures.forEach(function(L){var N=L.key,K=A?.[N];B(K)&&(I[N]=u.convertToPixel(K));var U=R?.[N];B(U)&&(F[N]=u.convertToPixel(U));var Q=M?.[N];B(Q)&&(O[N]=u.convertToPixel(Q))}),xe(d,w,p,function(L,N,K){var U,Q,H;if(T(R?.[L.key])){var yt=F[L.key],X=(U=L.attrs)===null||U===void 0?void 0:U.call(L,{data:{prev:A,current:R,next:M},coordinate:{prev:I,current:F,next:O},bounding:a,barSpace:x,xAxis:l,yAxis:u});if(!T(X))switch(L.type){case"circle":X={x:P,y:yt,r:Math.max(1,C)};break;case"rect":case"bar":var Tt=(Q=L.baseValue)!==null&&Q!==void 0?Q:u.getRange().from,St=u.convertToPixel(Tt),mt=Math.abs(St-yt);Tt!==R?.[L.key]&&(mt=Math.max(1,mt)),X={x:P-C,y:yt>St?St:yt,width:Math.max(1,2*C),height:mt};break;case"line":T(f[K])||(f[K]=[]),B(F[L.key])&&B(O[L.key])&&f[K].push({coordinates:[{x:F.x,y:F[L.key]},{x:O.x,y:O[L.key]}],styles:N})}var ot=L.type;T(X)&&ot!=="line"&&((H=i.createFigure({name:ot==="bar"?"rect":ot,attrs:X,styles:N}))===null||H===void 0||H.draw(t))}})}),f.forEach(function(y){var x,m,b,S;if(y.length>1){for(var C=[{coordinates:[y[0].coordinates[0],y[0].coordinates[1]],styles:y[0].styles}],w=1;w<y.length;w++){var P=C[C.length-1],E=y[w],k=P.coordinates[P.coordinates.length-1];k.x===E.coordinates[0].x&&k.y===E.coordinates[0].y&&P.styles.style===E.styles.style&&P.styles.color===E.styles.color&&P.styles.size===E.styles.size&&P.styles.smooth===E.styles.smooth&&((x=P.styles.dashedValue)===null||x===void 0?void 0:x[0])===((m=E.styles.dashedValue)===null||m===void 0?void 0:m[0])&&((b=P.styles.dashedValue)===null||b===void 0?void 0:b[1])===((S=E.styles.dashedValue)===null||S===void 0?void 0:S[1])?P.coordinates.push(E.coordinates[1]):C.push({coordinates:[E.coordinates[0],E.coordinates[1]],styles:E.styles})}C.forEach(function(A){var R,M=A.coordinates,I=A.styles;(R=i.createFigure({name:"line",attrs:{coordinates:M},styles:I}))===null||R===void 0||R.draw(t)})}})}}}),t.restore()},e}(Ei),jn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=i.getBounding(),s=i.getPane().getChart().getChartStore(),a=s.getCrosshair(),l=s.getStyles().crosshair;if(V(a.paneId)&&l.show){if(a.paneId===n.getId()){var u=a.y;this._drawLine(t,[{x:0,y:u},{x:o.width,y:u}],l.horizontal)}var c=a.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:o.height}],l.vertical)}},e.prototype._drawLine=function(t,i,n){var o;if(n.show){var s=n.line;s.show&&((o=this.createFigure({name:"line",attrs:{coordinates:i},styles:s}))===null||o===void 0||o.draw(t))}},e}(rt),Ii=function(r){function e(){var t=r.apply(this,Yt([],dt(arguments),!1))||this;return t._boundIconClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction(_.ActionType.OnTooltipIconClick,D({},i)),!0}},t._boundIconMouseMoveEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().setActiveTooltipIcon(D({},i)),!0}},t}return W(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore();if(T(n.getCrosshair().kLineData)){var o=i.getBounding(),s=n.getStyles().indicator.tooltip,a=s.offsetLeft,l=s.offsetTop,u=s.offsetRight;this.drawIndicatorTooltip(t,a,l,o.width-u)}},e.prototype.drawIndicatorTooltip=function(t,i,n,o){var s=this,a=this.getWidget().getPane(),l=a.getChart().getChartStore(),u=l.getStyles().indicator.tooltip;if(this.isDrawTooltip(l.getCrosshair(),u)){var c=l.getIndicatorsByPaneId(a.getId()),h=u.text;c.forEach(function(p){var d=0,v={x:i,y:n},g=s.getIndicatorTooltipData(p),f=g.name,y=g.calcParamsText,x=g.legends,m=g.icons,b=f.length>0,S=x.length>0;if(b||S){var C=dt(s.classifyTooltipIcons(m),3),w=C[0],P=C[1],E=C[2];if(d=s.drawStandardTooltipIcons(t,w,v,p.name,i,d,o),b){var k=f;y.length>0&&(k="".concat(k).concat(y)),d=s.drawStandardTooltipLegends(t,[{title:{text:"",color:h.color},value:{text:k,color:h.color}}],v,i,d,o,h)}d=s.drawStandardTooltipIcons(t,P,v,p.name,i,d,o),S&&(d=s.drawStandardTooltipLegends(t,x,v,i,d,o,u.text)),d=s.drawStandardTooltipIcons(t,E,v,p.name,i,d,o),n=v.y+d}})}return n},e.prototype.drawStandardTooltipIcons=function(t,i,n,o,s,a,l){var u=this;if(i.length>0){var c=0,h=0;i.forEach(function(g){var f=g.marginLeft,y=f===void 0?0:f,x=g.marginTop,m=x===void 0?0:x,b=g.marginRight,S=b===void 0?0:b,C=g.marginBottom,w=C===void 0?0:C,P=g.paddingLeft,E=P===void 0?0:P,k=g.paddingTop,A=k===void 0?0:k,R=g.paddingRight,M=R===void 0?0:R,I=g.paddingBottom,F=I===void 0?0:I,O=g.size,L=g.fontFamily,N=g.icon;t.font=Dt(O,"normal",L),c+=y+E+t.measureText(N).width+M+S,h=Math.max(h,m+A+O+F+w)}),n.x+c>l?(n.x=s,n.y+=a,a=h):a=Math.max(a,h);var p=this.getWidget().getPane(),d=p.getId(),v=p.getChart().getChartStore().getActiveTooltipIcon();i.forEach(function(g){var f,y=g.marginLeft,x=y===void 0?0:y,m=g.marginTop,b=m===void 0?0:m,S=g.marginRight,C=S===void 0?0:S,w=g.paddingLeft,P=w===void 0?0:w,E=g.paddingTop,k=E===void 0?0:E,A=g.paddingRight,R=A===void 0?0:A,M=g.paddingBottom,I=M===void 0?0:M,F=g.color,O=g.activeColor,L=g.size,N=g.fontFamily,K=g.icon,U=g.backgroundColor,Q=g.activeBackgroundColor,H=v?.paneId===d&&v.indicatorName===o&&v.iconId===g.id;(f=u.createFigure({name:"text",attrs:{text:K,x:n.x+x,y:n.y+b},styles:{paddingLeft:P,paddingTop:k,paddingRight:R,paddingBottom:I,color:H?O:F,size:L,family:N,backgroundColor:H?Q:U}},{mouseClickEvent:u._boundIconClickEvent({paneId:d,indicatorName:o,iconId:g.id}),mouseMoveEvent:u._boundIconMouseMoveEvent({paneId:d,indicatorName:o,iconId:g.id})}))===null||f===void 0||f.draw(t),n.x+=x+P+t.measureText(K).width+R+C})}return a},e.prototype.drawStandardTooltipLegends=function(t,i,n,o,s,a,l){var u=this;if(i.length>0){var c=l.marginLeft,h=l.marginTop,p=l.marginRight,d=l.marginBottom,v=l.size,g=l.family,f=l.weight;t.font=Dt(v,f,g),i.forEach(function(y){var x,m,b=y.title,S=y.value,C=t.measureText(b.text).width,w=C+t.measureText(S.text).width,P=h+v+d;n.x+c+w+p>a?(n.x=o,n.y+=s,s=P):s=Math.max(s,P),b.text.length>0&&((x=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+h,text:b.text},styles:{color:b.color,size:v,family:g,weight:f}}))===null||x===void 0||x.draw(t)),(m=u.createFigure({name:"text",attrs:{x:n.x+c+C,y:n.y+h,text:S.text},styles:{color:S.color,size:v,family:g,weight:f}}))===null||m===void 0||m.draw(t),n.x+=c+w+p})}return s},e.prototype.isDrawTooltip=function(t,i){var n=i.showRule;return n===_.TooltipShowRule.Always||n===_.TooltipShowRule.FollowCross&&V(t.paneId)},e.prototype.getIndicatorTooltipData=function(t){var i,n,o=this.getWidget().getPane().getChart().getChartStore(),s=o.getStyles().indicator,a=s.tooltip,l=a.showName?t.shortName:"",u="",c=t.calcParams;c.length>0&&a.showParams&&(u="(".concat(c.join(","),")"));var h={name:l,calcParamsText:u,legends:[],icons:a.icons},p=o.getCrosshair().dataIndex,d=t.result,v=o.getCustomApi(),g=o.getDecimalFold(),f=o.getThousandsSeparator(),y=[];if(t.visible){var x=(n=(i=d[p])!==null&&i!==void 0?i:d[p-1])!==null&&n!==void 0?n:{};xe(t,p,s,function(M,I){if(V(M.title)){var F=I.color,O=x[M.key];B(O)&&(O=Z(O,t.precision),t.shouldFormatBigNumber&&(O=v.formatBigNumber(O))),y.push({title:{text:M.title,color:F},value:{text:g.format(f.format(O??a.defaultValue)),color:F}})}}),h.legends=y}if(j(t.createTooltipDataSource)){var m=this.getWidget(),b=m.getPane(),S=b.getChart(),C=t.createTooltipDataSource({chart:S,indicator:t,crosshair:o.getCrosshair(),bounding:m.getBounding(),xAxis:b.getChart().getXAxisPane().getAxisComponent(),yAxis:b.getAxisComponent()}),w=C.name,P=C.calcParamsText,E=C.legends,k=C.icons;if(V(w)&&a.showName&&(h.name=w),V(P)&&a.showParams&&(h.calcParamsText=P),T(k)&&(h.icons=k),T(E)&&t.visible){var A=[],R=s.tooltip.text.color;E.forEach(function(M){var I={text:"",color:R};nt(M.title)?I=M.title:I.text=M.title;var F={text:"",color:R};nt(M.value)?F=M.value:F.text=M.value,B(Number(F.text))&&(F.text=g.format(f.format(F.text))),A.push({title:I,value:F})}),h.legends=A}}return h},e.prototype.classifyTooltipIcons=function(t){var i=[],n=[],o=[];return t.forEach(function(s){switch(s.position){case _.TooltipIconPosition.Left:i.push(s);break;case _.TooltipIconPosition.Middle:n.push(s);break;case _.TooltipIconPosition.Right:o.push(s)}}),[i,n,o]},e}(rt),Mi=function(r){function e(t){var i=r.call(this,t)||this;return i._initEvent(),i}return W(e,r),e.prototype._initEvent=function(){var t=this,i=this.getWidget().getPane(),n=i.getId(),o=i.getChart(),s=o.getChartStore();this.registerEvent("mouseMoveEvent",function(a){var l,u=s.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;c.isStart()&&(s.updateProgressOverlayInfo(n),h=n);var p=c.points.length-1,d="".concat(Ot,"point_").concat(p);return c.isDrawing()&&h===n&&(c.eventMoveForDrawing(t._coordinateToPoint(c,a)),(l=c.onDrawing)===null||l===void 0||l.call(c,D({chart:o,overlay:c,figureKey:d,figureIndex:p},a))),t._figureMouseMoveEvent(c,1,d,p,0)(a)}return s.setHoverOverlayInfo({paneId:n,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseClickEvent",function(a){var l,u,c=s.getProgressOverlayInfo();if(c!==null){var h=c.overlay,p=c.paneId;h.isStart()&&(s.updateProgressOverlayInfo(n,!0),p=n);var d=h.points.length-1,v="".concat(Ot,"point_").concat(d);return h.isDrawing()&&p===n&&(h.eventMoveForDrawing(t._coordinateToPoint(h,a)),(l=h.onDrawing)===null||l===void 0||l.call(h,D({chart:o,overlay:h,figureKey:v,figureIndex:d},a)),h.nextStep(),h.isDrawing()||(s.progressOverlayComplete(),(u=h.onDrawEnd)===null||u===void 0||u.call(h,D({chart:o,overlay:h,figureKey:v,figureIndex:d},a)))),t._figureMouseClickEvent(h,1,v,d,0)(a)}return s.setClickOverlayInfo({paneId:n,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseDoubleClickEvent",function(a){var l,u=s.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;if(c.isDrawing()&&h===n&&(c.forceComplete(),!c.isDrawing())){s.progressOverlayComplete();var p=c.points.length-1,d="".concat(Ot,"point_").concat(p);(l=c.onDrawEnd)===null||l===void 0||l.call(c,D({chart:o,overlay:c,figureKey:d,figureIndex:p},a))}var v=c.points.length-1;return t._figureMouseClickEvent(c,1,"".concat(Ot,"point_").concat(v),v,0)(a)}return!1}).registerEvent("mouseRightClickEvent",function(a){var l=s.getProgressOverlayInfo();if(l!==null){var u=l.overlay;if(u.isDrawing()){var c=u.points.length-1;return t._figureMouseRightClickEvent(u,1,"".concat(Ot,"point_").concat(c),c,0)(a)}}return!1}).registerEvent("mouseUpEvent",function(a){var l,u=s.getPressedOverlayInfo(),c=u.overlay,h=u.figureIndex,p=u.figureKey;return c!==null&&((l=c.onPressedMoveEnd)===null||l===void 0||l.call(c,D({chart:o,overlay:c,figureKey:p,figureIndex:h},a))),s.setPressedOverlayInfo({paneId:n,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(a){var l,u,c=s.getPressedOverlayInfo(),h=c.overlay,p=c.figureType,d=c.figureIndex,v=c.figureKey;if(h!==null){if(!(h.lock||(u=(l=h.onPressedMoving)===null||l===void 0?void 0:l.call(h,D({chart:o,overlay:h,figureIndex:d,figureKey:v},a)))!==null&&u!==void 0&&u)){var g=t._coordinateToPoint(h,a);p===1?h.eventPressedPointMove(g,d):h.eventPressedOtherMove(g,t.getWidget().getPane().getChart().getChartStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,i,n,o,s,a){var l=null;if(!t.isDrawing()){var u=[];if(T(a)&&(Ht(a)?a&&(u=["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]):u=a),u.length===0)return{mouseMoveEvent:this._figureMouseMoveEvent(t,i,n,o,s),mouseDownEvent:this._figureMouseDownEvent(t,i,n,o,s),mouseClickEvent:this._figureMouseClickEvent(t,i,n,o,s),mouseRightClickEvent:this._figureMouseRightClickEvent(t,i,n,o,s),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,i,n,o,s)};l={},u.includes("mouseMoveEvent")||u.includes("touchMoveEvent")||(l.mouseMoveEvent=this._figureMouseMoveEvent(t,i,n,o,s)),u.includes("mouseDownEvent")||u.includes("touchStartEvent")||(l.mouseDownEvent=this._figureMouseDownEvent(t,i,n,o,s)),u.includes("mouseClickEvent")||u.includes("tapEvent")||(l.mouseClickEvent=this._figureMouseClickEvent(t,i,n,o,s)),u.includes("mouseDoubleClickEvent")||u.includes("doubleTapEvent")||(l.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(t,i,n,o,s)),u.includes("mouseRightClickEvent")||(l.mouseRightClickEvent=this._figureMouseRightClickEvent(t,i,n,o,s))}return l??void 0},e.prototype._figureMouseMoveEvent=function(t,i,n,o,s){var a=this;return function(l){var u=a.getWidget().getPane();return u.getChart().getChartStore().setHoverOverlayInfo({paneId:u.getId(),overlay:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:s},l),!0}},e.prototype._figureMouseDownEvent=function(t,i,n,o,s){var a=this;return function(l){var u,c=a.getWidget().getPane(),h=c.getId();return t.startPressedMove(a._coordinateToPoint(t,l)),(u=t.onPressedMoveStart)===null||u===void 0||u.call(t,D({chart:c.getChart(),overlay:t,figureIndex:o,figureKey:n},l)),c.getChart().getChartStore().setPressedOverlayInfo({paneId:h,overlay:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:s}),!0}},e.prototype._figureMouseClickEvent=function(t,i,n,o,s){var a=this;return function(l){var u=a.getWidget().getPane(),c=u.getId();return u.getChart().getChartStore().setClickOverlayInfo({paneId:c,overlay:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:s},l),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,i,n,o,s){var a=this;return function(l){var u;return(u=t.onDoubleClick)===null||u===void 0||u.call(t,D(D({},l),{chart:a.getWidget().getPane().getChart(),figureIndex:o,figureKey:n,overlay:t})),!0}},e.prototype._figureMouseRightClickEvent=function(t,i,n,o,s){var a=this;return function(l){var u,c;return(c=(u=t.onRightClick)===null||u===void 0?void 0:u.call(t,D({chart:a.getWidget().getPane().getChart(),overlay:t,figureIndex:o,figureKey:n},l)))!==null&&c!==void 0&&c||a.getWidget().getPane().getChart().getChartStore().removeOverlay(t),!0}},e.prototype._coordinateToPoint=function(t,i){var n,o={},s=this.getWidget().getPane(),a=s.getChart(),l=s.getId(),u=a.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=a.getXAxisPane().getAxisComponent().convertFromPixel(i.x),h=(n=u.dataIndexToTimestamp(c))!==null&&n!==void 0?n:void 0;o.timestamp=h,o.dataIndex=c}if(this.coordinateToPointValueFlag()){var p=s.getAxisComponent(),d=p.convertFromPixel(i.y);if(t.mode!==_.OverlayMode.Normal&&l===q&&B(o.dataIndex)){var v=u.getDataByDataIndex(o.dataIndex);if(v!==null){var g=t.modeSensitivity;if(d>v.high)if(t.mode===_.OverlayMode.WeakMagnet){var f=p.convertToPixel(v.high);d<p.convertFromPixel(f-g)&&(d=v.high)}else d=v.high;else if(d<v.low)if(t.mode===_.OverlayMode.WeakMagnet){var y=p.convertToPixel(v.low);d>p.convertFromPixel(y-g)&&(d=v.low)}else d=v.low;else{var x=Math.max(v.open,v.close),m=Math.min(v.open,v.close);d=d>x?d-x<v.high-d?x:v.high:d<m?d-v.low<m-d?v.low:m:x-d<d-m?x:m}}}o.value=d}return o},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,i,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(t,i,n):r.prototype.dispatchEvent.call(this,t,i,n)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var i=this;this.getCompleteOverlays().forEach(function(o){o.visible&&i._drawOverlay(t,o)});var n=this.getProgressOverlay();T(n)&&n.visible&&this._drawOverlay(t,n)},e.prototype._drawOverlay=function(t,i){var n=i.points,o=this.getWidget().getPane(),s=o.getChart(),a=s.getChartStore(),l=o.getAxisComponent(),u=s.getXAxisPane().getAxisComponent(),c=n.map(function(p){var d,v=null;B(p.timestamp)&&(v=a.timestampToDataIndex(p.timestamp));var g={x:0,y:0};return B(v)&&(g.x=u.convertToPixel(v)),B(p.value)&&(g.y=(d=l?.convertToPixel(p.value))!==null&&d!==void 0?d:0),g});if(c.length>0){var h=[].concat(this.getFigures(i,c));this.drawFigures(t,i,h)}this.drawDefaultFigures(t,i,c)},e.prototype.drawFigures=function(t,i,n){var o=this,s=this.getWidget().getPane().getChart().getStyles().overlay;n.forEach(function(a,l){var u=a.type,c=a.styles,h=a.attrs,p=a.ignoreEvent;[].concat(h).forEach(function(d,v){var g,f,y,x=o._createFigureEvents(i,2,(g=a.key)!==null&&g!==void 0?g:"",l,v,p),m=D(D(D({},s[u]),(f=i.styles)===null||f===void 0?void 0:f[u]),c);(y=o.createFigure({name:u,attrs:d,styles:m},x))===null||y===void 0||y.draw(t)})})},e.prototype.getCompleteOverlays=function(){var t=this.getWidget().getPane();return t.getChart().getChartStore().getOverlaysByPaneId(t.getId())},e.prototype.getProgressOverlay=function(){var t=this.getWidget().getPane(),i=t.getChart().getChartStore().getProgressOverlayInfo();return T(i)&&i.paneId===t.getId()?i.overlay:null},e.prototype.getFigures=function(t,i){var n,o,s=this.getWidget(),a=s.getPane(),l=a.getChart(),u=a.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=s.getBounding();return(o=(n=t.createPointFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e.prototype.drawDefaultFigures=function(t,i,n){var o,s,a=this;if(i.needDefaultPointFigure){var l=this.getWidget().getPane().getChart().getChartStore(),u=l.getHoverOverlayInfo(),c=l.getClickOverlayInfo();if(((o=u.overlay)===null||o===void 0?void 0:o.id)===i.id&&u.figureType!==0||((s=c.overlay)===null||s===void 0?void 0:s.id)===i.id&&c.figureType!==0){var h=l.getStyles().overlay,p=i.styles,d=D(D({},h.point),p?.point);n.forEach(function(v,g){var f,y,x,m=v.x,b=v.y,S=d.radius,C=d.color,w=d.borderColor,P=d.borderSize;((f=u.overlay)===null||f===void 0?void 0:f.id)===i.id&&u.figureType===1&&u.figureIndex===g&&(S=d.activeRadius,C=d.activeColor,w=d.activeBorderColor,P=d.activeBorderSize),(y=a.createFigure({name:"circle",attrs:{x:m,y:b,r:S+P},styles:{color:w}},a._createFigureEvents(i,1,"".concat(Ot,"point_").concat(g),g,0)))===null||y===void 0||y.draw(t),(x=a.createFigure({name:"circle",attrs:{x:m,y:b,r:S},styles:{color:C}}))===null||x===void 0||x.draw(t)})}}},e}(rt),ki=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._gridView=new Gn(n),n._indicatorView=new Un(n),n._crosshairLineView=new jn(n),n._tooltipView=n.createTooltipView(),n._overlayView=new Mi(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return i.getChart().getChartStore().setActiveTooltipIcon(),!1}),n}return W(e,r),e.prototype.getName=function(){return $},e.prototype.updateMain=function(t){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t))},e.prototype.createTooltipView=function(){return new Ii(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(t),this._crosshairLineView.draw(t)),this._tooltipView.draw(t)},e}(Me),Zn=function(r){function e(){var t=r.apply(this,Yt([],dt(arguments),!1))||this;return t._ripplePoint=t.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),t._animationFrameTime=0,t._animation=new Ce({iterationCount:1/0}).doFrame(function(i){t._animationFrameTime=i;var n=t.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),t}return W(e,r),e.prototype.drawImp=function(t){var i,n,o,s=this.getWidget(),a=s.getPane(),l=a.getChart(),u=l.getDataList().length-1,c=s.getBounding(),h=a.getAxisComponent(),p=l.getStyles().candle.area,d=[],v=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER,f=null;if(this.eachChildren(function(C){var w=C.data,P=C.x,E=w?.[p.value];if(B(E)){var k=h.convertToPixel(E);g===Number.MIN_SAFE_INTEGER&&(g=P),d.push({x:P,y:k}),v=Math.min(v,k),C.dataIndex===u&&(f={x:P,y:k})}}),d.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:p.lineColor,size:p.lineSize,smooth:p.smooth}}))===null||i===void 0||i.draw(t);var y=p.backgroundColor,x="";if(st(y)){var m=t.createLinearGradient(0,c.height,0,v);try{y.forEach(function(C){var w=C.offset,P=C.color;m.addColorStop(w,P)})}catch{}x=m}else x=y;t.fillStyle=x,t.beginPath(),t.moveTo(g,c.height),t.lineTo(d[0].x,d[0].y),gi(t,d,p.smooth),t.lineTo(d[d.length-1].x,c.height),t.closePath(),t.fill()}var b=p.point;if(b.show&&T(f)){(n=this.createFigure({name:"circle",attrs:{x:f.x,y:f.y,r:b.radius},styles:{style:"fill",color:b.color}}))===null||n===void 0||n.draw(t);var S=b.rippleRadius;b.animation&&(S=b.radius+this._animationFrameTime/b.animationDuration*(b.rippleRadius-b.radius),this._animation.setDuration(b.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:f.x,y:f.y,r:S}).setStyles({style:"fill",color:b.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(Pi),Kn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i=this.getWidget().getPane(),n=i.getChart().getChartStore(),o=n.getStyles().candle.priceMark,s=o.high,a=o.low;if(o.show&&(s.show||a.show)){var l=n.getVisibleRangeHighLowPrice(),u=n.getPrecision(),c=i.getAxisComponent(),h=l[0],p=h.price,d=h.x,v=l[1],g=v.price,f=v.x,y=c.convertToPixel(p),x=c.convertToPixel(g),m=n.getDecimalFold(),b=n.getThousandsSeparator();s.show&&p!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,m.format(b.format(Z(p,u.price))),{x:d,y},y<x?[-2,-5]:[2,5],s),a.show&&g!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,m.format(b.format(Z(g,u.price))),{x:f,y:x},y<x?[2,5]:[-2,-5],a)}},e.prototype._drawMark=function(t,i,n,o,s){var a,l,u,c=n.x,h=n.y+o[0];(a=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+o[0]},{x:c,y:h},{x:c+2,y:h+o[0]}]},styles:{color:s.color}}))===null||a===void 0||a.draw(t);var p=0,d=0,v="left";c>this.getWidget().getBounding().width/2?(d=(p=c-5)-s.textOffset,v="right"):(v="left",d=(p=c+5)+s.textOffset);var g=h+o[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:g},{x:p,y:g}]},styles:{color:s.color}}))===null||l===void 0||l.draw(t),(u=this.createFigure({name:"text",attrs:{x:d,y:g,text:i,align:v,baseline:"middle"},styles:{color:s.color,size:s.textSize,family:s.textFamily,weight:s.textWeight}}))===null||u===void 0||u.draw(t)},e}(rt),qn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),s=n.getBounding(),a=o.getChart().getChartStore(),l=a.getStyles().candle.priceMark,u=l.last,c=u.line;if(l.show&&u.show&&c.show){var h=o.getAxisComponent(),p=a.getDataList(),d=p[p.length-1];if(T(d)){var v=d.close,g=d.open,f=h.convertToNicePixel(v),y="";y=v>g?u.upColor:v<g?u.downColor:u.noChangeColor,(i=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:f},{x:s.width,y:f}]},styles:{style:c.style,color:y,size:c.size,dashedValue:c.dashedValue}}))===null||i===void 0||i.draw(t)}}},e}(rt);(function(r){r.Left="left",r.Right="right"})(ft||(ft={}));var Di=function(){function r(e){this.scrollZoomEnabled=!0,this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return r.prototype.getParent=function(){return this._parent},r.prototype.buildTicks=function(e){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),!(this._prevRange.from===this._range.from&&this._prevRange.to===this._range.to&&!e)&&(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0)},r.prototype.getTicks=function(){return this._ticks},r.prototype.setRange=function(e){this._autoCalcTickFlag=!1,this._range=e},r.prototype.getRange=function(){return this._range},r.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},r.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},r}(),se={"zh-CN":{time:"\u65F6\u95F4\uFF1A",open:"\u5F00\uFF1A",high:"\u9AD8\uFF1A",low:"\u4F4E\uFF1A",close:"\u6536\uFF1A",volume:"\u6210\u4EA4\u91CF\uFF1A",turnover:"\u6210\u4EA4\u989D\uFF1A",change:"\u6DA8\u5E45\uFF1A"},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "}},Jn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore(),o=n.getCrosshair();if(T(o.kLineData)){var s=i.getBounding(),a=n.getStyles(),l=a.candle,u=a.indicator;if(l.tooltip.showType===_.TooltipShowType.Rect&&u.tooltip.showType===_.TooltipShowType.Rect){var c=this.isDrawTooltip(o,l.tooltip),h=this.isDrawTooltip(o,u.tooltip);this._drawRectTooltip(t,c,h,l.tooltip.offsetTop)}else if(l.tooltip.showType===_.TooltipShowType.Standard&&u.tooltip.showType===_.TooltipShowType.Standard){var p=l.tooltip,d=p.offsetLeft,v=p.offsetTop,g=p.offsetRight,f=s.width-g,y=this._drawCandleStandardTooltip(t,d,v,f);this.drawIndicatorTooltip(t,d,y,f)}else if(l.tooltip.showType===_.TooltipShowType.Rect&&u.tooltip.showType===_.TooltipShowType.Standard){var x=l.tooltip,m=(d=x.offsetLeft,v=x.offsetTop,g=x.offsetRight,f=s.width-g,this.drawIndicatorTooltip(t,d,v,f));c=this.isDrawTooltip(o,l.tooltip),this._drawRectTooltip(t,c,!1,m)}else{var b=l.tooltip,S=(d=b.offsetLeft,v=b.offsetTop,g=b.offsetRight,f=s.width-g,this._drawCandleStandardTooltip(t,d,v,f));h=this.isDrawTooltip(o,u.tooltip),this._drawRectTooltip(t,!1,h,S)}}},e.prototype._drawCandleStandardTooltip=function(t,i,n,o){var s=this.getWidget().getPane().getChart().getChartStore(),a=s.getStyles().candle.tooltip,l=a.text,u=0,c={x:i,y:n},h=s.getCrosshair();if(this.isDrawTooltip(h,a)){var p=this._getCandleTooltipLegends(),d=dt(this.classifyTooltipIcons(a.icons),3),v=d[0],g=d[1],f=d[2];u=this.drawStandardTooltipIcons(t,v,c,"",i,u,o),u=this.drawStandardTooltipIcons(t,g,c,"",i,u,o),p.length>0&&(u=this.drawStandardTooltipLegends(t,p,c,i,u,o,l)),u=this.drawStandardTooltipIcons(t,f,c,"",i,u,o)}return c.y+u},e.prototype._drawRectTooltip=function(t,i,n,o){var s,a,l=this,u=this.getWidget(),c=u.getPane(),h=c.getChart().getChartStore(),p=h.getStyles(),d=p.candle,v=p.indicator,g=d.tooltip,f=v.tooltip;if(i||n){var y=this._getCandleTooltipLegends(),x=g.offsetLeft,m=g.offsetTop,b=g.offsetRight,S=g.offsetBottom,C=g.text,w=C.marginLeft,P=C.marginRight,E=C.marginTop,k=C.marginBottom,A=C.size,R=C.weight,M=C.family,I=g.rect,F=I.position,O=I.paddingLeft,L=I.paddingRight,N=I.paddingTop,K=I.paddingBottom,U=I.offsetLeft,Q=I.offsetRight,H=I.offsetTop,yt=I.offsetBottom,X=I.borderSize,Tt=I.borderRadius,St=I.borderColor,mt=I.color,ot=0,_t=0,ut=0;i&&(t.font=Dt(A,R,M),y.forEach(function(bt){var at=bt.title,it=bt.value,ht="".concat(at.text).concat(it.text),Ct=t.measureText(ht).width+w+P;ot=Math.max(ot,Ct)}),ut+=(k+E+A)*y.length);var xt=f.text,Nt=xt.marginLeft,Xi=xt.marginRight,Gi=xt.marginTop,Ui=xt.marginBottom,Jt=xt.size,Re=xt.weight,Le=xt.family,ji=[];if(n){var xr=h.getIndicatorsByPaneId(c.getId());t.font=Dt(Jt,Re,Le),xr.forEach(function(bt){var at=l.getIndicatorTooltipData(bt).legends;ji.push(at),at.forEach(function(it){var ht=it.title,Ct=it.value,de="".concat(ht.text).concat(Ct.text),Tr=t.measureText(de).width+Nt+Xi;ot=Math.max(ot,Tr),ut+=Gi+Ui+Jt})})}if((_t+=ot)!==0&&ut!==0){var ue=h.getCrosshair(),ce=u.getBounding(),Zi=c.getYAxisWidget().getBounding();_t+=2*X+O+L,ut+=2*X+N+K;var br=ce.width/2,Ki=F===_.CandleTooltipRectPosition.Pointer&&ue.paneId===q,qi=((s=ue.realX)!==null&&s!==void 0?s:0)>br,ct=0;if(Ki){var Ji=ue.realX;ct=qi?Ji-Q-_t:Ji+U}else{var he=this.getWidget().getPane().getAxisComponent();qi?(ct=U+x,he.inside&&he.position===ft.Left&&(ct+=Zi.width)):(ct=ce.width-Q-_t-b,he.inside&&he.position===ft.Right&&(ct-=Zi.width))}var zt=o+H;Ki&&((zt=ue.y-ut/2)+ut>ce.height-yt-S&&(zt=ce.height-yt-ut-S),zt<o+H&&(zt=o+H+m)),(a=this.createFigure({name:"rect",attrs:{x:ct,y:zt,width:_t,height:ut},styles:{style:_.PolygonType.StrokeFill,color:mt,borderColor:St,borderSize:X,borderRadius:Tt}}))===null||a===void 0||a.draw(t);var Cr=ct+X+O+w,Pt=zt+X+N;if(i&&y.forEach(function(bt){var at,it;Pt+=E;var ht=bt.title;(at=l.createFigure({name:"text",attrs:{x:Cr,y:Pt,text:ht.text},styles:{color:ht.color,size:A,family:M,weight:R}}))===null||at===void 0||at.draw(t);var Ct=bt.value;(it=l.createFigure({name:"text",attrs:{x:ct+_t-X-P-L,y:Pt,text:Ct.text,align:"right"},styles:{color:Ct.color,size:A,family:M,weight:R}}))===null||it===void 0||it.draw(t),Pt+=A+k}),n){var wr=ct+X+O+Nt;ji.forEach(function(bt){bt.forEach(function(at){var it,ht;Pt+=Gi;var Ct=at.title,de=at.value;(it=l.createFigure({name:"text",attrs:{x:wr,y:Pt,text:Ct.text},styles:{color:Ct.color,size:Jt,family:Le,weight:Re}}))===null||it===void 0||it.draw(t),(ht=l.createFigure({name:"text",attrs:{x:ct+_t-X-Xi-L,y:Pt,text:de.text,align:"right"},styles:{color:de.color,size:Jt,family:Le,weight:Re}}))===null||ht===void 0||ht.draw(t),Pt+=Jt+Ui})})}}}},e.prototype._getCandleTooltipLegends=function(){var t,i,n,o,s,a,l=this.getWidget().getPane().getChart().getChartStore(),u=l.getStyles().candle,c=l.getDataList(),h=l.getCustomApi(),p=l.getDecimalFold(),d=l.getThousandsSeparator(),v=l.getLocale(),g=l.getPrecision(),f=g.price,y=g.volume,x=(t=l.getCrosshair().dataIndex)!==null&&t!==void 0?t:0,m=u.tooltip,b=m.text.color,S=(i=c[x-1])!==null&&i!==void 0?i:null,C=c[x],w=(n=S?.close)!==null&&n!==void 0?n:C.close,P=C.close-w,E={"{time}":h.formatDate(C.timestamp,"YYYY-MM-DD HH:mm",_.FormatDateType.Tooltip),"{open}":p.format(d.format(Z(C.open,f))),"{high}":p.format(d.format(Z(C.high,f))),"{low}":p.format(d.format(Z(C.low,f))),"{close}":p.format(d.format(Z(C.close,f))),"{volume}":p.format(d.format(h.formatBigNumber(Z((o=C.volume)!==null&&o!==void 0?o:m.defaultValue,y)))),"{turnover}":p.format(d.format(Z((s=C.turnover)!==null&&s!==void 0?s:m.defaultValue,f))),"{change}":w===0?m.defaultValue:"".concat(d.format(Z(P/w*100)),"%")};return(j(m.custom)?m.custom({prev:S,current:C,next:(a=c[x+1])!==null&&a!==void 0?a:null},u):m.custom).map(function(k){var A,R=k.title,M=k.value,I={text:"",color:""};nt(R)?I=D({},R):(I.text=R,I.color=b),I.text=function(N,K){var U;return(U=se[K][N])!==null&&U!==void 0?U:N}(I.text,v);var F={text:m.defaultValue,color:""};nt(M)?F=D({},M):(F.text=M,F.color=b);var O=/{(\S*)}/.exec(F.text);if(O!==null&&O.length>1){var L="{".concat(O[1],"}");F.text=F.text.replace(L,(A=E[L])!==null&&A!==void 0?A:m.defaultValue),L==="{change}"&&(F.color=P===0?u.priceMark.last.noChangeColor:P>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:I,value:F}})},e}(Ii),$n=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._candleBarView=new Ei(n),n._candleAreaView=new Zn(n),n._candleHighLowPriceView=new Kn(n),n._candleLastPriceLineView=new qn(n),n.addChild(n._candleBarView),n}return W(e,r),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!==_.CandleType.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Jn(this)},e}(ki),Ai=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t,i){var n,o,s=this,a=this.getWidget(),l=a.getPane(),u=a.getBounding(),c=l.getAxisComponent(),h=this.getAxisStyles(l.getChart().getStyles());if(h.show&&(h.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(u,h),styles:h.axisLine}))===null||n===void 0||n.draw(t)),!i[0])){var p=c.getTicks();if(h.tickLine.show&&this.createTickLines(p,u,h).forEach(function(v){var g;(g=s.createFigure({name:"line",attrs:v,styles:h.tickLine}))===null||g===void 0||g.draw(t)}),h.tickText.show){var d=this.createTickTexts(p,u,h);(o=this.createFigure({name:"text",attrs:d,styles:h.tickText}))===null||o===void 0||o.draw(t)}}},e}(rt),Qn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,i){var n=this.getWidget().getPane().getAxisComponent(),o=i.axisLine.size,s=0;return{coordinates:[{x:s=n.isFromZero()?0:t.width-o,y:0},{x:s,y:t.height}]}},e.prototype.createTickLines=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),s=n.axisLine,a=n.tickLine,l=0,u=0;return o.isFromZero()?(l=0,s.show&&(l+=s.size),u=l+a.length):(l=i.width,s.show&&(l-=s.size),u=l-a.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),s=n.axisLine,a=n.tickLine,l=n.tickText,u=0;o.isFromZero()?(u=l.marginStart,s.show&&(u+=s.size),a.show&&(u+=a.length)):(u=i.width-l.marginEnd,s.show&&(u-=s.size),a.show&&(u-=a.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},e}(Ai),tr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),s=n.getBounding(),a=o.getChart().getChartStore(),l=a.getStyles().candle.priceMark,u=l.last,c=u.text;if(l.show&&u.show&&c.show){var h=a.getPrecision(),p=o.getAxisComponent(),d=a.getDataList(),v=d[d.length-1];if(T(v)){var g=v.close,f=v.open,y=p.convertToNicePixel(g),x="";x=g>f?u.upColor:g<f?u.downColor:u.noChangeColor;var m=p.getRange(),b=p.displayValueToText(p.realValueToDisplayValue(p.valueToRealValue(g,{range:m}),{range:m}),h.price);b=a.getDecimalFold().format(a.getThousandsSeparator().format(b));var S=0,C="left";p.isFromZero()?(S=0,C="left"):(S=s.width,C="right"),(i=this.createFigure({name:"text",attrs:{x:S,y,text:b,align:C,baseline:"middle"},styles:D(D({},c),{backgroundColor:x})}))===null||i===void 0||i.draw(t)}}},e}(rt),er=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i=this,n=this.getWidget(),o=n.getPane(),s=n.getBounding(),a=o.getChart().getChartStore(),l=a.getStyles().indicator,u=l.lastValueMark,c=u.text;if(u.show){var h=o.getAxisComponent(),p=h.getRange(),d=a.getDataList().length-1,v=a.getIndicatorsByPaneId(o.getId()),g=a.getCustomApi(),f=a.getDecimalFold(),y=a.getThousandsSeparator();v.forEach(function(x){var m,b,S=x.result,C=(b=(m=S[d])!==null&&m!==void 0?m:S[d-1])!==null&&b!==void 0?b:{};if(T(C)&&x.visible){var w=x.precision;xe(x,d,l,function(P,E){var k,A=C[P.key];if(B(A)){var R=h.convertToNicePixel(A),M=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(A,{range:p}),{range:p}),w);x.shouldFormatBigNumber&&(M=g.formatBigNumber(M)),M=f.format(y.format(M));var I=0,F="left";h.isFromZero()?(I=0,F="left"):(I=s.width,F="right"),(k=i.createFigure({name:"text",attrs:{x:I,y:R,text:M,align:F,baseline:"middle"},styles:D(D({},c),{backgroundColor:E.color})}))===null||k===void 0||k.draw(t)}})}})}},e}(rt),Fi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,i,n){this.drawFigures(t,i,this.getDefaultFigures(i,n))},e.prototype.getDefaultFigures=function(t,i){var n,o=this.getWidget(),s=o.getPane(),a=s.getChart().getChartStore(),l=a.getClickOverlayInfo(),u=[];if(t.needDefaultYAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)&&l.paneId===s.getId()){var c=s.getAxisComponent(),h=o.getBounding(),p=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,v=c.isFromZero(),g="left",f=0;v?(g="left",f=0):(g="right",f=h.width);var y=a.getDecimalFold(),x=a.getThousandsSeparator();i.forEach(function(m,b){var S=t.points[b];if(B(S.value)){p=Math.min(p,m.y),d=Math.max(d,m.y);var C=y.format(x.format(Z(S.value,a.getPrecision().price)));u.push({type:"text",attrs:{x:f,y:m.y,text:C,align:g,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&u.unshift({type:"rect",attrs:{x:0,y:p,width:h.width,height:d-p},ignoreEvent:!0})}return u},e.prototype.getFigures=function(t,i){var n,o,s=this.getWidget(),a=s.getPane(),l=a.getChart(),u=a.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=s.getBounding();return(o=(n=t.createYAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(Mi),Bi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),s=n.getBounding(),a=n.getPane().getChart().getChartStore(),l=a.getCrosshair(),u=a.getStyles().crosshair;if(V(l.paneId)&&this.compare(l,o.getId())&&u.show){var c=this.getDirectionStyles(u),h=c.text;if(c.show&&h.show){var p=o.getAxisComponent(),d=this.getText(l,a,p);t.font=Dt(h.size,h.weight,h.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(d,t.measureText(d).width,l,s,p,h),styles:h}))===null||i===void 0||i.draw(t)}}},e.prototype.compare=function(t,i){return t.paneId===i},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,i,n){var o=n,s=n.convertFromPixel(t.y),a=0,l=!1;o.isInCandle()?a=i.getPrecision().price:i.getIndicatorsByPaneId(t.paneId).forEach(function(h){a=Math.max(h.precision,a),l||(l=h.shouldFormatBigNumber)});var u=o.getRange(),c=o.displayValueToText(o.realValueToDisplayValue(o.valueToRealValue(s,{range:u}),{range:u}),a);return l&&(c=i.getCustomApi().formatBigNumber(c)),i.getDecimalFold().format(i.getThousandsSeparator().format(c))},e.prototype.getTextAttrs=function(t,i,n,o,s,a){var l=0,u="left";return s.isFromZero()?(l=0,u="left"):(l=o.width,u="right"),{x:l,y:n.y,text:t,align:u,baseline:"middle"}},e}(rt),ir=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._yAxisView=new Qn(n),n._candleLastPriceLabelView=new tr(n),n._indicatorLastValueView=new er(n),n._overlayYAxisView=new Fi(n),n._crosshairHorizontalLabelView=new Bi(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return W(e,r),e.prototype.getName=function(){return lt},e.prototype.updateMain=function(t){var i=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(t,i),i||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t))},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t))},e}(Me),qt=function(r){function e(t,i){var n=r.call(this,t)||this;return n.reverse=!1,n.inside=!1,n.position=ft.Right,n.gap={top:.2,bottom:.1},n.createRange=function(o){return o.defaultRange},n.minSpan=function(o){return At(-o)},n.valueToRealValue=function(o){return o},n.realValueToDisplayValue=function(o){return o},n.displayValueToRealValue=function(o){return o},n.realValueToValue=function(o){return o},n.displayValueToText=function(o,s){return Z(o,s)},n.override(i),n}return W(e,r),e.prototype.override=function(t){var i=t.name,n=t.gap,o=$t(t,["name","gap"]);V(this.name)||(this.name=i),Y(this.gap,n),Y(this,o)},e.prototype.createRangeImp=function(){var t=this.getParent(),i=t.getChart(),n=i.getChartStore(),o=t.getId(),s=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,l=!1,u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,p=n.getIndicatorsByPaneId(o);p.forEach(function(H){l||(l=H.shouldOhlc),h=Math.min(h,H.precision),B(H.minValue)&&(u=Math.min(u,H.minValue)),B(H.maxValue)&&(c=Math.max(c,H.maxValue))});var d=4,v=this.isInCandle();if(v){var g=n.getPrecision().price;d=h!==Number.MAX_SAFE_INTEGER?Math.min(h,g):g}else h!==Number.MAX_SAFE_INTEGER&&(d=h);var f=n.getVisibleRangeDataList(),y=i.getStyles().candle,x=y.type===_.CandleType.Area,m=y.area.value,b=v&&!x||!v&&l;f.forEach(function(H){var yt=H.dataIndex,X=H.data;if(T(X)&&(b&&(s=Math.min(s,X.low),a=Math.max(a,X.high)),v&&x)){var Tt=X[m];B(Tt)&&(s=Math.min(s,Tt),a=Math.max(a,Tt))}p.forEach(function(St){var mt,ot=St.result,_t=St.figures,ut=(mt=ot[yt])!==null&&mt!==void 0?mt:{};_t.forEach(function(xt){var Nt=ut[xt.key];B(Nt)&&(s=Math.min(s,Nt),a=Math.max(a,Nt))})})}),s!==Number.MAX_SAFE_INTEGER&&a!==Number.MIN_SAFE_INTEGER?(s=Math.min(u,s),a=Math.max(c,a)):(s=0,a=10);var S=a-s,C={from:s,to:a,range:S,realFrom:s,realTo:a,realRange:S,displayFrom:s,displayTo:a,displayRange:S},w=this.createRange({chart:i,paneId:o,defaultRange:C}),P=w.realFrom,E=w.realTo,k=w.realRange,A=this.minSpan(d);if(P===E||k<A){var R=u===P,M=c===E;P=R?P:M?P-8*A:P-4*A,E=M?E:R?E+8*A:E+4*A}var I=this.getBounding().height,F=this.gap,O=F.top;O>=1&&(O/=I);var L=F.bottom;L>=1&&(L/=I),P-=(k=E-P)*L,E+=k*O;var N=this.realValueToValue(P,{range:w}),K=this.realValueToValue(E,{range:w}),U=this.realValueToDisplayValue(P,{range:w}),Q=this.realValueToDisplayValue(E,{range:w});return{from:N,to:K,range:K-N,realFrom:P,realTo:E,realRange:E-P,displayFrom:U,displayTo:Q,displayRange:Q-U}},e.prototype.isInCandle=function(){return this.getParent().getId()===q},e.prototype.isFromZero=function(){return this.position===ft.Left&&this.inside||this.position===ft.Right&&!this.inside},e.prototype.createTicksImp=function(){var t,i,n=this,o=this.getRange(),s=o.displayFrom,a=o.displayTo,l=o.displayRange,u=[];if(l>=0){var c=function(I){var F=Math.floor(gt(I)),O=At(F),L=I/O;return+(I=(L<1.5?1:L<2.5?2:L<3.5?3:L<4.5?4:L<5.5?5:L<6.5?6:8)*O).toFixed(Math.abs(F))}(l/8),h=function(I){var F=I.toString(),O=F.indexOf("e");if(O>0){var L=+F.slice(O+1);return L<0?-L:0}var N=F.indexOf(".");return N<0?0:F.length-1-N}(c),p=ti(Math.ceil(s/c)*c,h),d=ti(Math.floor(a/c)*c,h),v=0,g=p;if(c!==0)for(;g<=d;){var f=g.toFixed(h);u[v]={text:f,coord:0,value:f},++v,g+=c}}var y=this.getParent(),x=(i=(t=y.getYAxisWidget())===null||t===void 0?void 0:t.getBounding().height)!==null&&i!==void 0?i:0,m=y.getChart().getChartStore(),b=[],S=m.getIndicatorsByPaneId(y.getId()),C=m.getStyles(),w=0,P=!1;this.isInCandle()?w=m.getPrecision().price:S.forEach(function(I){w=Math.max(w,I.precision),P||(P=I.shouldFormatBigNumber)});var E=m.getCustomApi(),k=m.getThousandsSeparator(),A=m.getDecimalFold(),R=C.xAxis.tickText.size,M=NaN;return u.forEach(function(I){var F=I.value,O=n.displayValueToText(+F,w),L=n.convertToPixel(n.realValueToValue(n.displayValueToRealValue(+F,{range:o}),{range:o}));P&&(O=E.formatBigNumber(F)),O=A.format(k.format(O));var N=B(M);L>R&&L<x-R&&(N&&Math.abs(M-L)>2*R||!N)&&(b.push({text:O,coord:L,value:F}),M=L)}),j(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:b}):b},e.prototype.getAutoSize=function(){var t=this.getParent(),i=t.getChart().getChartStore(),n=i.getStyles(),o=n.yAxis,s=o.size;if(s!=="auto")return s;var a=0;if(o.show&&(o.axisLine.show&&(a+=o.axisLine.size),o.tickLine.show&&(a+=o.tickLine.length),o.tickText.show)){var l=0;this.getTicks().forEach(function(x){l=Math.max(l,Xt(x.text,o.tickText.size,o.tickText.weight,o.tickText.family))}),a+=o.tickText.marginStart+o.tickText.marginEnd+l}var u=n.crosshair,c=0;if(u.show&&u.horizontal.show&&u.horizontal.text.show){var h=i.getIndicatorsByPaneId(t.getId()),p=0,d=!1;h.forEach(function(x){p=Math.max(x.precision,p),d||(d=x.shouldFormatBigNumber)});var v=2;if(this.isInCandle()){var g=i.getPrecision().price,f=n.indicator.lastValueMark;v=f.show&&f.text.show?Math.max(p,g):g}else v=p;var y=Z(this.getRange().displayTo,v);d&&(y=i.getCustomApi().formatBigNumber(y)),y=i.getDecimalFold().format(y),c+=u.horizontal.text.paddingLeft+u.horizontal.text.paddingRight+2*u.horizontal.text.borderSize+Xt(y,u.horizontal.text.size,u.horizontal.text.weight,u.horizontal.text.family)}return Math.max(a,c)},e.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var i=this.getBounding().height,n=this.getRange(),o=n.realFrom,s=n.realRange,a=(this.reverse?t/i:1-t/i)*s+o;return this.realValueToValue(a,{range:n})},e.prototype.convertToPixel=function(t){var i,n,o=this.getRange(),s=this.valueToRealValue(t,{range:o}),a=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,l=(s-o.realFrom)/o.realRange;return this.reverse?Math.round(l*a):Math.round((1-l)*a)},e.prototype.convertToNicePixel=function(t){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,s=this.convertToPixel(t);return Math.round(Math.max(.05*o,Math.min(s,.98*o)))},e.extend=function(t){var i=function(n){function o(s){return n.call(this,s,t)||this}return W(o,n),o}(e);return i},e}(Di),nr={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(r){return"".concat(Z(r,2),"%")},valueToRealValue:function(r,e){var t=e.range;return(r-t.from)/t.range*t.realRange+t.realFrom},realValueToValue:function(r,e){var t=e.range;return(r-t.realFrom)/t.realRange*t.range+t.from},createRange:function(r){var e=r.chart,t=r.defaultRange,i=e.getDataList()[e.getVisibleRange().from];if(T(i)){var n=t.from,o=t.to,s=t.range,a=(t.from-i.close)/i.close*100,l=(t.to-i.close)/i.close*100,u=l-a;return{from:n,to:o,range:s,realFrom:a,realTo:l,realRange:u,displayFrom:a,displayTo:l,displayRange:u}}return t}},rr={name:"logarithm",minSpan:function(r){return .05*At(-r)},valueToRealValue:function(r){return r<0?-gt(Math.abs(r)):gt(r)},realValueToDisplayValue:function(r){return r<0?-At(Math.abs(r)):At(r)},displayValueToRealValue:function(r){return r<0?-gt(Math.abs(r)):gt(r)},realValueToValue:function(r){return r<0?-At(Math.abs(r)):At(r)},createRange:function(r){var e=r.defaultRange,t=e.from,i=e.to,n=e.range,o=t<0?-gt(Math.abs(t)):gt(t),s=i<0?-gt(Math.abs(i)):gt(i);return{from:t,to:i,range:n,realFrom:o,realTo:s,realRange:s-o,displayFrom:t,displayTo:i,displayRange:n}}},ke={normal:qt.extend({name:"normal"}),percentage:qt.extend(nr),logarithm:qt.extend(rr)},Ri=function(){function r(e,t,i,n){this._bounding=ne(),this._originalBounding=ne(),this._visible=!0,this._chart=i,this._id=n,this._init(e,t)}return r.prototype._init=function(e,t){this._rootContainer=e,this._container=pt("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),t!==null?e.insertBefore(this._container,t):e.appendChild(this._container)},r.prototype.getContainer=function(){return this._container},r.prototype.setVisible=function(e){this._visible!==e&&(this._container.style.display=e?"block":"none",this._visible=e)},r.prototype.getVisible=function(){return this._visible},r.prototype.getId=function(){return this._id},r.prototype.getChart=function(){return this._chart},r.prototype.getBounding=function(){return this._bounding},r.prototype.setOriginalBounding=function(e){Y(this._originalBounding,e)},r.prototype.getOriginalBounding=function(){return this._originalBounding},r.prototype.update=function(e){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(e??3,this._container,this._bounding)},r.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},r}(),Li=function(r){function e(t,i,n,o,s){var a=r.call(this,t,i,n,o)||this;a._yAxisWidget=null,a._options={id:"",minHeight:30,dragEnabled:!0,order:0,height:100,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var l=a.getContainer();return a._mainWidget=a.createMainWidget(l),a._yAxisWidget=a.createYAxisWidget(l),a.setOptions(s),a}return W(e,r),e.prototype.setOptions=function(t){var i,n,o,s,a,l=this.getId();if(l===q||l===z){var u=(i=t.axis)===null||i===void 0?void 0:i.name;(!T(this._axis)||T(u)&&this._options.axis.name!==u)&&(this._axis=this.createAxisComponent(u??"normal"))}else T(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof qt&&this._axis.setAutoCalcTickFlag(!0),Y(this._options,t),this._axis.override(D(D({},this._options.axis),{name:(o=(n=t.axis)===null||n===void 0?void 0:n.name)!==null&&o!==void 0?o:"normal"}));var c=null,h="default";return this.getId()===z?(c=this.getMainWidget().getContainer(),h="ew-resize"):(c=this.getYAxisWidget().getContainer(),h="ns-resize"),(a=(s=t.axis)===null||s===void 0?void 0:s.scrollZoomEnabled)===null||a===void 0||a?c.style.cursor=h:c.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,i,n,o){var s,a,l,u;Y(this.getBounding(),t);var c={};T(t.height)&&(c.height=t.height),T(t.top)&&(c.top=t.top),this._mainWidget.setBounding(c);var h=T(i);return h&&this._mainWidget.setBounding(i),T(this._yAxisWidget)&&(this._yAxisWidget.setBounding(c),this._axis.position===ft.Left?T(n)&&this._yAxisWidget.setBounding(D(D({},n),{left:0})):T(o)&&(this._yAxisWidget.setBounding(o),h&&this._yAxisWidget.setBounding({left:((s=i.left)!==null&&s!==void 0?s:0)+((a=i.width)!==null&&a!==void 0?a:0)+((l=i.right)!==null&&l!==void 0?l:0)-((u=o.width)!==null&&u!==void 0?u:0)}))),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var i;this._mainWidget.update(t),(i=this._yAxisWidget)===null||i===void 0||i.update(t)},e.prototype.destroy=function(){var t;r.prototype.destroy.call(this),this._mainWidget.destroy(),(t=this._yAxisWidget)===null||t===void 0||t.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,s=pt("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),a=s.getContext("2d"),l=wt(s);s.width=n*l,s.height=o*l,a.scale(l,l);var u=this._mainWidget.getBounding();if(a.drawImage(this._mainWidget.getImage(t),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();a.drawImage(this._yAxisWidget.getImage(t),c.left,0,c.width,c.height)}return s},e.prototype.createYAxisWidget=function(t){return null},e}(Ri),Oi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.createAxisComponent=function(t){var i=function(n){var o;return(o=ke[n])!==null&&o!==void 0?o:ke.normal}(t??"default");return new i(this)},e.prototype.createMainWidget=function(t){return new ki(t,this)},e.prototype.createYAxisWidget=function(t){return new ir(t,this)},e}(Li),or=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.createMainWidget=function(t){return new $n(t,this)},e}(Oi),ar=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,i,n){var o=n.tickLine,s=n.axisLine.size;return t.map(function(a){return{coordinates:[{x:a.coord,y:0},{x:a.coord,y:s+o.length}]}})},e.prototype.createTickTexts=function(t,i,n){var o=n.tickText,s=n.axisLine.size,a=n.tickLine.length;return t.map(function(l){return{x:l.coord,y:s+a+o.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(Ai),sr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},e.prototype.getProgressOverlay=function(){var t,i;return(i=(t=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||t===void 0?void 0:t.overlay)!==null&&i!==void 0?i:null},e.prototype.getDefaultFigures=function(t,i){var n,o=[],s=this.getWidget(),a=s.getPane().getChart().getChartStore(),l=a.getClickOverlayInfo();if(t.needDefaultXAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;i.forEach(function(h,p){u=Math.min(u,h.x),c=Math.max(c,h.x);var d=t.points[p];if(B(d.timestamp)){var v=a.getCustomApi().formatDate(d.timestamp,"YYYY-MM-DD HH:mm",_.FormatDateType.Crosshair);o.push({type:"text",attrs:{x:h.x,y:0,text:v,align:"center"},ignoreEvent:!0})}}),i.length>1&&o.unshift({type:"rect",attrs:{x:u,y:0,width:c-u,height:s.getBounding().height},ignoreEvent:!0})}return o},e.prototype.getFigures=function(t,i){var n,o,s=this.getWidget(),a=s.getPane(),l=a.getChart(),u=a.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=s.getBounding();return(o=(n=t.createXAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(Fi),lr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.compare=function(t){return T(t.timestamp)},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,i){var n=t.timestamp;return i.getCustomApi().formatDate(n,"YYYY-MM-DD HH:mm",_.FormatDateType.Crosshair)},e.prototype.getTextAttrs=function(t,i,n,o,s,a){var l=n.realX,u=0,c="center";return l-i/2-a.paddingLeft<0?(u=0,c="left"):l+i/2+a.paddingRight>o.width?(u=o.width,c="right"):u=l,{x:u,y:0,text:t,align:c,baseline:"top"}},e}(Bi),ur=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._xAxisView=new ar(n),n._overlayXAxisView=new sr(n),n._crosshairVerticalLabelView=new lr(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return W(e,r),e.prototype.getName=function(){return vt},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(Me),Wi=function(r){function e(t,i){var n=r.call(this,t)||this;return n.override(i),n}return W(e,r),e.prototype.override=function(t){var i=t.name,n=t.scrollZoomEnabled,o=t.createTicks;V(this.name)||(this.name=i),this.scrollZoomEnabled=n??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},e.prototype.createRangeImp=function(){var t=this.getParent().getChart().getChartStore().getVisibleRange(),i=t.realFrom,n=t.realTo,o=n-i+1;return{from:i,to:n,range:o,realFrom:i,realTo:n,realRange:o,displayFrom:i,displayTo:n,displayRange:o}},e.prototype.createTicksImp=function(){var t=this,i=this.getRange(),n=i.realFrom,o=i.realTo,s=this.getParent().getChart().getChartStore(),a=s.getCustomApi().formatDate,l=s.getTimeWeightTickList(),u=[],c=function(m,b){var S,C;try{for(var w=J(m),P=w.next();!P.done;P=w.next()){var E=P.value;if(E.dataIndex>=b&&E.dataIndex<o){var k=E.timestamp,A=E.weight,R=E.dataIndex,M="";switch(A){case ni:M=a(k,"YYYY",_.FormatDateType.XAxis);break;case ri:M=a(k,"YYYY-MM",_.FormatDateType.XAxis);break;case oi:M=a(k,"MM-DD",_.FormatDateType.XAxis);break;case ai:case si:M=a(k,"HH:mm",_.FormatDateType.XAxis);break;case Se:M=a(k,"mm:ss",_.FormatDateType.XAxis);break;default:M=a(k,"YYYY-MM-DD HH:mm",_.FormatDateType.XAxis)}u.push({coord:t.convertToPixel(R),value:k,text:M})}}}catch(I){S={error:I}}finally{try{P&&!P.done&&(C=w.return)&&C.call(w)}finally{if(S)throw S.error}}};if(c(l,n),l.length>0){for(var h=s.getBarSpace().bar,p=s.getStyles().xAxis.tickText,d=ui(h,p),v=l[l.length-1].dataIndex+d-1,g=[],f=v;f<o;f++){var y=s.dataIndexToTimestamp(f);B(y)&&g.push({timestamp:y})}if(g.length>0){var x=new Map;li(x,g,s.getDateTimeFormat(),v),c(Pe(x,h,p),v)}}return j(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:u}):u},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),i=t.xAxis,n=i.size;if(n!=="auto")return n;var o=t.crosshair,s=0;i.show&&(i.axisLine.show&&(s+=i.axisLine.size),i.tickLine.show&&(s+=i.tickLine.length),i.tickText.show&&(s+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var a=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(a+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+2*o.vertical.text.borderSize+o.vertical.text.size),Math.max(s,a)},e.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.coordinateToDataIndex(t);return i.dataIndexToTimestamp(n)},e.prototype.convertTimestampToPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.timestampToDataIndex(t);return i.dataIndexToCoordinate(n)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(t)},e.extend=function(t){var i=function(n){function o(s){return n.call(this,s,t)||this}return W(o,n),o}(e);return i},e}(Di),De={normal:Wi.extend({name:"normal"})},cr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return W(e,r),e.prototype.createAxisComponent=function(t){var i=function(n){var o;return(o=De[n])!==null&&o!==void 0?o:De.normal}(t);return new i(this)},e.prototype.createMainWidget=function(t){return new ur(t,this)},e}(Li),hr=function(r){function e(t,i){var n,o,s,a=r.call(this,t,i)||this;return a._dragFlag=!1,a._dragStartY=0,a._topPaneHeight=0,a._bottomPaneHeight=0,a._topPane=null,a._bottomPane=null,a._pressedMouseMoveEvent=(n=a._pressedTouchMouseMoveEvent,o=20,s=0,function(){var l=Date.now();l-s>o&&(n.apply(this,arguments),s=l)}),a.registerEvent("touchStartEvent",a._mouseDownEvent.bind(a)).registerEvent("touchMoveEvent",a._pressedMouseMoveEvent.bind(a)).registerEvent("touchEndEvent",a._mouseUpEvent.bind(a)).registerEvent("mouseDownEvent",a._mouseDownEvent.bind(a)).registerEvent("mouseUpEvent",a._mouseUpEvent.bind(a)).registerEvent("pressedMouseMoveEvent",a._pressedMouseMoveEvent.bind(a)).registerEvent("mouseEnterEvent",a._mouseEnterEvent.bind(a)).registerEvent("mouseLeaveEvent",a._mouseLeaveEvent.bind(a)),a}return W(e,r),e.prototype.getName=function(){return Zt},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){var i=this;this._dragFlag=!0,this._dragStartY=t.pageY;var n=this.getPane(),o=n.getChart();this._topPane=n.getTopPane(),this._bottomPane=n.getBottomPane();var s=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var a=s.findIndex(function(h){var p;return h.getId()===((p=i._topPane)===null||p===void 0?void 0:p.getId())}),l=a-1;l>-1;l--){var u=s[l];if(u.getOptions().state!=="minimize"){this._topPane=u;break}}if(this._bottomPane.getOptions().state==="minimize")for(a=s.findIndex(function(h){var p;return h.getId()===((p=i._bottomPane)===null||p===void 0?void 0:p.getId())}),l=a+1;l<s.length;l++){var c=s[l];if(c.getOptions().state!=="minimize"){this._bottomPane=c;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var i=t.pageY-this._dragStartY,n=i<0;if(T(this._topPane)&&T(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var s=null,a=null,l=0,u=0;n?(s=this._topPane,a=this._bottomPane,l=this._topPaneHeight,u=this._bottomPaneHeight):(s=this._bottomPane,a=this._topPane,l=this._bottomPaneHeight,u=this._topPaneHeight);var c=s.getOptions().minHeight;if(l>c){var h=Math.max(l-Math.abs(i),c),p=l-h;s.setBounding({height:h}),a.setBounding({height:u+p});var d=this.getPane(),v=d.getChart();v.getChartStore().executeAction(_.ActionType.OnPaneDrag,{paneId:d.getId()}),v.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getBottomPane().getOptions().dragEnabled){var i=t.getChart().getStyles().separator;return this.getContainer().style.background=i.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="transparent",!0)},e.prototype.createContainer=function(){return pt("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,i,n){if(n===4||n===2){var o=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-o.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(mi),Vi=function(r){function e(t,i,n,o,s,a){var l=r.call(this,t,i,n,o)||this;return l.getContainer().style.overflow="",l._topPane=s,l._bottomPane=a,l._separatorWidget=new hr(l.getContainer(),l),l}return W(e,r),e.prototype.setBounding=function(t){return Y(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,s=this.getChart().getStyles().separator,a=pt("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),l=a.getContext("2d"),u=wt(a);return a.width=n*u,a.height=o*u,l.scale(u,u),l.fillStyle=s.color,l.fillRect(0,0,n,o),a},e.prototype.updateImp=function(t,i,n){if(t===4||t===2){var o=this.getChart().getStyles().separator;i.style.backgroundColor=o.color,i.style.height="".concat(n.height,"px"),i.style.marginLeft="".concat(n.left,"px"),i.style.width="".concat(n.width,"px"),this._separatorWidget.update(t)}},e}(Ri);function Ni(){return typeof window<"u"&&window.navigator.userAgent.toLowerCase().includes("firefox")}function Ae(){return typeof window<"u"&&/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var Fe,dr=5,pr=5,zi=5,Yi=30,Be=0,gr=1,vr=2,fr=function(){function r(e,t,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Ae(),this._onFirefoxOutsideMouseUp=function(o){n._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){n._firesTouchEvents(o)?(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._tapCoordinate).manhattanDistance<Yi&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(o),n._handler.doubleTapEvent),n._resetTapTimeout())):(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._clickCoordinate).manhattanDistance<zi&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(o),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()))},this._target=e,this._handler=t,this._options=i,this._init()}return r.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},r.prototype._mouseEnterHandler=function(e){var t,i,n,o=this;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this);var s=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){o._target.removeEventListener("mousemove",s)},this._target.addEventListener("mousemove",s);var a=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){o._target.removeEventListener("wheel",a)},this._target.addEventListener("wheel",a,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){o._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},r.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},r.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(!T(this._handler.mouseWheelHortEvent)||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(!T(this._handler.mouseWheelVertEvent))return;var t=-e.deltaY/100;if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(t!==0){var i=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),i)}}},r.prototype._contextMenuHandler=function(e){this._preventDefault(e)},r.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),n=i.xOffset,o=i.yOffset,s=i.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(s<pr)){if(!this._touchMoveExceededManhattanDistance){var a=.5*n,l=o>=a&&!this._options.treatVertDragAsPageScroll(),u=a>o&&!this._options.treatHorzDragAsPageScroll();l||u||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},r.prototype._mouseMoveWithDownHandler=function(e){e.button===Be&&(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate).manhattanDistance>=dr&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent))},r.prototype._mouseTouchMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return{xOffset:i,yOffset:n,manhattanDistance:i+n}},r.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(e,t);this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance<Yi&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||(this._processEvent(i,this._handler.tapEvent),T(this._handler.tapEvent)&&this._preventDefault(e)),this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},r.prototype._mouseUpHandler=function(e){if(e.button===Be){var t=this._makeCompatEvent(e);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Ni()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._firesTouchEvents(e)||(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance<zi&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent))}},r.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},r.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),500),this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(t))}},r.prototype._mouseDownHandler=function(e){if(e.button===vr)return this._preventDefault(e),void this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);if(e.button===Be){var t=this._target.ownerDocument.documentElement;Ni()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",n),this._mousePressed=!0,this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(e)))}},r.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,i=function(n){e._handler.mouseDownOutsideEvent!=null&&(n.composed&&e._target.contains(n.composedPath()[0])||n.target!==null&&e._target.contains(n.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0}),Ae()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===gr)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},r.prototype._initPinch=function(){var e=this;(T(this._handler.pinchStartEvent)||T(this._handler.pinchEvent)||T(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",function(t){e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(t.touches.length===2&&e._startPinchMiddleCoordinate!==null&&T(e._handler.pinchEvent)){var i=e._getTouchDistance(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(D(D({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},r.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},r.prototype._startPinch=function(e){var t=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),T(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},r.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,T(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},r.prototype._mouseLeaveHandler=function(e){var t,i,n;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),this._firesTouchEvents(e)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Ae())},r.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},r.prototype._firesTouchEvents=function(e){var t;return T((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+500},r.prototype._processEvent=function(e,t){t?.call(this._handler,e)},r.prototype._makeCompatEvent=function(e,t){var i=this,n=t??e,o=this._target.getBoundingClientRect();return{x:n.clientX-o.left,y:n.clientY-o.top,pageX:n.pageX,pageY:n.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click"&&e.type!=="wheel",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},r.prototype._getTouchDistance=function(e,t){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},r.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},r.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},r.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},r.prototype._touchWithId=function(e,t){for(var i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null},r}(),yr=function(){function r(e,t){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":i._chart.getChartStore().zoom(.5);break;case"Minus":i._chart.getChartStore().zoom(-.5);break;case"ArrowLeft":(o=i._chart.getChartStore()).startScroll(),o.scroll(-3*o.getBarSpace().bar);break;case"ArrowRight":var o;(o=i._chart.getChartStore()).startScroll(),o.scroll(3*o.getBarSpace().bar)}},this._container=e,this._chart=t,this._event=new fr(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return r.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},r.prototype.pinchEvent=function(e,t){var i=this._findWidgetByEvent(e),n=i.pane,o=i.widget;if(n?.getId()!==z&&o?.getName()===$){var s=this._makeWidgetEvent(e,o),a=5*(t-this._pinchScale);return this._pinchScale=t,this._chart.getChartStore().zoom(a,{x:s.x,y:s.y}),!0}return!1},r.prototype.mouseWheelHortEvent=function(e,t){var i=this._chart.getChartStore();return i.startScroll(),i.scroll(t),!0},r.prototype.mouseWheelVertEvent=function(e,t){var i=this._findWidgetByEvent(e).widget,n=this._makeWidgetEvent(e,i);return i?.getName()===$&&(this._chart.getChartStore().zoom(t,{x:n.x,y:n.y}),!0)},r.prototype.mouseDownEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(this._mouseDownWidget=n,n!==null){var o=this._makeWidgetEvent(e,n);switch(n.getName()){case Zt:return n.dispatchEvent("mouseDownEvent",o);case $:var s=i.getAxisComponent().getRange();return this._prevYAxisRange=D({},s),this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),n.dispatchEvent("mouseDownEvent",o);case vt:return(a=n.dispatchEvent("mouseDownEvent",o))&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:o.x,y:o.y},this._xAxisStartScaleDistance=o.pageX,a;case lt:var a;return(a=n.dispatchEvent("mouseDownEvent",o))&&this._chart.updatePane(1),s=i.getAxisComponent().getRange(),this._prevYAxisRange=D({},s),this._yAxisStartScaleDistance=o.pageY,a}}return!1},r.prototype.mouseMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),s=o.pane,a=o.widget,l=this._makeWidgetEvent(e,a);if(((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())===s?.getId()&&((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())===a?.getName()||(a?.dispatchEvent("mouseEnterEvent",l),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:s,widget:a}),a!==null)switch(a.getName()){case $:var u=a.dispatchEvent("mouseMoveEvent",l),c=this._chart.getChartStore(),h={x:l.x,y:l.y,paneId:s?.getId()};return u&&c.getActiveTooltipIcon()!==null&&(h=void 0,a.getContainer().style.cursor="pointer"),this._chart.getChartStore().setCrosshair(h),u;case Zt:case vt:case lt:return u=a.dispatchEvent("mouseMoveEvent",l),this._chart.getChartStore().setCrosshair(),u}return!1},r.prototype.pressedMouseMoveEvent=function(e){var t,i,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Zt)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var o=this._findWidgetByEvent(e),s=o.pane,a=o.widget;if(a!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===s?.getId()&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===a.getName()){var l=this._makeWidgetEvent(e,a);switch(a.getName()){case $:var u=a.getBounding();if(!(w=a.dispatchEvent("pressedMouseMoveEvent",l))&&this._startScrollCoordinate!==null){var c=s.getAxisComponent();if(this._prevYAxisRange!==null&&!c.getAutoCalcTickFlag()&&c.scrollZoomEnabled){var h=this._prevYAxisRange,p=h.from,d=h.to,v=p+(E=(P=h.range)*(S=(c.reverse?this._startScrollCoordinate.y-l.y:l.y-this._startScrollCoordinate.y)/u.height)),g=d+E,f=c.valueToRealValue(v,{range:this._prevYAxisRange}),y=c.valueToRealValue(g,{range:this._prevYAxisRange}),x=c.realValueToDisplayValue(f,{range:this._prevYAxisRange}),m=c.realValueToDisplayValue(y,{range:this._prevYAxisRange});c.setRange({from:v,to:g,range:g-v,realFrom:f,realTo:y,realRange:y-f,displayFrom:x,displayTo:m,displayRange:m-x})}var b=l.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(b)}return this._chart.getChartStore().setCrosshair({x:l.x,y:l.y,paneId:s?.getId()}),w;case vt:if(w=a.dispatchEvent("pressedMouseMoveEvent",l))this._chart.updatePane(1);else if(s.getAxisComponent().scrollZoomEnabled){var S=this._xAxisStartScaleDistance/l.pageX;if(Number.isFinite(S)){var C=10*(S-this._xAxisScale);this._xAxisScale=S,this._chart.getChartStore().zoom(C,(n=this._xAxisStartScaleCoordinate)!==null&&n!==void 0?n:void 0)}}return w;case lt:var w;if(w=a.dispatchEvent("pressedMouseMoveEvent",l))this._chart.updatePane(1);else if(c=s.getAxisComponent(),this._prevYAxisRange!==null&&c.scrollZoomEnabled){var P,E,k=this._prevYAxisRange,A=(p=k.from,d=k.to,(P=k.range)*(S=l.pageY/this._yAxisStartScaleDistance));v=p-(E=(A-P)/2),g=d+E,f=c.valueToRealValue(v,{range:this._prevYAxisRange}),y=c.valueToRealValue(g,{range:this._prevYAxisRange}),x=c.realValueToDisplayValue(f,{range:this._prevYAxisRange}),m=c.realValueToDisplayValue(y,{range:this._prevYAxisRange}),c.setRange({from:v,to:g,range:A,realFrom:f,realTo:y,realRange:y-f,displayFrom:x,displayTo:m,displayRange:m-x}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}return w}}return!1},r.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case $:case Zt:case vt:case lt:i=t.dispatchEvent("mouseUpEvent",n)}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},r.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var i=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",i)}return!1},r.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case $:case vt:case lt:i=t.dispatchEvent("mouseRightClickEvent",n)}i&&this._chart.updatePane(1)}return!1},r.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null)switch(n.getName()){case $:var o=this._makeWidgetEvent(e,n);return n.dispatchEvent("mouseDoubleClickEvent",o);case lt:var s=i.getAxisComponent();if(!s.getAutoCalcTickFlag())return s.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0}return!1},r.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},r.prototype.touchStartEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null){var o=this._makeWidgetEvent(e,n);switch(n.getName()){case $:var s=this._chart.getChartStore();if(n.dispatchEvent("mouseDownEvent",o))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,s.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._flingScrollRequestId!==null&&(qe(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:o.x,y:o.y},s.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var a=o.x-this._touchCoordinate.x,l=o.y-this._touchCoordinate.y;Math.sqrt(a*a+l*l)<10?(this._touchCoordinate={x:o.x,y:o.y},s.setCrosshair({x:o.x,y:o.y,paneId:i?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,s.setCrosshair())}return!0;case vt:case lt:var u=n.dispatchEvent("mouseDownEvent",o);return u&&this._chart.updatePane(1),u}}return!1},r.prototype.touchMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),s=o.pane,a=o.widget;if(a!==null){var l=this._makeWidgetEvent(e,a),u=a.getName(),c=this._chart.getChartStore();switch(u){case $:if(a.dispatchEvent("pressedMouseMoveEvent",l))return(t=l.preventDefault)===null||t===void 0||t.call(l),c.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._touchCoordinate!==null)(i=l.preventDefault)===null||i===void 0||i.call(l),c.setCrosshair({x:l.x,y:l.y,paneId:s?.getId()});else if(this._startScrollCoordinate!==null&&Math.abs(this._startScrollCoordinate.x-l.x)>this._startScrollCoordinate.y-l.y){var h=l.x-this._startScrollCoordinate.x;c.scroll(h)}return!0;case vt:case lt:var p=a.dispatchEvent("pressedMouseMoveEvent",l);return p&&((n=l.preventDefault)===null||n===void 0||n.call(l),this._chart.updatePane(1)),p}}return!1},r.prototype.touchEndEvent=function(e){var t=this,i=this._findWidgetByEvent(e).widget;if(i!==null){var n=this._makeWidgetEvent(e,i);switch(i.getName()){case $:if(i.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var o=new Date().getTime()-this._flingStartTime,s=(n.x-this._startScrollCoordinate.x)/(o>0?o:1)*20;if(o<200&&Math.abs(s)>0){var a=this._chart.getChartStore(),l=function(){t._flingScrollRequestId=re(function(){a.startScroll(),a.scroll(s),s*=.975,Math.abs(s)<1?t._flingScrollRequestId!==null&&(qe(t._flingScrollRequestId),t._flingScrollRequestId=null):l()})};l()}}return!0;case vt:case lt:i.dispatchEvent("mouseUpEvent",n)&&this._chart.updatePane(1)}}return!1},r.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget,o=!1;if(n!==null){var s=this._makeWidgetEvent(e,n),a=n.dispatchEvent("mouseClickEvent",s);if(n.getName()===$){var l=this._makeWidgetEvent(e,n),u=this._chart.getChartStore();a?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,!0),o=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:l.x,y:l.y},u.setCrosshair({x:l.x,y:l.y,paneId:i?.getId()},!0),o=!0),this._touchCancelCrosshair=!1)}(o||a)&&this._chart.updatePane(1)}return o},r.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},r.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null&&n.getName()===$){var o=this._makeWidgetEvent(e,n);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:i?.getId()}),!0}return!1},r.prototype._findWidgetByEvent=function(e){var t,i,n,o,s=e.x,a=e.y,l=this._chart.getSeparatorPanes(),u=this._chart.getStyles().separator.size;try{for(var c=J(l),h=c.next();!h.done;h=c.next()){var p=dt(h.value,2)[1],d=(x=p.getBounding()).top-Math.round((7-u)/2);if(s>=x.left&&s<=x.left+x.width&&a>=d&&a<=d+7)return{pane:p,widget:p.getWidget()}}}catch(E){t={error:E}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}var v=this._chart.getDrawPanes(),g=null;try{for(var f=J(v),y=f.next();!y.done;y=f.next()){var x,m=y.value;if(s>=(x=m.getBounding()).left&&s<=x.left+x.width&&a>=x.top&&a<=x.top+x.height){g=m;break}}}catch(E){n={error:E}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}var b=null;if(g!==null){if(!T(b)){var S=g.getMainWidget(),C=S.getBounding();s>=C.left&&s<=C.left+C.width&&a>=C.top&&a<=C.top+C.height&&(b=S)}if(!T(b)){var w=g.getYAxisWidget();if(w!==null){var P=w.getBounding();s>=P.left&&s<=P.left+P.width&&a>=P.top&&a<=P.top+P.height&&(b=w)}}}return{pane:g,widget:b}},r.prototype._makeWidgetEvent=function(e,t){var i,n,o,s=(i=t?.getBounding())!==null&&i!==void 0?i:null;return D(D({},e),{x:e.x-((n=s?.left)!==null&&n!==void 0?n:0),y:e.y-((o=s?.top)!==null&&o!==void 0?o:0)})},r.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},r}();_.DomPosition=void 0,(Fe=_.DomPosition||(_.DomPosition={})).Root="root",Fe.Main="main",Fe.YAxis="yAxis";var Hi=function(){function r(e,t){this._chartBounding=ne(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._initContainer(e),this._chartEvent=new yr(this._chartContainer,this),this._chartStore=new Vn(this,t),this._initPanes(t),this._layout()}return r.prototype._initContainer=function(e){this._container=e,this._chartContainer=pt("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer),this._cacheChartBounding()},r.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},r.prototype._initPanes=function(e){var t,i=this,n=(t=e?.layout)!==null&&t!==void 0?t:[{type:"candle"}],o=function(a){var l,u;if(!T(i._candlePane)){var c=(l=a.options)!==null&&l!==void 0?l:{};Y(c,{id:q}),i._candlePane=i._createPane(or,q,c),((u=a.content)!==null&&u!==void 0?u:[]).forEach(function(h){i.createIndicator(h,!0,c)})}},s=function(a){if(!T(i._xAxisPane)){var l=i._createPane(cr,z,a??{});i._xAxisPane=l}};n.forEach(function(a){var l;switch(a.type){case"candle":o(a);break;case"indicator":var u=(l=a.content)!==null&&l!==void 0?l:[];if(u.length>0){var c=null;u.forEach(function(h){T(c)?i.createIndicator(h,!0,{id:c}):c=i.createIndicator(h,!0,a.options)})}break;case"xAxis":s(a.options)}}),o({type:"candle"}),s({order:Number.MAX_SAFE_INTEGER})},r.prototype._createPane=function(e,t,i){var n,o,s,a=null,l=null,u=(n=i?.order)!==null&&n!==void 0?n:0;if(this._drawPanes.length>0&&(u<this._drawPanes[0].getOptions().order&&(l=new e(this._chartContainer,this._drawPanes[0].getContainer(),this,t,i??{}),a=0),!T(l)))for(var c=1;c<this._drawPanes.length;c++){var h=this._drawPanes[c-1],p=this._drawPanes[c];if(u>=h.getOptions().order&&u<p.getOptions().order){var d=null;d=p.getId()!==z?(s=(o=this._separatorPanes.get(p))===null||o===void 0?void 0:o.getContainer())!==null&&s!==void 0?s:null:p.getContainer(),l=new e(this._chartContainer,d,this,t,i??{}),a=c;break}}T(l)||(l=new e(this._chartContainer,null,this,t,i??{}));var v=0;if(B(a)?(this._drawPanes.splice(a,0,l),v=a):(this._drawPanes.push(l),v=this._drawPanes.length-1),l.getId()!==z){var g=this._drawPanes[v+1];if(T(g)&&g.getId()===z&&(g=this._drawPanes[v+2]),T(g)&&(T(f=this._separatorPanes.get(g))?f.setTopPane(l):(f=new Vi(this._chartContainer,g.getContainer(),this,"",l,g),this._separatorPanes.set(g,f))),T(h=this._drawPanes[v-1])&&h.getId()===z&&(h=this._drawPanes[v-2]),T(h)){var f=new Vi(this._chartContainer,l.getContainer(),this,"",h,l);this._separatorPanes.set(l,f)}}return l},r.prototype._recalculatePaneHeight=function(e,t,i){if(i===0)return!1;var n=this._drawPanes.filter(function(h){var p=h.getId();return h.getOptions().state==="normal"&&p!==e.getId()&&p!==z}),o=n.length;if(o===0)return!1;if(e.getId()!==q&&T(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var s=this._candlePane.getBounding().height;if(s>0){var a=this._candlePane.getOptions().minHeight,l=s+i;l<a&&(t-=s+i-(l=a)),this._candlePane.setBounding({height:l})}}else{var u=i,c=Math.floor(i/o);n.forEach(function(h,p){var d=h.getBounding().height,v=0;(v=p===o-1?d+u:d+c)<h.getOptions().minHeight&&(v=h.getOptions().minHeight),h.setBounding({height:v}),u-=v-d}),Math.abs(u)>0&&(t-=u)}return e.setBounding({height:t}),!0},r.prototype.getDrawPaneById=function(e){if(e===q)return this._candlePane;if(e===z)return this._xAxisPane;var t=this._drawPanes.find(function(i){return i.getId()===e});return t??null},r.prototype.getContainer=function(){return this._container},r.prototype.getChartStore=function(){return this._chartStore},r.prototype.getXAxisPane=function(){return this._xAxisPane},r.prototype.getDrawPanes=function(){return this._drawPanes},r.prototype.getSeparatorPanes=function(){return this._separatorPanes},r.prototype.layout=function(e){var t,i,n,o,s,a=this;(t=e.measureHeight)!==null&&t!==void 0&&t&&(this._layoutOptions.measureHeight=e.measureHeight),(i=e.measureWidth)!==null&&i!==void 0&&i&&(this._layoutOptions.measureWidth=e.measureWidth),(n=e.update)!==null&&n!==void 0&&n&&(this._layoutOptions.update=e.update),(o=e.buildYAxisTick)!==null&&o!==void 0&&o&&(this._layoutOptions.buildYAxisTick=e.buildYAxisTick),(s=e.buildYAxisTick)!==null&&s!==void 0&&s&&(this._layoutOptions.forceBuildYAxisTick=e.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(l){a._layout(),a._layoutPending=!1}).catch(function(l){}))},r.prototype._layout=function(){var e=this,t=this._layoutOptions,i=t.measureHeight,n=t.measureWidth,o=t.update,s=t.buildYAxisTick,a=t.forceBuildYAxisTick;if(i){var l=this._chartBounding.height,u=this.getStyles().separator.size,c=this._xAxisPane.getAxisComponent().getAutoSize(),h=l-c;h<0&&(h=0),this._drawPanes.forEach(function(M){var I=M.getId();if(T(e._separatorPanes.get(M))&&(h-=u),I!==z&&I!==q&&M.getVisible()){var F=M.getBounding().height;F>h?(F=h,h=0):h-=F,M.setBounding({height:F})}}),this._candlePane.setBounding({height:Math.max(h,0)}),this._xAxisPane.setBounding({height:c});var p=0;this._drawPanes.forEach(function(M){var I=e._separatorPanes.get(M);T(I)&&(I.setBounding({height:u,top:p}),p+=u),M.setBounding({top:p}),p+=M.getBounding().height})}var d=n;if((s||a)&&this._drawPanes.forEach(function(M){var I=M.getAxisComponent().buildTicks(a);d||(d=I)}),d){var v=this._chartBounding.width,g=this.getStyles(),f=0,y=!0,x=0,m=!0;this._drawPanes.forEach(function(M){if(M.getId()!==z){var I=M.getAxisComponent(),F=I.inside,O=I.getAutoSize();I.position===ft.Left?(f=Math.max(f,O),F&&(y=!1)):(x=Math.max(x,O),F&&(m=!1))}});var b=v,S=0,C=0;y&&(b-=f,S=f),m&&(b-=x,C=x),this._chartStore.setTotalBarSpace(b);var w={width:v},P={width:b,left:S,right:C},E={width:f},k={width:x},A=g.separator.fill,R={};R=A?w:P,this._drawPanes.forEach(function(M){var I;(I=e._separatorPanes.get(M))===null||I===void 0||I.setBounding(R),M.setBounding(w,P,E,k)})}o&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,forceBuildYAxisTick:!1}},r.prototype.updatePane=function(e,t){var i=this;if(T(t)){var n=this.getDrawPaneById(t);n?.update(e)}else this._drawPanes.forEach(function(o){var s;o.update(e),(s=i._separatorPanes.get(o))===null||s===void 0||s.update(e)})},r.prototype.crosshairChange=function(e){var t=this;if(this._chartStore.hasAction(_.ActionType.OnCrosshairChange)){var i={};this._drawPanes.forEach(function(n){var o=n.getId(),s={};t._chartStore.getIndicatorsByPaneId(o).forEach(function(a){var l,u=a.result;s[a.name]=u[(l=e.dataIndex)!==null&&l!==void 0?l:u.length-1]}),i[o]=s}),V(e.paneId)&&this._chartStore.executeAction(_.ActionType.OnCrosshairChange,D(D({},e),{indicatorData:i}))}},r.prototype.getDom=function(e,t){var i,n;if(!T(e))return this._chartContainer;var o=this.getDrawPaneById(e);if(T(o))switch(t??_.DomPosition.Root){case _.DomPosition.Root:return o.getContainer();case _.DomPosition.Main:return o.getMainWidget().getContainer();case _.DomPosition.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&n!==void 0?n:null}return null},r.prototype.getSize=function(e,t){var i,n;if(!T(e))return this._chartBounding;var o=this.getDrawPaneById(e);if(T(o))switch(t??_.DomPosition.Root){case _.DomPosition.Root:return o.getBounding();case _.DomPosition.Main:return o.getMainWidget().getBounding();case _.DomPosition.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&n!==void 0?n:null}return null},r.prototype.setPrecision=function(e){this._chartStore.setPrecision(e)},r.prototype.getPrecision=function(){return this._chartStore.getPrecision()},r.prototype.setStyles=function(e){var t=this;this._setOptions(function(){t._chartStore.setStyles(e)})},r.prototype.getStyles=function(){return this._chartStore.getStyles()},r.prototype.setCustomApi=function(e){var t=this;this._setOptions(function(){t._chartStore.setCustomApi(e)})},r.prototype.getCustomApi=function(){return this._chartStore.getCustomApi()},r.prototype.setLocale=function(e){var t=this;this._setOptions(function(){t._chartStore.setLocale(e)})},r.prototype.getLocale=function(){return this._chartStore.getLocale()},r.prototype.setTimezone=function(e){var t=this;this._setOptions(function(){t._chartStore.setTimezone(e)})},r.prototype.getTimezone=function(){return this._chartStore.getTimezone()},r.prototype.setThousandsSeparator=function(e){var t=this;this._setOptions(function(){t._chartStore.setThousandsSeparator(e)})},r.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},r.prototype.setDecimalFold=function(e){var t=this;this._setOptions(function(){t._chartStore.setDecimalFold(e)})},r.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},r.prototype._setOptions=function(e){e(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.setOffsetRightDistance=function(e){this._chartStore.setOffsetRightDistance(e,!0)},r.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},r.prototype.setMaxOffsetLeftDistance=function(e){e<0||this._chartStore.setMaxOffsetLeftDistance(e)},r.prototype.setMaxOffsetRightDistance=function(e){e<0||this._chartStore.setMaxOffsetRightDistance(e)},r.prototype.setLeftMinVisibleBarCount=function(e){e<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(e))},r.prototype.setRightMinVisibleBarCount=function(e){e<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(e))},r.prototype.setBarSpace=function(e){this._chartStore.setBarSpace(e)},r.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},r.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},r.prototype.clearData=function(){this._chartStore.clearData()},r.prototype.getDataList=function(){return this._chartStore.getDataList()},r.prototype.applyNewData=function(e,t){this._drawPanes.forEach(function(n){n.getAxisComponent().setAutoCalcTickFlag(!0)});var i={forward:!1,backward:!1};Ht(t)?(i.forward=t,i.backward=t):i=D(D({},i),t),this._chartStore.addData(e,et.Init,i)},r.prototype.updateData=function(e){this._chartStore.addData(e,et.Update)},r.prototype.setLoadMoreDataCallback=function(e){this._chartStore.setLoadMoreDataCallback(e)},r.prototype.createIndicator=function(e,t,i){var n,o=V(e)?{name:e}:e;if(hi(o.name)===null)return null;var s=D({},i);V(s.id)||(s.id=Qe(Ln));var a=this.getDrawPaneById(s.id);return T(a)||(a=this._createPane(Oi,s.id,s),(n=s.height)!==null&&n!==void 0||(s.height=100)),this.setPaneOptions(s),this._chartStore.addIndicator(o,s.id,t!=null&&t)&&this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),s.id},r.prototype.overrideIndicator=function(e,t){return this._chartStore.overrideIndicator(e,t)},r.prototype.getIndicators=function(e){return this._chartStore.getIndicatorsByFilter(e??{})},r.prototype.removeIndicator=function(e){var t=this,i=this._chartStore.removeIndicator(e??{});if(i){var n=!1,o=[];this._drawPanes.forEach(function(s){var a=s.getId();a!==q&&a!==z&&o.push(a)}),o.forEach(function(s){var a,l,u;if(!t._chartStore.hasIndicators(s)){var c=t._drawPanes.findIndex(function(x){return x.getId()===s}),h=t._drawPanes[c];if(T(h)){n=!0;var p=t._separatorPanes.get(h);if(T(p)){var d=p.getTopPane();try{for(var v=J(t._separatorPanes),g=v.next();!g.done;g=v.next()){var f=g.value;if(f[1].getTopPane().getId()===s){f[1].setTopPane(d);break}}}catch(x){a={error:x}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(a)throw a.error}}p.destroy(),t._separatorPanes.delete(h)}t._recalculatePaneHeight(h,0,h.getBounding().height),t._drawPanes.splice(c,1),h.destroy();var y=t._drawPanes[0];T(y)&&y.getId()===z&&(y=t._drawPanes[1]),(u=t._separatorPanes.get(y))===null||u===void 0||u.destroy(),t._separatorPanes.delete(y)}}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({measureHeight:n,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return i},r.prototype.createOverlay=function(e){var t=this,i=[],n=[],o=function(a){T(a.paneId)&&t.getDrawPaneById(a.paneId)!==null?n.push(!0):(a.paneId=q,n.push(!1)),i.push(a)};V(e)?o({name:e}):st(e)?e.forEach(function(a){var l=null;l=V(a)?{name:a}:a,o(l)}):o(e);var s=this._chartStore.addOverlays(i,n);return st(e)?s:s[0]},r.prototype.getOverlays=function(e){return this._chartStore.getOverlaysByFilter(e??{})},r.prototype.overrideOverlay=function(e){return this._chartStore.overrideOverlay(e)},r.prototype.removeOverlay=function(e){return this._chartStore.removeOverlay(e??{})},r.prototype.setPaneOptions=function(e){var t,i,n,o=this,s=!1,a=!1,l=T(e.id),u=function(d){var v=d.getId();if(l&&e.id===v||!l){if(v!==z){if(B(e.height)&&e.height>0){var g=Math.max((n=e.minHeight)!==null&&n!==void 0?n:d.getOptions().minHeight,0),f=Math.max(g,e.height);a=!0,s=!0,d.setOriginalBounding({height:f}),c._recalculatePaneHeight(d,f,-f)}if(T(e.state)&&d.getOptions().state!==e.state){s=!0,a=!0;var y=e.state;switch(y){case"maximize":if(!T(c._drawPanes.find(function(C){var w=C.getId();return C.getOptions().state==="maximize"&&w!==z}))){d.getOptions().state==="normal"&&d.setOriginalBounding({height:d.getBounding().height}),d.setOptions({state:y});var x=c._chartBounding.height;d.setBounding({height:x-c._xAxisPane.getBounding().height}),c._drawPanes.forEach(function(C){var w;C.getId()!==z&&C.getId()!==v&&(C.setBounding({height:C.getOriginalBounding().height}),C.setVisible(!1),(w=o._separatorPanes.get(C))===null||w===void 0||w.setVisible(!1))})}break;case"minimize":f=d.getBounding().height;var m=d.getOptions().state,b=f-30;m==="maximize"&&(b=d.getOriginalBounding().height-30),c._recalculatePaneHeight(d,30,b)&&(m==="normal"&&d.setOriginalBounding({height:f}),d.setOptions({state:y})),c._drawPanes.forEach(function(C){var w;C.getId()!==z&&(C.setVisible(!0),(w=o._separatorPanes.get(C))===null||w===void 0||w.setVisible(!0))});break;default:f=d.getOriginalBounding().height,c._recalculatePaneHeight(d,f,d.getBounding().height-f)&&d.setOptions({state:y}),c._drawPanes.forEach(function(C){var w;C.getId()!==z&&(C.setVisible(!0),(w=o._separatorPanes.get(C))===null||w===void 0||w.setVisible(!0))})}}}T(e.axis)&&(a=!0);var S=D({},e);if(delete S.state,d.setOptions(S),v===e.id)return"break"}},c=this;try{for(var h=J(this._drawPanes),p=h.next();!p.done&&u(p.value)!=="break";p=h.next());}catch(d){t={error:d}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}a&&this.layout({measureHeight:s,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.getPaneOptions=function(e){var t;if(T(e)){var i=this.getDrawPaneById(e);return(t=i?.getOptions())!==null&&t!==void 0?t:null}return this._drawPanes.map(function(n){return n.getOptions()})},r.prototype.setZoomEnabled=function(e){this._chartStore.setZoomEnabled(e)},r.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},r.prototype.setScrollEnabled=function(e){this._chartStore.setScrollEnabled(e)},r.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},r.prototype.scrollByDistance=function(e,t){var i=this,n=B(t)&&t>0?t:0;if(this._chartStore.startScroll(),n>0){var o=new Ce({duration:n});o.doFrame(function(s){var a=e*(s/n);i._chartStore.scroll(a)}),o.start()}else this._chartStore.scroll(e)},r.prototype.scrollToRealTime=function(e){var t=this._chartStore.getBarSpace().bar,i=(this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/t)*t;this.scrollByDistance(i,e)},r.prototype.scrollToDataIndex=function(e,t){var i=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-e))*this._chartStore.getBarSpace().bar;this.scrollByDistance(i,t)},r.prototype.scrollToTimestamp=function(e,t){var i=Te(this.getDataList(),"timestamp",e);this.scrollToDataIndex(i,t)},r.prototype.zoomAtCoordinate=function(e,t,i){var n=this,o=B(i)&&i>0?i:0,s=this._chartStore.getBarSpace().bar,a=s*e-s;if(o>0){var l=0,u=new Ce({duration:o});u.doFrame(function(c){var h=a*(c/o),p=(h-l)/n._chartStore.getBarSpace().bar*10;n._chartStore.zoom(p,t),l=h}),u.start()}else this._chartStore.zoom(a/s*10,t)},r.prototype.zoomAtDataIndex=function(e,t,i){var n=this._chartStore.dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:n,y:0},i)},r.prototype.zoomAtTimestamp=function(e,t,i){var n=Te(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,n,i)},r.prototype.convertToPixel=function(e,t){var i,n=this,o=t??{},s=o.paneId,a=s===void 0?q:s,l=o.absolute,u=l!==void 0&&l,c=[];if(a!==z){var h=this.getDrawPaneById(a);if(h!==null){var p=h.getBounding(),d=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=h.getAxisComponent();c=d.map(function(f){var y={},x=f.dataIndex;if(B(f.timestamp)&&(x=n._chartStore.timestampToDataIndex(f.timestamp)),B(x)&&(y.x=v.convertToPixel(x)),B(f.value)){var m=g.convertToPixel(f.value);y.y=u?p.top+m:m}return y})}}return st(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},r.prototype.convertFromPixel=function(e,t){var i,n=this,o=t??{},s=o.paneId,a=s===void 0?q:s,l=o.absolute,u=l!==void 0&&l,c=[];if(a!==z){var h=this.getDrawPaneById(a);if(h!==null){var p=h.getBounding(),d=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=h.getAxisComponent();c=d.map(function(f){var y,x={};if(B(f.x)){var m=v.convertFromPixel(f.x);x.dataIndex=m,x.timestamp=(y=n._chartStore.dataIndexToTimestamp(m))!==null&&y!==void 0?y:void 0}if(B(f.y)){var b=u?f.y-p.top:f.y;x.value=g.convertFromPixel(b)}return x})}}return st(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},r.prototype.executeAction=function(e,t){var i;if(e===_.ActionType.OnCrosshairChange){var n=D({},t);(i=n.paneId)!==null&&i!==void 0||(n.paneId=q),this._chartStore.setCrosshair(n)}},r.prototype.subscribeAction=function(e,t){this._chartStore.subscribeAction(e,t)},r.prototype.unsubscribeAction=function(e,t){this._chartStore.unsubscribeAction(e,t)},r.prototype.getConvertPictureUrl=function(e,t,i){var n=this,o=this._chartBounding,s=o.width,a=o.height,l=pt("canvas",{width:"".concat(s,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),u=l.getContext("2d"),c=wt(l);l.width=s*c,l.height=a*c,u.scale(c,c),u.fillStyle=i??"#FFFFFF",u.fillRect(0,0,s,a);var h=e!=null&&e;return this._drawPanes.forEach(function(p){var d=n._separatorPanes.get(p);if(T(d)){var v=d.getBounding();u.drawImage(d.getImage(h),v.left,v.top,v.width,v.height)}var g=p.getBounding();u.drawImage(p.getImage(h),0,g.top,s,g.height)}),l.toDataURL("image/".concat(t??"jpeg"))},r.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.destroy=function(){var e=this;this._chartEvent.destroy(),this._drawPanes.forEach(function(t){var i;t.destroy(),(i=e._separatorPanes.get(t))===null||i===void 0||i.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},r}(),le=new Map,mr=1,_r={clone:Rt,merge:Y,isString:V,isNumber:B,isValid:T,isObject:nt,isArray:st,isFunction:j,isBoolean:Ht,formatValue:G,formatPrecision:Z,formatBigNumber:Ge,formatDate:Xe,formatThousands:Ue,formatFoldDecimal:je,calcTextWidth:Xt,getLinearSlopeIntercept:ae,getLinearYFromSlopeIntercept:Ie,getLinearYFromCoordinates:Ut,checkCoordinateOnArc:Si,checkCoordinateOnCircle:_i,checkCoordinateOnLine:pi,checkCoordinateOnPolygon:xi,checkCoordinateOnRect:bi,checkCoordinateOnText:Ti};_.dispose=function(r){var e,t,i=null;if(r instanceof Hi)i=r.id;else{var n=null;i=(e=(n=V(r)?document.getElementById(r):r)==null?void 0:n.getAttribute("k-line-chart-id"))!==null&&e!==void 0?e:null}i!==null&&((t=le.get(i))===null||t===void 0||t.destroy(),le.delete(i))},_.getFigureClass=function(r){var e;return(e=Kt[r])!==null&&e!==void 0?e:null},_.getOverlayClass=function(r){var e;return(e=jt[r])!==null&&e!==void 0?e:null},_.getSupportedFigures=function(){return Object.keys(Kt)},_.getSupportedIndicators=function(){return Object.keys(oe)},_.getSupportedLocales=function(){return Object.keys(se)},_.getSupportedOverlays=function(){return Object.keys(jt)},_.init=function(r,e){var t=null;if((t=V(r)?document.getElementById(r):r)===null)return null;var i=le.get(t.id);if(T(i))return i;var n="k_line_chart_".concat(mr++);return(i=new Hi(t,e)).id=n,t.setAttribute("k-line-chart-id",n),le.set(n,i),i},_.registerFigure=function(r){Kt[r.name]=di.extend(r)},_.registerIndicator=function(r){oe[r.name]=Ze.extend(r)},_.registerLocale=function(r,e){se[r]=D(D({},se[r]),e)},_.registerOverlay=function(r){jt[r.name]=Ke.extend(r)},_.registerStyles=function(r,e){fi[r]=e},_.registerXAxis=function(r){De[r.name]=Wi.extend(r)},_.registerYAxis=function(r){ke[r.name]=qt.extend(r)},_.utils=_r,_.version=function(){return"10.0.0-alpha2"}});</script>
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f5f0d6d79a8fb0825e285ab72dc542cb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-7812b707><!--[--><div class="banner top" role="banner" data-v-c6670940><span data-v-c6670940>ðŸ””Â Â v9 will be maintained until March 2025. It is recommended to migrate to the new version as soon as possible.</span><button class="banner-close" data-v-c6670940><span class="close" data-v-c6670940>Ã—</span></button></div><!--]--><!--[--><span tabindex="-1" data-v-f1394662></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-f1394662> Skip to content </a><!--]--><!----><header class="VPNav" data-v-7812b707 data-v-67b36a7b><div class="VPNavBar" data-v-67b36a7b data-v-24d6b9a7><div class="wrapper" data-v-24d6b9a7><div class="container" data-v-24d6b9a7><div class="title" data-v-24d6b9a7><div class="VPNavBarTitle has-sidebar" data-v-24d6b9a7 data-v-ec1b58d7><a class="title" href="/en-US/" data-v-ec1b58d7><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo.svg" alt data-v-62b8c309><!--]--><span data-v-ec1b58d7>KLineChart</span><!--[--><!--]--></a></div></div><div class="content" data-v-24d6b9a7><div class="content-body" data-v-24d6b9a7><!--[--><!--]--><div class="VPNavBarSearch search" data-v-24d6b9a7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-24d6b9a7 data-v-4f8df54f><span id="main-nav-aria-label" class="visually-hidden" data-v-4f8df54f> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/guide/introduction" tabindex="0" data-v-4f8df54f data-v-ff91743b><!--[--><span data-v-ff91743b>Guide</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-4f8df54f data-v-7872d58c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7872d58c><span class="text" data-v-7872d58c><!----><span data-v-7872d58c>API</span><span class="vpi-chevron-down text-icon" data-v-7872d58c></span></span></button><div class="menu" data-v-7872d58c><div class="VPMenu" data-v-7872d58c data-v-70422733><div class="items" data-v-70422733><!--[--><!--[--><div class="VPMenuLink" data-v-70422733 data-v-41593244><a class="VPLink link" href="/en-US/api/chart/init" data-v-41593244><!--[--><span data-v-41593244>Chart API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-70422733 data-v-41593244><a class="VPLink link" href="/en-US/api/instance/getDom" data-v-41593244><!--[--><span data-v-41593244>Instance API</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://pro.klinecharts.com/en-US" target="_blank" rel="noreferrer" tabindex="0" data-v-4f8df54f data-v-ff91743b><!--[--><span data-v-ff91743b>Pro</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://preview.klinecharts.com/#en-US" target="_blank" rel="noreferrer" tabindex="0" data-v-4f8df54f data-v-ff91743b><!--[--><span data-v-ff91743b>Preview</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/customize" tabindex="0" data-v-4f8df54f data-v-ff91743b><!--[--><span data-v-ff91743b>Customize</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/sponsor" tabindex="0" data-v-4f8df54f data-v-ff91743b><!--[--><span data-v-ff91743b>Sponsor</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-4f8df54f data-v-7872d58c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7872d58c><span class="text" data-v-7872d58c><!----><span data-v-7872d58c>10.0.0-alpha2</span><span class="vpi-chevron-down text-icon" data-v-7872d58c></span></span></button><div class="menu" data-v-7872d58c><div class="VPMenu" data-v-7872d58c data-v-70422733><div class="items" data-v-70422733><!--[--><!--[--><div class="VPMenuLink" data-v-70422733 data-v-41593244><a class="VPLink link vp-external-link-icon" href="https://v9.klinecharts.com/en-US" target="_blank" rel="noreferrer" data-v-41593244><!--[--><span data-v-41593244>9.x Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-70422733 data-v-41593244><a class="VPLink link vp-external-link-icon" href="https://v8.klinecharts.com" target="_blank" rel="noreferrer" data-v-41593244><!--[--><span data-v-41593244>8.x Docs</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-24d6b9a7 data-v-9cc76c6b data-v-7872d58c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-7872d58c><span class="text" data-v-7872d58c><span class="vpi-languages option-icon" data-v-7872d58c></span><!----><span class="vpi-chevron-down text-icon" data-v-7872d58c></span></span></button><div class="menu" data-v-7872d58c><div class="VPMenu" data-v-7872d58c data-v-70422733><!----><!--[--><!--[--><div class="items" data-v-9cc76c6b><p class="title" data-v-9cc76c6b>ðŸ‡¬ðŸ‡§ English</p><!--[--><div class="VPMenuLink" data-v-9cc76c6b data-v-41593244><a class="VPLink link" href="/api/instance/resize" data-v-41593244><!--[--><span data-v-41593244>ðŸ‡¨ðŸ‡³ ç®€ä½“ä¸­æ–‡</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-24d6b9a7 data-v-5698558e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-5698558e data-v-d81c6253 data-v-06af0991><span class="check" data-v-06af0991><span class="icon" data-v-06af0991><!--[--><span class="vpi-sun sun" data-v-d81c6253></span><span class="vpi-moon moon" data-v-d81c6253></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-24d6b9a7 data-v-e9ea81da data-v-b0354122><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-b0354122 data-v-8005d817><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-b0354122 data-v-8005d817><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/more/feedback" aria-label target="_blank" rel="noopener" data-v-b0354122 data-v-8005d817><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-24d6b9a7 data-v-9573304c data-v-7872d58c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-7872d58c><span class="vpi-more-horizontal icon" data-v-7872d58c></span></button><div class="menu" data-v-7872d58c><div class="VPMenu" data-v-7872d58c data-v-70422733><!----><!--[--><!--[--><div class="group translations" data-v-9573304c><p class="trans-title" data-v-9573304c>ðŸ‡¬ðŸ‡§ English</p><!--[--><div class="VPMenuLink" data-v-9573304c data-v-41593244><a class="VPLink link" href="/api/instance/resize" data-v-41593244><!--[--><span data-v-41593244>ðŸ‡¨ðŸ‡³ ç®€ä½“ä¸­æ–‡</span><!--]--></a></div><!--]--></div><div class="group" data-v-9573304c><div class="item appearance" data-v-9573304c><p class="label" data-v-9573304c>Appearance</p><div class="appearance-action" data-v-9573304c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9573304c data-v-d81c6253 data-v-06af0991><span class="check" data-v-06af0991><span class="icon" data-v-06af0991><!--[--><span class="vpi-sun sun" data-v-d81c6253></span><span class="vpi-moon moon" data-v-d81c6253></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9573304c><div class="item social-links" data-v-9573304c><div class="VPSocialLinks social-links-list" data-v-9573304c data-v-b0354122><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-b0354122 data-v-8005d817><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-b0354122 data-v-8005d817><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/more/feedback" aria-label target="_blank" rel="noopener" data-v-b0354122 data-v-8005d817><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-24d6b9a7 data-v-3ea34178><span class="container" data-v-3ea34178><span class="top" data-v-3ea34178></span><span class="middle" data-v-3ea34178></span><span class="bottom" data-v-3ea34178></span></span></button></div></div></div></div><div class="divider" data-v-24d6b9a7><div class="divider-line" data-v-24d6b9a7></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-7812b707 data-v-89348c92><div class="container" data-v-89348c92><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-89348c92><span class="vpi-align-left menu-icon" data-v-89348c92></span><span class="menu-text" data-v-89348c92>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-89348c92 data-v-42a5eda4><button data-v-42a5eda4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-7812b707 data-v-15dca045><div class="curtain" data-v-15dca045></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-15dca045><span class="visually-hidden" id="sidebar-aria-label" data-v-15dca045> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-5d3f29bf><section class="VPSidebarItem level-0 has-active" data-v-5d3f29bf data-v-3e5d95e7><!----><div class="items" data-v-3e5d95e7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getDom" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getDom</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getSize" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getSize</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setStyles" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setStyles</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getStyles" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getStyles</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setPrecision" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setPrecision</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getPrecision" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getPrecision</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setCustomApi" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setCustomApi</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getCustomApi" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getCustomApi</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setLocale" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setLocale</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getLocale" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getLocale</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setTimezone" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setTimezone</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getTimezone" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getTimezone</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setThousandsSeparator" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setThousandsSeparator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getThousandsSeparator" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getThousandsSeparator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setDecimalFold" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setDecimalFold</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getDecimalFold" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getDecimalFold</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setOffsetRightDistance" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setOffsetRightDistance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getOffsetRightDistance" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getOffsetRightDistance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setMaxOffsetLeftDistance" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setMaxOffsetLeftDistance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setMaxOffsetRightDistance" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setMaxOffsetRightDistance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setLeftMinVisibleBarCount" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setLeftMinVisibleBarCount</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setRightMinVisibleBarCount" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setRightMinVisibleBarCount</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setBarSpace" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setBarSpace</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getBarSpace" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getBarSpace</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/applyNewData" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>applyNewData</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/updateData" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>updateData</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setLoadMoreDataCallback" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setLoadMoreDataCallback</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getDataList" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getDataList</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getVisibleRange" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getVisibleRange</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/clearData" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>clearData</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/createIndicator" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>createIndicator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/overrideIndicator" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>overrideIndicator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getIndicators" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getIndicators</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/removeIndicator" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>removeIndicator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/createOverlay" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>createOverlay</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/overrideOverlay" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>overrideOverlay</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getOverlays" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getOverlays</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/removeOverlay" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>removeOverlay</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setPaneOptions" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setPaneOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getPaneOptions" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getPaneOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setZoomEnabled" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setZoomEnabled</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/isZoomEnabled" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>isZoomEnabled</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/setScrollEnabled" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>setScrollEnabled</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/isScrollEnabled" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>isScrollEnabled</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/scrollByDistance" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>scrollByDistance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/scrollToRealTime" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>scrollToRealTime</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/scrollToDataIndex" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>scrollToDataIndex</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/scrollToTimestamp" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>scrollToTimestamp</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/zoomAtCoordinate" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>zoomAtCoordinate</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/zoomAtDataIndex" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>zoomAtDataIndex</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/zoomAtTimestamp" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>zoomAtTimestamp</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/convertToPixel" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>convertToPixel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/convertFromPixel" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>convertFromPixel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/executeAction" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>executeAction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/subscribeAction" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>subscribeAction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/unsubscribeAction" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>unsubscribeAction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/getConvertPictureUrl" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>getConvertPictureUrl</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e5d95e7 data-v-3e5d95e7><div class="item" data-v-3e5d95e7><div class="indicator" data-v-3e5d95e7></div><a class="VPLink link link" href="/en-US/api/instance/resize" data-v-3e5d95e7><!--[--><p class="text" data-v-3e5d95e7>resize</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-7812b707 data-v-95f26ef4><div class="VPDoc has-sidebar has-aside" data-v-95f26ef4 data-v-6d5a7854><!--[--><!--]--><div class="container" data-v-6d5a7854><div class="aside" data-v-6d5a7854><div class="aside-curtain" data-v-6d5a7854></div><div class="aside-container" data-v-6d5a7854><div class="aside-content" data-v-6d5a7854><div class="VPDocAside" data-v-6d5a7854 data-v-60888622><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-60888622 data-v-c20ff677><div class="content" data-v-c20ff677><div class="outline-marker" data-v-c20ff677></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c20ff677>On this page</div><ul class="VPDocOutlineItem root" data-v-c20ff677 data-v-5df40d96><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-60888622></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6d5a7854><div class="content-container" data-v-6d5a7854><!--[--><!--]--><main class="main" data-v-6d5a7854><div style="position:relative;" class="vp-doc _en-US_api_instance_resize" data-v-6d5a7854><div><h1 id="resize" tabindex="-1">resize() <a class="header-anchor" href="#resize" aria-label="Permalink to &quot;resize()&quot;">â€‹</a></h1><p><code>resize</code> resize the chart.</p><div class="warning custom-block"><p class="custom-block-title">Warning</p><p>The container size will always be filled. This method will recalculate the size of each module of the entire chart. Frequent calls may affect performance, so please call with caution.</p></div><h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference {#reference}&quot;">â€‹</a></h2><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span></code></pre></div><h3 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters {#parameters}&quot;">â€‹</a></h3><p><code>resize</code> does not accept any parameters.</p><h3 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns {#returns}&quot;">â€‹</a></h3><p><code>resize</code> returns <code>undefined</code> .</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage {#usage}&quot;">â€‹</a></h2><h3 id="basic" tabindex="-1">Basic usage <a class="header-anchor" href="#basic" aria-label="Permalink to &quot;Basic usage {#basic}&quot;">â€‹</a></h3><!----></div></div></main><footer class="VPDocFooter" data-v-6d5a7854 data-v-ab4ec467><!--[--><!--]--><div class="edit-info" data-v-ab4ec467><div class="edit-link" data-v-ab4ec467><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/klinecharts/KLineChart/edit/main/docs/en-US/api/instance/resize.md" target="_blank" rel="noreferrer" data-v-ab4ec467><!--[--><span class="vpi-square-pen edit-link-icon" data-v-ab4ec467></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-ab4ec467><p class="VPLastUpdated" data-v-ab4ec467 data-v-25fe8bd7>Last updated: <time datetime="2024-11-29T18:31:55.000Z" data-v-25fe8bd7></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-ab4ec467><span class="visually-hidden" id="doc-footer-aria-label" data-v-ab4ec467>Pager</span><div class="pager" data-v-ab4ec467><a class="VPLink link pager-link prev" href="/en-US/api/instance/getConvertPictureUrl" data-v-ab4ec467><!--[--><span class="desc" data-v-ab4ec467>Previous page</span><span class="title" data-v-ab4ec467>getConvertPictureUrl</span><!--]--></a></div><div class="pager" data-v-ab4ec467><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-7812b707 data-v-5aebf50f><div class="container" data-v-5aebf50f><p class="message" data-v-5aebf50f>Released under the <a href="https://github.com/klinecharts/KLineChart/blob/main/LICENSE">Apache License V2</a>.</p><p class="copyright" data-v-5aebf50f>Copyright Â© 2018-2024 <a href="https://github.com/liihuu">liihuu</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>