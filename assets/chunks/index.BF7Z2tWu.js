import{C as t}from"./theme.x4Z5Tc0C.js";import{o as a,g as n,k as e}from"./framework.DYFzKSfR.js";const s=JSON.parse(`{"js":"import { init, registerIndicator } from 'klinecharts';\\n\\nregisterIndicator({\\n  name: 'customIndicatorTooltip',\\n  shortName: 'Tooltip',\\n  series: 'price',\\n  figures: [{\\n    key: 'close',\\n    title: 'close: ',\\n    type: 'line'\\n  }],\\n  calc: dataList => dataList.map(data => ({ close: data.close })),\\n  createTooltipDataSource: ({ indicator, crosshair }) => {\\n    const result = indicator.result;\\n    const data = result[crosshair.dataIndex];\\n    if (data) {\\n      return {\\n        legends: [\\n          { title: 'CLOSE: ', value: data.close },\\n          { title: 'random: ', value: Math.round(Math.random() * 10) }\\n        ]\\n      };\\n    }\\n    return {};\\n  }\\n});\\n\\nconst chart = init('custom-indicator-tooltip-chart');\\n\\nchart.createIndicator('customIndicatorTooltip');\\n\\nfetch('https://klinecharts.com/datas/kline.json')\\n  .then(res => res.json())\\n  .then(dataList => { chart.applyNewData(dataList); });\\n"}`),u={__name:"index",setup(r){return(o,c)=>(a(),n(t,{chartId:"custom-indicator-tooltip-chart",code:e(s).js},null,8,["code"]))}},i=JSON.parse(`{"js":"import { init, registerIndicator, getFigureClass } from 'klinecharts';\\n\\nregisterIndicator({\\n  name: 'customIndicatorDraw',\\n  shortName: 'Volume',\\n  zLevel: -1,\\n  figures: [],\\n  calc: dataList => dataList.map(data => ({ volume: data.volume, close: data.close, open: data.open })),\\n  createTooltipDataSource: ({ indicator, crosshair }) => {\\n    const result = indicator.result;\\n    const data = result[crosshair.dataIndex];\\n    if (data) {\\n      const color = data.open < data.close ? 'rgb(224, 152, 199)' : 'rgb(143, 211, 232)';\\n      return {\\n        legends: [\\n          { title: '', value: { text: data.volume, color } },\\n        ]\\n      };\\n    }\\n    return {};\\n  },\\n  draw: ({ ctx, chart, indicator, bounding, xAxis }) => {\\n    const { realFrom, realTo } = chart.getVisibleRange();\\n    const { gapBar, halfGapBar } = chart.getBarSpace()\\n    const { result } = indicator;\\n    let maxVolume = 0;\\n    for (let i = realFrom; i < realTo; i++) {\\n      const data = result[i];\\n      if (data) {\\n        maxVolume = Math.max(maxVolume, data.volume);\\n      }\\n    }\\n    const totalHeight = bounding.height * 0.4;\\n    const Rect = getFigureClass('rect');\\n    for (let i = realFrom; i < realTo; i++) {\\n      const data = result[i];\\n      if (data) {\\n        const height = Math.round(data.volume / maxVolume * totalHeight);\\n        const color = data.open < data.close ? 'rgba(224, 152, 199, 0.6)' : 'rgba(143, 211, 232, 0.6)';\\n        new Rect({\\n          name: 'rect',\\n          attrs: {\\n            x: xAxis.convertToPixel(i) - halfGapBar,\\n            y: bounding.height - height,\\n            width: gapBar,\\n            height\\n          },\\n          styles: { color }\\n        }).draw(ctx);\\n      }\\n    }\\n    return true;\\n  }\\n});\\n\\nconst chart = init('custom-indicator-draw-chart');\\n\\nchart.createIndicator('customIndicatorDraw', false, { id: 'candle_pane' });\\n\\nfetch('https://klinecharts.com/datas/kline.json')\\n  .then(res => res.json())\\n  .then(dataList => { chart.applyNewData(dataList); });\\n"}`),h={__name:"index",setup(r){return(o,c)=>(a(),n(t,{chartId:"custom-indicator-draw-chart",code:e(i).js},null,8,["code"]))}};export{u as _,h as a};
